import{f as Cm,r as Tm,g as _s,c as Wr,e as Rd,_ as Nm}from"./index-44f668b5.js";import{e as Lr,N as Au}from"./events-14ae415b.js";var Cu={},Wo={},Ue={},$d={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});function e(f,y){var p=f>>>16&65535,v=f&65535,S=y>>>16&65535,D=y&65535;return v*D+(p*D+v*S<<16>>>0)|0}i.mul=Math.imul||e;function t(f,y){return f+y|0}i.add=t;function s(f,y){return f-y|0}i.sub=s;function o(f,y){return f<<y|f>>>32-y}i.rotl=o;function c(f,y){return f<<32-y|f>>>y}i.rotr=c;function l(f){return typeof f=="number"&&isFinite(f)&&Math.floor(f)===f}i.isInteger=Number.isInteger||l,i.MAX_SAFE_INTEGER=9007199254740991,i.isSafeInteger=function(f){return i.isInteger(f)&&f>=-i.MAX_SAFE_INTEGER&&f<=i.MAX_SAFE_INTEGER}})($d);Object.defineProperty(Ue,"__esModule",{value:!0});var Fd=$d;function Rm(i,e){return e===void 0&&(e=0),(i[e+0]<<8|i[e+1])<<16>>16}Ue.readInt16BE=Rm;function $m(i,e){return e===void 0&&(e=0),(i[e+0]<<8|i[e+1])>>>0}Ue.readUint16BE=$m;function Fm(i,e){return e===void 0&&(e=0),(i[e+1]<<8|i[e])<<16>>16}Ue.readInt16LE=Fm;function Um(i,e){return e===void 0&&(e=0),(i[e+1]<<8|i[e])>>>0}Ue.readUint16LE=Um;function Ud(i,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=i>>>8,e[t+1]=i>>>0,e}Ue.writeUint16BE=Ud;Ue.writeInt16BE=Ud;function jd(i,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=i>>>0,e[t+1]=i>>>8,e}Ue.writeUint16LE=jd;Ue.writeInt16LE=jd;function Zc(i,e){return e===void 0&&(e=0),i[e]<<24|i[e+1]<<16|i[e+2]<<8|i[e+3]}Ue.readInt32BE=Zc;function Qc(i,e){return e===void 0&&(e=0),(i[e]<<24|i[e+1]<<16|i[e+2]<<8|i[e+3])>>>0}Ue.readUint32BE=Qc;function eu(i,e){return e===void 0&&(e=0),i[e+3]<<24|i[e+2]<<16|i[e+1]<<8|i[e]}Ue.readInt32LE=eu;function tu(i,e){return e===void 0&&(e=0),(i[e+3]<<24|i[e+2]<<16|i[e+1]<<8|i[e])>>>0}Ue.readUint32LE=tu;function Bo(i,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=i>>>24,e[t+1]=i>>>16,e[t+2]=i>>>8,e[t+3]=i>>>0,e}Ue.writeUint32BE=Bo;Ue.writeInt32BE=Bo;function zo(i,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=i>>>0,e[t+1]=i>>>8,e[t+2]=i>>>16,e[t+3]=i>>>24,e}Ue.writeUint32LE=zo;Ue.writeInt32LE=zo;function jm(i,e){e===void 0&&(e=0);var t=Zc(i,e),s=Zc(i,e+4);return t*4294967296+s-(s>>31)*4294967296}Ue.readInt64BE=jm;function Mm(i,e){e===void 0&&(e=0);var t=Qc(i,e),s=Qc(i,e+4);return t*4294967296+s}Ue.readUint64BE=Mm;function Lm(i,e){e===void 0&&(e=0);var t=eu(i,e),s=eu(i,e+4);return s*4294967296+t-(t>>31)*4294967296}Ue.readInt64LE=Lm;function Bm(i,e){e===void 0&&(e=0);var t=tu(i,e),s=tu(i,e+4);return s*4294967296+t}Ue.readUint64LE=Bm;function Md(i,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),Bo(i/4294967296>>>0,e,t),Bo(i>>>0,e,t+4),e}Ue.writeUint64BE=Md;Ue.writeInt64BE=Md;function Ld(i,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),zo(i>>>0,e,t),zo(i/4294967296>>>0,e,t+4),e}Ue.writeUint64LE=Ld;Ue.writeInt64LE=Ld;function zm(i,e,t){if(t===void 0&&(t=0),i%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(i/8>e.length-t)throw new Error("readUintBE: array is too short for the given bitLength");for(var s=0,o=1,c=i/8+t-1;c>=t;c--)s+=e[c]*o,o*=256;return s}Ue.readUintBE=zm;function qm(i,e,t){if(t===void 0&&(t=0),i%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(i/8>e.length-t)throw new Error("readUintLE: array is too short for the given bitLength");for(var s=0,o=1,c=t;c<t+i/8;c++)s+=e[c]*o,o*=256;return s}Ue.readUintLE=qm;function Hm(i,e,t,s){if(t===void 0&&(t=new Uint8Array(i/8)),s===void 0&&(s=0),i%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Fd.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var o=1,c=i/8+s-1;c>=s;c--)t[c]=e/o&255,o*=256;return t}Ue.writeUintBE=Hm;function Km(i,e,t,s){if(t===void 0&&(t=new Uint8Array(i/8)),s===void 0&&(s=0),i%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Fd.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var o=1,c=s;c<s+i/8;c++)t[c]=e/o&255,o*=256;return t}Ue.writeUintLE=Km;function Vm(i,e){e===void 0&&(e=0);var t=new DataView(i.buffer,i.byteOffset,i.byteLength);return t.getFloat32(e)}Ue.readFloat32BE=Vm;function km(i,e){e===void 0&&(e=0);var t=new DataView(i.buffer,i.byteOffset,i.byteLength);return t.getFloat32(e,!0)}Ue.readFloat32LE=km;function Gm(i,e){e===void 0&&(e=0);var t=new DataView(i.buffer,i.byteOffset,i.byteLength);return t.getFloat64(e)}Ue.readFloat64BE=Gm;function Wm(i,e){e===void 0&&(e=0);var t=new DataView(i.buffer,i.byteOffset,i.byteLength);return t.getFloat64(e,!0)}Ue.readFloat64LE=Wm;function Ym(i,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(t,i),e}Ue.writeFloat32BE=Ym;function Jm(i,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(t,i,!0),e}Ue.writeFloat32LE=Jm;function Xm(i,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(t,i),e}Ue.writeFloat64BE=Xm;function Zm(i,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(t,i,!0),e}Ue.writeFloat64LE=Zm;var xr={};Object.defineProperty(xr,"__esModule",{value:!0});function Qm(i){for(var e=0;e<i.length;e++)i[e]=0;return i}xr.wipe=Qm;Object.defineProperty(Wo,"__esModule",{value:!0});var er=Ue,ru=xr,eb=20;function tb(i,e,t){for(var s=1634760805,o=857760878,c=2036477234,l=1797285236,f=t[3]<<24|t[2]<<16|t[1]<<8|t[0],y=t[7]<<24|t[6]<<16|t[5]<<8|t[4],p=t[11]<<24|t[10]<<16|t[9]<<8|t[8],v=t[15]<<24|t[14]<<16|t[13]<<8|t[12],S=t[19]<<24|t[18]<<16|t[17]<<8|t[16],D=t[23]<<24|t[22]<<16|t[21]<<8|t[20],x=t[27]<<24|t[26]<<16|t[25]<<8|t[24],O=t[31]<<24|t[30]<<16|t[29]<<8|t[28],z=e[3]<<24|e[2]<<16|e[1]<<8|e[0],H=e[7]<<24|e[6]<<16|e[5]<<8|e[4],ne=e[11]<<24|e[10]<<16|e[9]<<8|e[8],$=e[15]<<24|e[14]<<16|e[13]<<8|e[12],U=s,P=o,N=c,E=l,u=f,b=y,G=p,W=v,se=S,ce=D,de=x,w=O,C=z,ee=H,X=ne,V=$,k=0;k<eb;k+=2)U=U+u|0,C^=U,C=C>>>32-16|C<<16,se=se+C|0,u^=se,u=u>>>32-12|u<<12,P=P+b|0,ee^=P,ee=ee>>>32-16|ee<<16,ce=ce+ee|0,b^=ce,b=b>>>32-12|b<<12,N=N+G|0,X^=N,X=X>>>32-16|X<<16,de=de+X|0,G^=de,G=G>>>32-12|G<<12,E=E+W|0,V^=E,V=V>>>32-16|V<<16,w=w+V|0,W^=w,W=W>>>32-12|W<<12,N=N+G|0,X^=N,X=X>>>32-8|X<<8,de=de+X|0,G^=de,G=G>>>32-7|G<<7,E=E+W|0,V^=E,V=V>>>32-8|V<<8,w=w+V|0,W^=w,W=W>>>32-7|W<<7,P=P+b|0,ee^=P,ee=ee>>>32-8|ee<<8,ce=ce+ee|0,b^=ce,b=b>>>32-7|b<<7,U=U+u|0,C^=U,C=C>>>32-8|C<<8,se=se+C|0,u^=se,u=u>>>32-7|u<<7,U=U+b|0,V^=U,V=V>>>32-16|V<<16,de=de+V|0,b^=de,b=b>>>32-12|b<<12,P=P+G|0,C^=P,C=C>>>32-16|C<<16,w=w+C|0,G^=w,G=G>>>32-12|G<<12,N=N+W|0,ee^=N,ee=ee>>>32-16|ee<<16,se=se+ee|0,W^=se,W=W>>>32-12|W<<12,E=E+u|0,X^=E,X=X>>>32-16|X<<16,ce=ce+X|0,u^=ce,u=u>>>32-12|u<<12,N=N+W|0,ee^=N,ee=ee>>>32-8|ee<<8,se=se+ee|0,W^=se,W=W>>>32-7|W<<7,E=E+u|0,X^=E,X=X>>>32-8|X<<8,ce=ce+X|0,u^=ce,u=u>>>32-7|u<<7,P=P+G|0,C^=P,C=C>>>32-8|C<<8,w=w+C|0,G^=w,G=G>>>32-7|G<<7,U=U+b|0,V^=U,V=V>>>32-8|V<<8,de=de+V|0,b^=de,b=b>>>32-7|b<<7;er.writeUint32LE(U+s|0,i,0),er.writeUint32LE(P+o|0,i,4),er.writeUint32LE(N+c|0,i,8),er.writeUint32LE(E+l|0,i,12),er.writeUint32LE(u+f|0,i,16),er.writeUint32LE(b+y|0,i,20),er.writeUint32LE(G+p|0,i,24),er.writeUint32LE(W+v|0,i,28),er.writeUint32LE(se+S|0,i,32),er.writeUint32LE(ce+D|0,i,36),er.writeUint32LE(de+x|0,i,40),er.writeUint32LE(w+O|0,i,44),er.writeUint32LE(C+z|0,i,48),er.writeUint32LE(ee+H|0,i,52),er.writeUint32LE(X+ne|0,i,56),er.writeUint32LE(V+$|0,i,60)}function Bd(i,e,t,s,o){if(o===void 0&&(o=0),i.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(s.length<t.length)throw new Error("ChaCha: destination is shorter than source");var c,l;if(o===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");c=new Uint8Array(16),l=c.length-e.length,c.set(e,l)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");c=e,l=o}for(var f=new Uint8Array(64),y=0;y<t.length;y+=64){tb(f,c,i);for(var p=y;p<y+64&&p<t.length;p++)s[p]=t[p]^f[p-y];ib(c,0,l)}return ru.wipe(f),o===0&&ru.wipe(c),s}Wo.streamXOR=Bd;function rb(i,e,t,s){return s===void 0&&(s=0),ru.wipe(t),Bd(i,e,t,t,s)}Wo.stream=rb;function ib(i,e,t){for(var s=1;t--;)s=s+(i[e]&255)|0,i[e]=s&255,s>>>=8,e++;if(s>0)throw new Error("ChaCha: counter overflow")}var zd={},$i={};Object.defineProperty($i,"__esModule",{value:!0});function nb(i,e,t){return~(i-1)&e|i-1&t}$i.select=nb;function sb(i,e){return(i|0)-(e|0)-1>>>31&1}$i.lessOrEqual=sb;function qd(i,e){if(i.length!==e.length)return 0;for(var t=0,s=0;s<i.length;s++)t|=i[s]^e[s];return 1&t-1>>>8}$i.compare=qd;function ob(i,e){return i.length===0||e.length===0?!1:qd(i,e)!==0}$i.equal=ob;(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=$i,t=xr;i.DIGEST_LENGTH=16;var s=function(){function l(f){this.digestLength=i.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var y=f[0]|f[1]<<8;this._r[0]=y&8191;var p=f[2]|f[3]<<8;this._r[1]=(y>>>13|p<<3)&8191;var v=f[4]|f[5]<<8;this._r[2]=(p>>>10|v<<6)&7939;var S=f[6]|f[7]<<8;this._r[3]=(v>>>7|S<<9)&8191;var D=f[8]|f[9]<<8;this._r[4]=(S>>>4|D<<12)&255,this._r[5]=D>>>1&8190;var x=f[10]|f[11]<<8;this._r[6]=(D>>>14|x<<2)&8191;var O=f[12]|f[13]<<8;this._r[7]=(x>>>11|O<<5)&8065;var z=f[14]|f[15]<<8;this._r[8]=(O>>>8|z<<8)&8191,this._r[9]=z>>>5&127,this._pad[0]=f[16]|f[17]<<8,this._pad[1]=f[18]|f[19]<<8,this._pad[2]=f[20]|f[21]<<8,this._pad[3]=f[22]|f[23]<<8,this._pad[4]=f[24]|f[25]<<8,this._pad[5]=f[26]|f[27]<<8,this._pad[6]=f[28]|f[29]<<8,this._pad[7]=f[30]|f[31]<<8}return l.prototype._blocks=function(f,y,p){for(var v=this._fin?0:2048,S=this._h[0],D=this._h[1],x=this._h[2],O=this._h[3],z=this._h[4],H=this._h[5],ne=this._h[6],$=this._h[7],U=this._h[8],P=this._h[9],N=this._r[0],E=this._r[1],u=this._r[2],b=this._r[3],G=this._r[4],W=this._r[5],se=this._r[6],ce=this._r[7],de=this._r[8],w=this._r[9];p>=16;){var C=f[y+0]|f[y+1]<<8;S+=C&8191;var ee=f[y+2]|f[y+3]<<8;D+=(C>>>13|ee<<3)&8191;var X=f[y+4]|f[y+5]<<8;x+=(ee>>>10|X<<6)&8191;var V=f[y+6]|f[y+7]<<8;O+=(X>>>7|V<<9)&8191;var k=f[y+8]|f[y+9]<<8;z+=(V>>>4|k<<12)&8191,H+=k>>>1&8191;var J=f[y+10]|f[y+11]<<8;ne+=(k>>>14|J<<2)&8191;var re=f[y+12]|f[y+13]<<8;$+=(J>>>11|re<<5)&8191;var be=f[y+14]|f[y+15]<<8;U+=(re>>>8|be<<8)&8191,P+=be>>>5|v;var oe=0,we=oe;we+=S*N,we+=D*(5*w),we+=x*(5*de),we+=O*(5*ce),we+=z*(5*se),oe=we>>>13,we&=8191,we+=H*(5*W),we+=ne*(5*G),we+=$*(5*b),we+=U*(5*u),we+=P*(5*E),oe+=we>>>13,we&=8191;var le=oe;le+=S*E,le+=D*N,le+=x*(5*w),le+=O*(5*de),le+=z*(5*ce),oe=le>>>13,le&=8191,le+=H*(5*se),le+=ne*(5*W),le+=$*(5*G),le+=U*(5*b),le+=P*(5*u),oe+=le>>>13,le&=8191;var _e=oe;_e+=S*u,_e+=D*E,_e+=x*N,_e+=O*(5*w),_e+=z*(5*de),oe=_e>>>13,_e&=8191,_e+=H*(5*ce),_e+=ne*(5*se),_e+=$*(5*W),_e+=U*(5*G),_e+=P*(5*b),oe+=_e>>>13,_e&=8191;var q=oe;q+=S*b,q+=D*u,q+=x*E,q+=O*N,q+=z*(5*w),oe=q>>>13,q&=8191,q+=H*(5*de),q+=ne*(5*ce),q+=$*(5*se),q+=U*(5*W),q+=P*(5*G),oe+=q>>>13,q&=8191;var B=oe;B+=S*G,B+=D*b,B+=x*u,B+=O*E,B+=z*N,oe=B>>>13,B&=8191,B+=H*(5*w),B+=ne*(5*de),B+=$*(5*ce),B+=U*(5*se),B+=P*(5*W),oe+=B>>>13,B&=8191;var F=oe;F+=S*W,F+=D*G,F+=x*b,F+=O*u,F+=z*E,oe=F>>>13,F&=8191,F+=H*N,F+=ne*(5*w),F+=$*(5*de),F+=U*(5*ce),F+=P*(5*se),oe+=F>>>13,F&=8191;var d=oe;d+=S*se,d+=D*W,d+=x*G,d+=O*b,d+=z*u,oe=d>>>13,d&=8191,d+=H*E,d+=ne*N,d+=$*(5*w),d+=U*(5*de),d+=P*(5*ce),oe+=d>>>13,d&=8191;var T=oe;T+=S*ce,T+=D*se,T+=x*W,T+=O*G,T+=z*b,oe=T>>>13,T&=8191,T+=H*u,T+=ne*E,T+=$*N,T+=U*(5*w),T+=P*(5*de),oe+=T>>>13,T&=8191;var ae=oe;ae+=S*de,ae+=D*ce,ae+=x*se,ae+=O*W,ae+=z*G,oe=ae>>>13,ae&=8191,ae+=H*b,ae+=ne*u,ae+=$*E,ae+=U*N,ae+=P*(5*w),oe+=ae>>>13,ae&=8191;var fe=oe;fe+=S*w,fe+=D*de,fe+=x*ce,fe+=O*se,fe+=z*W,oe=fe>>>13,fe&=8191,fe+=H*G,fe+=ne*b,fe+=$*u,fe+=U*E,fe+=P*N,oe+=fe>>>13,fe&=8191,oe=(oe<<2)+oe|0,oe=oe+we|0,we=oe&8191,oe=oe>>>13,le+=oe,S=we,D=le,x=_e,O=q,z=B,H=F,ne=d,$=T,U=ae,P=fe,y+=16,p-=16}this._h[0]=S,this._h[1]=D,this._h[2]=x,this._h[3]=O,this._h[4]=z,this._h[5]=H,this._h[6]=ne,this._h[7]=$,this._h[8]=U,this._h[9]=P},l.prototype.finish=function(f,y){y===void 0&&(y=0);var p=new Uint16Array(10),v,S,D,x;if(this._leftover){for(x=this._leftover,this._buffer[x++]=1;x<16;x++)this._buffer[x]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(v=this._h[1]>>>13,this._h[1]&=8191,x=2;x<10;x++)this._h[x]+=v,v=this._h[x]>>>13,this._h[x]&=8191;for(this._h[0]+=v*5,v=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=v,v=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=v,p[0]=this._h[0]+5,v=p[0]>>>13,p[0]&=8191,x=1;x<10;x++)p[x]=this._h[x]+v,v=p[x]>>>13,p[x]&=8191;for(p[9]-=8192,S=(v^1)-1,x=0;x<10;x++)p[x]&=S;for(S=~S,x=0;x<10;x++)this._h[x]=this._h[x]&S|p[x];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,D=this._h[0]+this._pad[0],this._h[0]=D&65535,x=1;x<8;x++)D=(this._h[x]+this._pad[x]|0)+(D>>>16)|0,this._h[x]=D&65535;return f[y+0]=this._h[0]>>>0,f[y+1]=this._h[0]>>>8,f[y+2]=this._h[1]>>>0,f[y+3]=this._h[1]>>>8,f[y+4]=this._h[2]>>>0,f[y+5]=this._h[2]>>>8,f[y+6]=this._h[3]>>>0,f[y+7]=this._h[3]>>>8,f[y+8]=this._h[4]>>>0,f[y+9]=this._h[4]>>>8,f[y+10]=this._h[5]>>>0,f[y+11]=this._h[5]>>>8,f[y+12]=this._h[6]>>>0,f[y+13]=this._h[6]>>>8,f[y+14]=this._h[7]>>>0,f[y+15]=this._h[7]>>>8,this._finished=!0,this},l.prototype.update=function(f){var y=0,p=f.length,v;if(this._leftover){v=16-this._leftover,v>p&&(v=p);for(var S=0;S<v;S++)this._buffer[this._leftover+S]=f[y+S];if(p-=v,y+=v,this._leftover+=v,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(p>=16&&(v=p-p%16,this._blocks(f,y,v),y+=v,p-=v),p){for(var S=0;S<p;S++)this._buffer[this._leftover+S]=f[y+S];this._leftover+=p}return this},l.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var f=new Uint8Array(16);return this.finish(f),f},l.prototype.clean=function(){return t.wipe(this._buffer),t.wipe(this._r),t.wipe(this._h),t.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},l}();i.Poly1305=s;function o(l,f){var y=new s(l);y.update(f);var p=y.digest();return y.clean(),p}i.oneTimeAuth=o;function c(l,f){return l.length!==i.DIGEST_LENGTH||f.length!==i.DIGEST_LENGTH?!1:e.equal(l,f)}i.equal=c})(zd);(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=Wo,t=zd,s=xr,o=Ue,c=$i;i.KEY_LENGTH=32,i.NONCE_LENGTH=12,i.TAG_LENGTH=16;var l=new Uint8Array(16),f=function(){function y(p){if(this.nonceLength=i.NONCE_LENGTH,this.tagLength=i.TAG_LENGTH,p.length!==i.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(p)}return y.prototype.seal=function(p,v,S,D){if(p.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var x=new Uint8Array(16);x.set(p,x.length-p.length);var O=new Uint8Array(32);e.stream(this._key,x,O,4);var z=v.length+this.tagLength,H;if(D){if(D.length!==z)throw new Error("ChaCha20Poly1305: incorrect destination length");H=D}else H=new Uint8Array(z);return e.streamXOR(this._key,x,v,H,4),this._authenticate(H.subarray(H.length-this.tagLength,H.length),O,H.subarray(0,H.length-this.tagLength),S),s.wipe(x),H},y.prototype.open=function(p,v,S,D){if(p.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(v.length<this.tagLength)return null;var x=new Uint8Array(16);x.set(p,x.length-p.length);var O=new Uint8Array(32);e.stream(this._key,x,O,4);var z=new Uint8Array(this.tagLength);if(this._authenticate(z,O,v.subarray(0,v.length-this.tagLength),S),!c.equal(z,v.subarray(v.length-this.tagLength,v.length)))return null;var H=v.length-this.tagLength,ne;if(D){if(D.length!==H)throw new Error("ChaCha20Poly1305: incorrect destination length");ne=D}else ne=new Uint8Array(H);return e.streamXOR(this._key,x,v.subarray(0,v.length-this.tagLength),ne,4),s.wipe(x),ne},y.prototype.clean=function(){return s.wipe(this._key),this},y.prototype._authenticate=function(p,v,S,D){var x=new t.Poly1305(v);D&&(x.update(D),D.length%16>0&&x.update(l.subarray(D.length%16))),x.update(S),S.length%16>0&&x.update(l.subarray(S.length%16));var O=new Uint8Array(8);D&&o.writeUint64LE(D.length,O),x.update(O),o.writeUint64LE(S.length,O),x.update(O);for(var z=x.digest(),H=0;H<z.length;H++)p[H]=z[H];x.clean(),s.wipe(z),s.wipe(O)},y}();i.ChaCha20Poly1305=f})(Cu);var Hd={},ms={},Tu={};Object.defineProperty(Tu,"__esModule",{value:!0});function ab(i){return typeof i.saveState<"u"&&typeof i.restoreState<"u"&&typeof i.cleanSavedState<"u"}Tu.isSerializableHash=ab;Object.defineProperty(ms,"__esModule",{value:!0});var ti=Tu,cb=$i,ub=xr,Kd=function(){function i(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var s=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(s).clean():s.set(t);for(var o=0;o<s.length;o++)s[o]^=54;this._inner.update(s);for(var o=0;o<s.length;o++)s[o]^=106;this._outer.update(s),ti.isSerializableHash(this._inner)&&ti.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),ub.wipe(s)}return i.prototype.reset=function(){if(!ti.isSerializableHash(this._inner)||!ti.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},i.prototype.clean=function(){ti.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),ti.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},i.prototype.update=function(e){return this._inner.update(e),this},i.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},i.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},i.prototype.saveState=function(){if(!ti.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},i.prototype.restoreState=function(e){if(!ti.isSerializableHash(this._inner)||!ti.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},i.prototype.cleanSavedState=function(e){if(!ti.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},i}();ms.HMAC=Kd;function hb(i,e,t){var s=new Kd(i,e);s.update(t);var o=s.digest();return s.clean(),o}ms.hmac=hb;ms.equal=cb.equal;Object.defineProperty(Hd,"__esModule",{value:!0});var Zl=ms,Ql=xr,lb=function(){function i(e,t,s,o){s===void 0&&(s=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=o;var c=Zl.hmac(this._hash,s,t);this._hmac=new Zl.HMAC(e,c),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return i.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},i.prototype.expand=function(e){for(var t=new Uint8Array(e),s=0;s<t.length;s++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[s]=this._buffer[this._bufpos++];return t},i.prototype.clean=function(){this._hmac.clean(),Ql.wipe(this._buffer),Ql.wipe(this._counter),this._bufpos=0},i}(),fb=Hd.HKDF=lb,Rn={},Yo={},Jo={};Object.defineProperty(Jo,"__esModule",{value:!0});Jo.BrowserRandomSource=void 0;const ef=65536;class db{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let s=0;s<t.length;s+=ef)this._crypto.getRandomValues(t.subarray(s,s+Math.min(t.length-s,ef)));return t}}Jo.BrowserRandomSource=db;var Xo={};Object.defineProperty(Xo,"__esModule",{value:!0});Xo.NodeRandomSource=void 0;const pb=xr;class gb{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof Cm<"u"){const e=Tm;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const s=new Uint8Array(e);for(let o=0;o<s.length;o++)s[o]=t[o];return(0,pb.wipe)(t),s}}Xo.NodeRandomSource=gb;Object.defineProperty(Yo,"__esModule",{value:!0});Yo.SystemRandomSource=void 0;const yb=Jo,vb=Xo;class _b{constructor(){if(this.isAvailable=!1,this.name="",this._source=new yb.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new vb.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}Yo.SystemRandomSource=_b;(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.randomStringForEntropy=i.randomString=i.randomUint32=i.randomBytes=i.defaultRandomSource=void 0;const e=Yo,t=Ue,s=xr;i.defaultRandomSource=new e.SystemRandomSource;function o(p,v=i.defaultRandomSource){return v.randomBytes(p)}i.randomBytes=o;function c(p=i.defaultRandomSource){const v=o(4,p),S=(0,t.readUint32LE)(v);return(0,s.wipe)(v),S}i.randomUint32=c;const l="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function f(p,v=l,S=i.defaultRandomSource){if(v.length<2)throw new Error("randomString charset is too short");if(v.length>256)throw new Error("randomString charset is too long");let D="";const x=v.length,O=256-256%x;for(;p>0;){const z=o(Math.ceil(p*256/O),S);for(let H=0;H<z.length&&p>0;H++){const ne=z[H];ne<O&&(D+=v.charAt(ne%x),p--)}(0,s.wipe)(z)}return D}i.randomString=f;function y(p,v=l,S=i.defaultRandomSource){const D=Math.ceil(p/(Math.log(v.length)/Math.LN2));return f(D,v,S)}i.randomStringForEntropy=y})(Rn);var Zo={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=Ue,t=xr;i.DIGEST_LENGTH=32,i.BLOCK_SIZE=64;var s=function(){function f(){this.digestLength=i.DIGEST_LENGTH,this.blockSize=i.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return f.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},f.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},f.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._temp),this.reset()},f.prototype.update=function(y,p){if(p===void 0&&(p=y.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var v=0;if(this._bytesHashed+=p,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&p>0;)this._buffer[this._bufferLength++]=y[v++],p--;this._bufferLength===this.blockSize&&(c(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(p>=this.blockSize&&(v=c(this._temp,this._state,y,v,p),p%=this.blockSize);p>0;)this._buffer[this._bufferLength++]=y[v++],p--;return this},f.prototype.finish=function(y){if(!this._finished){var p=this._bytesHashed,v=this._bufferLength,S=p/536870912|0,D=p<<3,x=p%64<56?64:128;this._buffer[v]=128;for(var O=v+1;O<x-8;O++)this._buffer[O]=0;e.writeUint32BE(S,this._buffer,x-8),e.writeUint32BE(D,this._buffer,x-4),c(this._temp,this._state,this._buffer,0,x),this._finished=!0}for(var O=0;O<this.digestLength/4;O++)e.writeUint32BE(this._state[O],y,O*4);return this},f.prototype.digest=function(){var y=new Uint8Array(this.digestLength);return this.finish(y),y},f.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},f.prototype.restoreState=function(y){return this._state.set(y.state),this._bufferLength=y.bufferLength,y.buffer&&this._buffer.set(y.buffer),this._bytesHashed=y.bytesHashed,this._finished=!1,this},f.prototype.cleanSavedState=function(y){t.wipe(y.state),y.buffer&&t.wipe(y.buffer),y.bufferLength=0,y.bytesHashed=0},f}();i.SHA256=s;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function c(f,y,p,v,S){for(;S>=64;){for(var D=y[0],x=y[1],O=y[2],z=y[3],H=y[4],ne=y[5],$=y[6],U=y[7],P=0;P<16;P++){var N=v+P*4;f[P]=e.readUint32BE(p,N)}for(var P=16;P<64;P++){var E=f[P-2],u=(E>>>17|E<<32-17)^(E>>>19|E<<32-19)^E>>>10;E=f[P-15];var b=(E>>>7|E<<32-7)^(E>>>18|E<<32-18)^E>>>3;f[P]=(u+f[P-7]|0)+(b+f[P-16]|0)}for(var P=0;P<64;P++){var u=(((H>>>6|H<<26)^(H>>>11|H<<21)^(H>>>25|H<<7))+(H&ne^~H&$)|0)+(U+(o[P]+f[P]|0)|0)|0,b=((D>>>2|D<<32-2)^(D>>>13|D<<32-13)^(D>>>22|D<<32-22))+(D&x^D&O^x&O)|0;U=$,$=ne,ne=H,H=z+u|0,z=O,O=x,x=D,D=u+b|0}y[0]+=D,y[1]+=x,y[2]+=O,y[3]+=z,y[4]+=H,y[5]+=ne,y[6]+=$,y[7]+=U,v+=64,S-=64}return v}function l(f){var y=new s;y.update(f);var p=y.digest();return y.clean(),p}i.hash=l})(Zo);var Nu={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.sharedKey=i.generateKeyPair=i.generateKeyPairFromSeed=i.scalarMultBase=i.scalarMult=i.SHARED_KEY_LENGTH=i.SECRET_KEY_LENGTH=i.PUBLIC_KEY_LENGTH=void 0;const e=Rn,t=xr;i.PUBLIC_KEY_LENGTH=32,i.SECRET_KEY_LENGTH=32,i.SHARED_KEY_LENGTH=32;function s(P){const N=new Float64Array(16);if(P)for(let E=0;E<P.length;E++)N[E]=P[E];return N}const o=new Uint8Array(32);o[0]=9;const c=s([56129,1]);function l(P){let N=1;for(let E=0;E<16;E++){let u=P[E]+N+65535;N=Math.floor(u/65536),P[E]=u-N*65536}P[0]+=N-1+37*(N-1)}function f(P,N,E){const u=~(E-1);for(let b=0;b<16;b++){const G=u&(P[b]^N[b]);P[b]^=G,N[b]^=G}}function y(P,N){const E=s(),u=s();for(let b=0;b<16;b++)u[b]=N[b];l(u),l(u),l(u);for(let b=0;b<2;b++){E[0]=u[0]-65517;for(let W=1;W<15;W++)E[W]=u[W]-65535-(E[W-1]>>16&1),E[W-1]&=65535;E[15]=u[15]-32767-(E[14]>>16&1);const G=E[15]>>16&1;E[14]&=65535,f(u,E,1-G)}for(let b=0;b<16;b++)P[2*b]=u[b]&255,P[2*b+1]=u[b]>>8}function p(P,N){for(let E=0;E<16;E++)P[E]=N[2*E]+(N[2*E+1]<<8);P[15]&=32767}function v(P,N,E){for(let u=0;u<16;u++)P[u]=N[u]+E[u]}function S(P,N,E){for(let u=0;u<16;u++)P[u]=N[u]-E[u]}function D(P,N,E){let u,b,G=0,W=0,se=0,ce=0,de=0,w=0,C=0,ee=0,X=0,V=0,k=0,J=0,re=0,be=0,oe=0,we=0,le=0,_e=0,q=0,B=0,F=0,d=0,T=0,ae=0,fe=0,Ie=0,qe=0,Ve=0,je=0,pt=0,gt=0,Le=E[0],xe=E[1],Re=E[2],$e=E[3],Be=E[4],Pe=E[5],Fe=E[6],Se=E[7],Ae=E[8],He=E[9],Oe=E[10],ke=E[11],We=E[12],et=E[13],tt=E[14],Je=E[15];u=N[0],G+=u*Le,W+=u*xe,se+=u*Re,ce+=u*$e,de+=u*Be,w+=u*Pe,C+=u*Fe,ee+=u*Se,X+=u*Ae,V+=u*He,k+=u*Oe,J+=u*ke,re+=u*We,be+=u*et,oe+=u*tt,we+=u*Je,u=N[1],W+=u*Le,se+=u*xe,ce+=u*Re,de+=u*$e,w+=u*Be,C+=u*Pe,ee+=u*Fe,X+=u*Se,V+=u*Ae,k+=u*He,J+=u*Oe,re+=u*ke,be+=u*We,oe+=u*et,we+=u*tt,le+=u*Je,u=N[2],se+=u*Le,ce+=u*xe,de+=u*Re,w+=u*$e,C+=u*Be,ee+=u*Pe,X+=u*Fe,V+=u*Se,k+=u*Ae,J+=u*He,re+=u*Oe,be+=u*ke,oe+=u*We,we+=u*et,le+=u*tt,_e+=u*Je,u=N[3],ce+=u*Le,de+=u*xe,w+=u*Re,C+=u*$e,ee+=u*Be,X+=u*Pe,V+=u*Fe,k+=u*Se,J+=u*Ae,re+=u*He,be+=u*Oe,oe+=u*ke,we+=u*We,le+=u*et,_e+=u*tt,q+=u*Je,u=N[4],de+=u*Le,w+=u*xe,C+=u*Re,ee+=u*$e,X+=u*Be,V+=u*Pe,k+=u*Fe,J+=u*Se,re+=u*Ae,be+=u*He,oe+=u*Oe,we+=u*ke,le+=u*We,_e+=u*et,q+=u*tt,B+=u*Je,u=N[5],w+=u*Le,C+=u*xe,ee+=u*Re,X+=u*$e,V+=u*Be,k+=u*Pe,J+=u*Fe,re+=u*Se,be+=u*Ae,oe+=u*He,we+=u*Oe,le+=u*ke,_e+=u*We,q+=u*et,B+=u*tt,F+=u*Je,u=N[6],C+=u*Le,ee+=u*xe,X+=u*Re,V+=u*$e,k+=u*Be,J+=u*Pe,re+=u*Fe,be+=u*Se,oe+=u*Ae,we+=u*He,le+=u*Oe,_e+=u*ke,q+=u*We,B+=u*et,F+=u*tt,d+=u*Je,u=N[7],ee+=u*Le,X+=u*xe,V+=u*Re,k+=u*$e,J+=u*Be,re+=u*Pe,be+=u*Fe,oe+=u*Se,we+=u*Ae,le+=u*He,_e+=u*Oe,q+=u*ke,B+=u*We,F+=u*et,d+=u*tt,T+=u*Je,u=N[8],X+=u*Le,V+=u*xe,k+=u*Re,J+=u*$e,re+=u*Be,be+=u*Pe,oe+=u*Fe,we+=u*Se,le+=u*Ae,_e+=u*He,q+=u*Oe,B+=u*ke,F+=u*We,d+=u*et,T+=u*tt,ae+=u*Je,u=N[9],V+=u*Le,k+=u*xe,J+=u*Re,re+=u*$e,be+=u*Be,oe+=u*Pe,we+=u*Fe,le+=u*Se,_e+=u*Ae,q+=u*He,B+=u*Oe,F+=u*ke,d+=u*We,T+=u*et,ae+=u*tt,fe+=u*Je,u=N[10],k+=u*Le,J+=u*xe,re+=u*Re,be+=u*$e,oe+=u*Be,we+=u*Pe,le+=u*Fe,_e+=u*Se,q+=u*Ae,B+=u*He,F+=u*Oe,d+=u*ke,T+=u*We,ae+=u*et,fe+=u*tt,Ie+=u*Je,u=N[11],J+=u*Le,re+=u*xe,be+=u*Re,oe+=u*$e,we+=u*Be,le+=u*Pe,_e+=u*Fe,q+=u*Se,B+=u*Ae,F+=u*He,d+=u*Oe,T+=u*ke,ae+=u*We,fe+=u*et,Ie+=u*tt,qe+=u*Je,u=N[12],re+=u*Le,be+=u*xe,oe+=u*Re,we+=u*$e,le+=u*Be,_e+=u*Pe,q+=u*Fe,B+=u*Se,F+=u*Ae,d+=u*He,T+=u*Oe,ae+=u*ke,fe+=u*We,Ie+=u*et,qe+=u*tt,Ve+=u*Je,u=N[13],be+=u*Le,oe+=u*xe,we+=u*Re,le+=u*$e,_e+=u*Be,q+=u*Pe,B+=u*Fe,F+=u*Se,d+=u*Ae,T+=u*He,ae+=u*Oe,fe+=u*ke,Ie+=u*We,qe+=u*et,Ve+=u*tt,je+=u*Je,u=N[14],oe+=u*Le,we+=u*xe,le+=u*Re,_e+=u*$e,q+=u*Be,B+=u*Pe,F+=u*Fe,d+=u*Se,T+=u*Ae,ae+=u*He,fe+=u*Oe,Ie+=u*ke,qe+=u*We,Ve+=u*et,je+=u*tt,pt+=u*Je,u=N[15],we+=u*Le,le+=u*xe,_e+=u*Re,q+=u*$e,B+=u*Be,F+=u*Pe,d+=u*Fe,T+=u*Se,ae+=u*Ae,fe+=u*He,Ie+=u*Oe,qe+=u*ke,Ve+=u*We,je+=u*et,pt+=u*tt,gt+=u*Je,G+=38*le,W+=38*_e,se+=38*q,ce+=38*B,de+=38*F,w+=38*d,C+=38*T,ee+=38*ae,X+=38*fe,V+=38*Ie,k+=38*qe,J+=38*Ve,re+=38*je,be+=38*pt,oe+=38*gt,b=1,u=G+b+65535,b=Math.floor(u/65536),G=u-b*65536,u=W+b+65535,b=Math.floor(u/65536),W=u-b*65536,u=se+b+65535,b=Math.floor(u/65536),se=u-b*65536,u=ce+b+65535,b=Math.floor(u/65536),ce=u-b*65536,u=de+b+65535,b=Math.floor(u/65536),de=u-b*65536,u=w+b+65535,b=Math.floor(u/65536),w=u-b*65536,u=C+b+65535,b=Math.floor(u/65536),C=u-b*65536,u=ee+b+65535,b=Math.floor(u/65536),ee=u-b*65536,u=X+b+65535,b=Math.floor(u/65536),X=u-b*65536,u=V+b+65535,b=Math.floor(u/65536),V=u-b*65536,u=k+b+65535,b=Math.floor(u/65536),k=u-b*65536,u=J+b+65535,b=Math.floor(u/65536),J=u-b*65536,u=re+b+65535,b=Math.floor(u/65536),re=u-b*65536,u=be+b+65535,b=Math.floor(u/65536),be=u-b*65536,u=oe+b+65535,b=Math.floor(u/65536),oe=u-b*65536,u=we+b+65535,b=Math.floor(u/65536),we=u-b*65536,G+=b-1+37*(b-1),b=1,u=G+b+65535,b=Math.floor(u/65536),G=u-b*65536,u=W+b+65535,b=Math.floor(u/65536),W=u-b*65536,u=se+b+65535,b=Math.floor(u/65536),se=u-b*65536,u=ce+b+65535,b=Math.floor(u/65536),ce=u-b*65536,u=de+b+65535,b=Math.floor(u/65536),de=u-b*65536,u=w+b+65535,b=Math.floor(u/65536),w=u-b*65536,u=C+b+65535,b=Math.floor(u/65536),C=u-b*65536,u=ee+b+65535,b=Math.floor(u/65536),ee=u-b*65536,u=X+b+65535,b=Math.floor(u/65536),X=u-b*65536,u=V+b+65535,b=Math.floor(u/65536),V=u-b*65536,u=k+b+65535,b=Math.floor(u/65536),k=u-b*65536,u=J+b+65535,b=Math.floor(u/65536),J=u-b*65536,u=re+b+65535,b=Math.floor(u/65536),re=u-b*65536,u=be+b+65535,b=Math.floor(u/65536),be=u-b*65536,u=oe+b+65535,b=Math.floor(u/65536),oe=u-b*65536,u=we+b+65535,b=Math.floor(u/65536),we=u-b*65536,G+=b-1+37*(b-1),P[0]=G,P[1]=W,P[2]=se,P[3]=ce,P[4]=de,P[5]=w,P[6]=C,P[7]=ee,P[8]=X,P[9]=V,P[10]=k,P[11]=J,P[12]=re,P[13]=be,P[14]=oe,P[15]=we}function x(P,N){D(P,N,N)}function O(P,N){const E=s();for(let u=0;u<16;u++)E[u]=N[u];for(let u=253;u>=0;u--)x(E,E),u!==2&&u!==4&&D(E,E,N);for(let u=0;u<16;u++)P[u]=E[u]}function z(P,N){const E=new Uint8Array(32),u=new Float64Array(80),b=s(),G=s(),W=s(),se=s(),ce=s(),de=s();for(let X=0;X<31;X++)E[X]=P[X];E[31]=P[31]&127|64,E[0]&=248,p(u,N);for(let X=0;X<16;X++)G[X]=u[X];b[0]=se[0]=1;for(let X=254;X>=0;--X){const V=E[X>>>3]>>>(X&7)&1;f(b,G,V),f(W,se,V),v(ce,b,W),S(b,b,W),v(W,G,se),S(G,G,se),x(se,ce),x(de,b),D(b,W,b),D(W,G,ce),v(ce,b,W),S(b,b,W),x(G,b),S(W,se,de),D(b,W,c),v(b,b,se),D(W,W,b),D(b,se,de),D(se,G,u),x(G,ce),f(b,G,V),f(W,se,V)}for(let X=0;X<16;X++)u[X+16]=b[X],u[X+32]=W[X],u[X+48]=G[X],u[X+64]=se[X];const w=u.subarray(32),C=u.subarray(16);O(w,w),D(C,C,w);const ee=new Uint8Array(32);return y(ee,C),ee}i.scalarMult=z;function H(P){return z(P,o)}i.scalarMultBase=H;function ne(P){if(P.length!==i.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${i.SECRET_KEY_LENGTH} bytes`);const N=new Uint8Array(P);return{publicKey:H(N),secretKey:N}}i.generateKeyPairFromSeed=ne;function $(P){const N=(0,e.randomBytes)(32,P),E=ne(N);return(0,t.wipe)(N),E}i.generateKeyPair=$;function U(P,N,E=!1){if(P.length!==i.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(N.length!==i.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const u=z(P,N);if(E){let b=0;for(let G=0;G<u.length;G++)b|=u[G];if(b===0)throw new Error("X25519: invalid shared key")}return u}i.sharedKey=U})(Nu);function Ru(i){return globalThis.Buffer!=null?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):i}function Vd(i=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Ru(globalThis.Buffer.allocUnsafe(i)):new Uint8Array(i)}function iu(i,e){e||(e=i.reduce((o,c)=>o+c.length,0));const t=Vd(e);let s=0;for(const o of i)t.set(o,s),s+=o.length;return Ru(t)}function mb(i,e){if(i.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var o=0;o<i.length;o++){var c=i.charAt(o),l=c.charCodeAt(0);if(t[l]!==255)throw new TypeError(c+" is ambiguous");t[l]=o}var f=i.length,y=i.charAt(0),p=Math.log(f)/Math.log(256),v=Math.log(256)/Math.log(f);function S(O){if(O instanceof Uint8Array||(ArrayBuffer.isView(O)?O=new Uint8Array(O.buffer,O.byteOffset,O.byteLength):Array.isArray(O)&&(O=Uint8Array.from(O))),!(O instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(O.length===0)return"";for(var z=0,H=0,ne=0,$=O.length;ne!==$&&O[ne]===0;)ne++,z++;for(var U=($-ne)*v+1>>>0,P=new Uint8Array(U);ne!==$;){for(var N=O[ne],E=0,u=U-1;(N!==0||E<H)&&u!==-1;u--,E++)N+=256*P[u]>>>0,P[u]=N%f>>>0,N=N/f>>>0;if(N!==0)throw new Error("Non-zero carry");H=E,ne++}for(var b=U-H;b!==U&&P[b]===0;)b++;for(var G=y.repeat(z);b<U;++b)G+=i.charAt(P[b]);return G}function D(O){if(typeof O!="string")throw new TypeError("Expected String");if(O.length===0)return new Uint8Array;var z=0;if(O[z]!==" "){for(var H=0,ne=0;O[z]===y;)H++,z++;for(var $=(O.length-z)*p+1>>>0,U=new Uint8Array($);O[z];){var P=t[O.charCodeAt(z)];if(P===255)return;for(var N=0,E=$-1;(P!==0||N<ne)&&E!==-1;E--,N++)P+=f*U[E]>>>0,U[E]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");ne=N,z++}if(O[z]!==" "){for(var u=$-ne;u!==$&&U[u]===0;)u++;for(var b=new Uint8Array(H+($-u)),G=H;u!==$;)b[G++]=U[u++];return b}}}function x(O){var z=D(O);if(z)return z;throw new Error(`Non-${e} character`)}return{encode:S,decodeUnsafe:D,decode:x}}var bb=mb,wb=bb;const Eb=i=>{if(i instanceof Uint8Array&&i.constructor.name==="Uint8Array")return i;if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);throw new Error("Unknown type, must be binary type")},Db=i=>new TextEncoder().encode(i),Sb=i=>new TextDecoder().decode(i);class Ib{constructor(e,t,s){this.name=e,this.prefix=t,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class xb{constructor(e,t,s){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return kd(this,e)}}class Ob{constructor(e){this.decoders=e}or(e){return kd(this,e)}decode(e){const t=e[0],s=this.decoders[t];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const kd=(i,e)=>new Ob({...i.decoders||{[i.prefix]:i},...e.decoders||{[e.prefix]:e}});class Pb{constructor(e,t,s,o){this.name=e,this.prefix=t,this.baseEncode=s,this.baseDecode=o,this.encoder=new Ib(e,t,s),this.decoder=new xb(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Qo=({name:i,prefix:e,encode:t,decode:s})=>new Pb(i,e,t,s),bs=({prefix:i,name:e,alphabet:t})=>{const{encode:s,decode:o}=wb(t,e);return Qo({prefix:i,name:e,encode:s,decode:c=>Eb(o(c))})},Ab=(i,e,t,s)=>{const o={};for(let v=0;v<e.length;++v)o[e[v]]=v;let c=i.length;for(;i[c-1]==="=";)--c;const l=new Uint8Array(c*t/8|0);let f=0,y=0,p=0;for(let v=0;v<c;++v){const S=o[i[v]];if(S===void 0)throw new SyntaxError(`Non-${s} character`);y=y<<t|S,f+=t,f>=8&&(f-=8,l[p++]=255&y>>f)}if(f>=t||255&y<<8-f)throw new SyntaxError("Unexpected end of data");return l},Cb=(i,e,t)=>{const s=e[e.length-1]==="=",o=(1<<t)-1;let c="",l=0,f=0;for(let y=0;y<i.length;++y)for(f=f<<8|i[y],l+=8;l>t;)l-=t,c+=e[o&f>>l];if(l&&(c+=e[o&f<<t-l]),s)for(;c.length*t&7;)c+="=";return c},Jt=({name:i,prefix:e,bitsPerChar:t,alphabet:s})=>Qo({prefix:e,name:i,encode(o){return Cb(o,s,t)},decode(o){return Ab(o,s,t,i)}}),Tb=Qo({prefix:"\0",name:"identity",encode:i=>Sb(i),decode:i=>Db(i)}),Nb=Object.freeze(Object.defineProperty({__proto__:null,identity:Tb},Symbol.toStringTag,{value:"Module"})),Rb=Jt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),$b=Object.freeze(Object.defineProperty({__proto__:null,base2:Rb},Symbol.toStringTag,{value:"Module"})),Fb=Jt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Ub=Object.freeze(Object.defineProperty({__proto__:null,base8:Fb},Symbol.toStringTag,{value:"Module"})),jb=bs({prefix:"9",name:"base10",alphabet:"0123456789"}),Mb=Object.freeze(Object.defineProperty({__proto__:null,base10:jb},Symbol.toStringTag,{value:"Module"})),Lb=Jt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Bb=Jt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),zb=Object.freeze(Object.defineProperty({__proto__:null,base16:Lb,base16upper:Bb},Symbol.toStringTag,{value:"Module"})),qb=Jt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Hb=Jt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Kb=Jt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Vb=Jt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),kb=Jt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Gb=Jt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Wb=Jt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Yb=Jt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Jb=Jt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Xb=Object.freeze(Object.defineProperty({__proto__:null,base32:qb,base32hex:kb,base32hexpad:Wb,base32hexpadupper:Yb,base32hexupper:Gb,base32pad:Kb,base32padupper:Vb,base32upper:Hb,base32z:Jb},Symbol.toStringTag,{value:"Module"})),Zb=bs({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Qb=bs({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),ew=Object.freeze(Object.defineProperty({__proto__:null,base36:Zb,base36upper:Qb},Symbol.toStringTag,{value:"Module"})),tw=bs({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),rw=bs({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),iw=Object.freeze(Object.defineProperty({__proto__:null,base58btc:tw,base58flickr:rw},Symbol.toStringTag,{value:"Module"})),nw=Jt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),sw=Jt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ow=Jt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),aw=Jt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),cw=Object.freeze(Object.defineProperty({__proto__:null,base64:nw,base64pad:sw,base64url:ow,base64urlpad:aw},Symbol.toStringTag,{value:"Module"})),Gd=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),uw=Gd.reduce((i,e,t)=>(i[t]=e,i),[]),hw=Gd.reduce((i,e,t)=>(i[e.codePointAt(0)]=t,i),[]);function lw(i){return i.reduce((e,t)=>(e+=uw[t],e),"")}function fw(i){const e=[];for(const t of i){const s=hw[t.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(s)}return new Uint8Array(e)}const dw=Qo({prefix:"🚀",name:"base256emoji",encode:lw,decode:fw}),pw=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:dw},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const tf={...Nb,...$b,...Ub,...Mb,...zb,...Xb,...ew,...iw,...cw,...pw};function Wd(i,e,t,s){return{name:i,prefix:e,encoder:{name:i,prefix:e,encode:t},decoder:{decode:s}}}const rf=Wd("utf8","u",i=>"u"+new TextDecoder("utf8").decode(i),i=>new TextEncoder().encode(i.substring(1))),Tc=Wd("ascii","a",i=>{let e="a";for(let t=0;t<i.length;t++)e+=String.fromCharCode(i[t]);return e},i=>{i=i.substring(1);const e=Vd(i.length);for(let t=0;t<i.length;t++)e[t]=i.charCodeAt(t);return e}),Yd={utf8:rf,"utf-8":rf,hex:tf.base16,latin1:Tc,ascii:Tc,binary:Tc,...tf};function mr(i,e="utf8"){const t=Yd[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Ru(globalThis.Buffer.from(i,"utf-8")):t.decoder.decode(`${t.prefix}${i}`)}function hr(i,e="utf8"){const t=Yd[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(i.buffer,i.byteOffset,i.byteLength).toString("utf8"):t.encoder.encode(i).substring(1)}var nf=globalThis&&globalThis.__spreadArray||function(i,e,t){if(t||arguments.length===2)for(var s=0,o=e.length,c;s<o;s++)(c||!(s in e))&&(c||(c=Array.prototype.slice.call(e,0,s)),c[s]=e[s]);return i.concat(c||Array.prototype.slice.call(e))},gw=function(){function i(e,t,s){this.name=e,this.version=t,this.os=s,this.type="browser"}return i}(),yw=function(){function i(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return i}(),vw=function(){function i(e,t,s,o){this.name=e,this.version=t,this.os=s,this.bot=o,this.type="bot-device"}return i}(),_w=function(){function i(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return i}(),mw=function(){function i(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return i}(),bw=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,ww=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,sf=3,Ew=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",bw]],of=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Dw(i){return i?af(i):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new mw:typeof navigator<"u"?af(navigator.userAgent):xw()}function Sw(i){return i!==""&&Ew.reduce(function(e,t){var s=t[0],o=t[1];if(e)return e;var c=o.exec(i);return!!c&&[s,c]},!1)}function af(i){var e=Sw(i);if(!e)return null;var t=e[0],s=e[1];if(t==="searchbot")return new _w;var o=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);o?o.length<sf&&(o=nf(nf([],o,!0),Ow(sf-o.length),!0)):o=[];var c=o.join("."),l=Iw(i),f=ww.exec(i);return f&&f[1]?new vw(t,c,l,f[1]):new gw(t,c,l)}function Iw(i){for(var e=0,t=of.length;e<t;e++){var s=of[e],o=s[0],c=s[1],l=c.exec(i);if(l)return o}return null}function xw(){var i=typeof process<"u"&&process.version;return i?new yw(process.version.slice(1)):null}function Ow(i){for(var e=[],t=0;t<i;t++)e.push("0");return e}var ve={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var nu=function(i,e){return nu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},nu(i,e)};function Pw(i,e){nu(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var su=function(){return su=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},su.apply(this,arguments)};function Aw(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(t[s[o]]=i[s[o]]);return t}function Cw(i,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(i,e,t,s);else for(var f=i.length-1;f>=0;f--)(l=i[f])&&(c=(o<3?l(c):o>3?l(e,t,c):l(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function Tw(i,e){return function(t,s){e(t,s,i)}}function Nw(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)}function Rw(i,e,t,s){function o(c){return c instanceof t?c:new t(function(l){l(c)})}return new(t||(t=Promise))(function(c,l){function f(v){try{p(s.next(v))}catch(S){l(S)}}function y(v){try{p(s.throw(v))}catch(S){l(S)}}function p(v){v.done?c(v.value):o(v.value).then(f,y)}p((s=s.apply(i,e||[])).next())})}function $w(i,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(p){return function(v){return y([p,v])}}function y(p){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=p[0]&2?o.return:p[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,p[1])).done)return c;switch(o=0,c&&(p=[p[0]&2,c.value]),p[0]){case 0:case 1:c=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!c||p[1]>c[0]&&p[1]<c[3])){t.label=p[1];break}if(p[0]===6&&t.label<c[1]){t.label=c[1],c=p;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(p);break}c[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(i,t)}catch(v){p=[6,v],o=0}finally{s=c=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function Fw(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}function Uw(i,e){for(var t in i)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=i[t])}function ou(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],s=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Jd(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var s=t.call(i),o,c=[],l;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(f){l={error:f}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(l)throw l.error}}return c}function jw(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(Jd(arguments[e]));return i}function Mw(){for(var i=0,e=0,t=arguments.length;e<t;e++)i+=arguments[e].length;for(var s=Array(i),o=0,e=0;e<t;e++)for(var c=arguments[e],l=0,f=c.length;l<f;l++,o++)s[o]=c[l];return s}function ds(i){return this instanceof ds?(this.v=i,this):new ds(i)}function Lw(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(i,e||[]),o,c=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(D){s[D]&&(o[D]=function(x){return new Promise(function(O,z){c.push([D,x,O,z])>1||f(D,x)})})}function f(D,x){try{y(s[D](x))}catch(O){S(c[0][3],O)}}function y(D){D.value instanceof ds?Promise.resolve(D.value.v).then(p,v):S(c[0][2],D)}function p(D){f("next",D)}function v(D){f("throw",D)}function S(D,x){D(x),c.shift(),c.length&&f(c[0][0],c[0][1])}}function Bw(i){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=i[o]?function(l){return(t=!t)?{value:ds(i[o](l)),done:o==="return"}:c?c(l):l}:c}}function zw(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof ou=="function"?ou(i):i[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=i[c]&&function(l){return new Promise(function(f,y){l=i[c](l),o(f,y,l.done,l.value)})}}function o(c,l,f,y){Promise.resolve(y).then(function(p){c({value:p,done:f})},l)}}function qw(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i}function Hw(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)Object.hasOwnProperty.call(i,t)&&(e[t]=i[t]);return e.default=i,e}function Kw(i){return i&&i.__esModule?i:{default:i}}function Vw(i,e){if(!e.has(i))throw new TypeError("attempted to get private field on non-instance");return e.get(i)}function kw(i,e,t){if(!e.has(i))throw new TypeError("attempted to set private field on non-instance");return e.set(i,t),t}const Gw=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return su},__asyncDelegator:Bw,__asyncGenerator:Lw,__asyncValues:zw,__await:ds,__awaiter:Rw,__classPrivateFieldGet:Vw,__classPrivateFieldSet:kw,__createBinding:Fw,__decorate:Cw,__exportStar:Uw,__extends:Pw,__generator:$w,__importDefault:Kw,__importStar:Hw,__makeTemplateObject:qw,__metadata:Nw,__param:Tw,__read:Jd,__rest:Aw,__spread:jw,__spreadArrays:Mw,__values:ou},Symbol.toStringTag,{value:"Module"})),ea=_s(Gw);var Nc={},rs={},cf;function Ww(){if(cf)return rs;cf=1,Object.defineProperty(rs,"__esModule",{value:!0}),rs.delay=void 0;function i(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}return rs.delay=i,rs}var Xi={},Rc={},Zi={},uf;function Yw(){return uf||(uf=1,Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.ONE_THOUSAND=Zi.ONE_HUNDRED=void 0,Zi.ONE_HUNDRED=100,Zi.ONE_THOUSAND=1e3),Zi}var $c={},hf;function Jw(){return hf||(hf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ONE_YEAR=i.FOUR_WEEKS=i.THREE_WEEKS=i.TWO_WEEKS=i.ONE_WEEK=i.THIRTY_DAYS=i.SEVEN_DAYS=i.FIVE_DAYS=i.THREE_DAYS=i.ONE_DAY=i.TWENTY_FOUR_HOURS=i.TWELVE_HOURS=i.SIX_HOURS=i.THREE_HOURS=i.ONE_HOUR=i.SIXTY_MINUTES=i.THIRTY_MINUTES=i.TEN_MINUTES=i.FIVE_MINUTES=i.ONE_MINUTE=i.SIXTY_SECONDS=i.THIRTY_SECONDS=i.TEN_SECONDS=i.FIVE_SECONDS=i.ONE_SECOND=void 0,i.ONE_SECOND=1,i.FIVE_SECONDS=5,i.TEN_SECONDS=10,i.THIRTY_SECONDS=30,i.SIXTY_SECONDS=60,i.ONE_MINUTE=i.SIXTY_SECONDS,i.FIVE_MINUTES=i.ONE_MINUTE*5,i.TEN_MINUTES=i.ONE_MINUTE*10,i.THIRTY_MINUTES=i.ONE_MINUTE*30,i.SIXTY_MINUTES=i.ONE_MINUTE*60,i.ONE_HOUR=i.SIXTY_MINUTES,i.THREE_HOURS=i.ONE_HOUR*3,i.SIX_HOURS=i.ONE_HOUR*6,i.TWELVE_HOURS=i.ONE_HOUR*12,i.TWENTY_FOUR_HOURS=i.ONE_HOUR*24,i.ONE_DAY=i.TWENTY_FOUR_HOURS,i.THREE_DAYS=i.ONE_DAY*3,i.FIVE_DAYS=i.ONE_DAY*5,i.SEVEN_DAYS=i.ONE_DAY*7,i.THIRTY_DAYS=i.ONE_DAY*30,i.ONE_WEEK=i.SEVEN_DAYS,i.TWO_WEEKS=i.ONE_WEEK*2,i.THREE_WEEKS=i.ONE_WEEK*3,i.FOUR_WEEKS=i.ONE_WEEK*4,i.ONE_YEAR=i.ONE_DAY*365}($c)),$c}var lf;function Xd(){return lf||(lf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=ea;e.__exportStar(Yw(),i),e.__exportStar(Jw(),i)}(Rc)),Rc}var ff;function Xw(){if(ff)return Xi;ff=1,Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.fromMiliseconds=Xi.toMiliseconds=void 0;const i=Xd();function e(s){return s*i.ONE_THOUSAND}Xi.toMiliseconds=e;function t(s){return Math.floor(s/i.ONE_THOUSAND)}return Xi.fromMiliseconds=t,Xi}var df;function Zw(){return df||(df=1,function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=ea;e.__exportStar(Ww(),i),e.__exportStar(Xw(),i)}(Nc)),Nc}var An={},pf;function Qw(){if(pf)return An;pf=1,Object.defineProperty(An,"__esModule",{value:!0}),An.Watch=void 0;class i{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const s=this.get(t);if(typeof s.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const o=Date.now()-s.started;this.timestamps.set(t,{started:s.started,elapsed:o})}get(t){const s=this.timestamps.get(t);if(typeof s>"u")throw new Error(`No timestamp found for label: ${t}`);return s}elapsed(t){const s=this.get(t);return s.elapsed||Date.now()-s.started}}return An.Watch=i,An.default=i,An}var Fc={},is={},gf;function eE(){if(gf)return is;gf=1,Object.defineProperty(is,"__esModule",{value:!0}),is.IWatch=void 0;class i{}return is.IWatch=i,is}var yf;function tE(){return yf||(yf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),ea.__exportStar(eE(),i)}(Fc)),Fc}(function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=ea;e.__exportStar(Zw(),i),e.__exportStar(Qw(),i),e.__exportStar(tE(),i),e.__exportStar(Xd(),i)})(ve);var lt={};Object.defineProperty(lt,"__esModule",{value:!0});lt.getLocalStorage=lt.getLocalStorageOrThrow=lt.getCrypto=lt.getCryptoOrThrow=Qd=lt.getLocation=lt.getLocationOrThrow=$u=lt.getNavigator=lt.getNavigatorOrThrow=Zd=lt.getDocument=lt.getDocumentOrThrow=lt.getFromWindowOrThrow=lt.getFromWindow=void 0;function nn(i){let e;return typeof window<"u"&&typeof window[i]<"u"&&(e=window[i]),e}lt.getFromWindow=nn;function $n(i){const e=nn(i);if(!e)throw new Error(`${i} is not defined in Window`);return e}lt.getFromWindowOrThrow=$n;function rE(){return $n("document")}lt.getDocumentOrThrow=rE;function iE(){return nn("document")}var Zd=lt.getDocument=iE;function nE(){return $n("navigator")}lt.getNavigatorOrThrow=nE;function sE(){return nn("navigator")}var $u=lt.getNavigator=sE;function oE(){return $n("location")}lt.getLocationOrThrow=oE;function aE(){return nn("location")}var Qd=lt.getLocation=aE;function cE(){return $n("crypto")}lt.getCryptoOrThrow=cE;function uE(){return nn("crypto")}lt.getCrypto=uE;function hE(){return $n("localStorage")}lt.getLocalStorageOrThrow=hE;function lE(){return nn("localStorage")}lt.getLocalStorage=lE;var Fu={};Object.defineProperty(Fu,"__esModule",{value:!0});var ep=Fu.getWindowMetadata=void 0;const vf=lt;function fE(){let i,e;try{i=vf.getDocumentOrThrow(),e=vf.getLocationOrThrow()}catch{return null}function t(){const S=i.getElementsByTagName("link"),D=[];for(let x=0;x<S.length;x++){const O=S[x],z=O.getAttribute("rel");if(z&&z.toLowerCase().indexOf("icon")>-1){const H=O.getAttribute("href");if(H)if(H.toLowerCase().indexOf("https:")===-1&&H.toLowerCase().indexOf("http:")===-1&&H.indexOf("//")!==0){let ne=e.protocol+"//"+e.host;if(H.indexOf("/")===0)ne+=H;else{const $=e.pathname.split("/");$.pop();const U=$.join("/");ne+=U+"/"+H}D.push(ne)}else if(H.indexOf("//")===0){const ne=e.protocol+H;D.push(ne)}else D.push(H)}}return D}function s(...S){const D=i.getElementsByTagName("meta");for(let x=0;x<D.length;x++){const O=D[x],z=["itemprop","property","name"].map(H=>O.getAttribute(H)).filter(H=>H?S.includes(H):!1);if(z.length&&z){const H=O.getAttribute("content");if(H)return H}}return""}function o(){let S=s("name","og:site_name","og:title","twitter:title");return S||(S=i.title),S}function c(){return s("description","og:description","twitter:description","keywords")}const l=o(),f=c(),y=e.origin,p=t();return{description:f,url:y,icons:p,name:l}}ep=Fu.getWindowMetadata=fE;var ps={},dE=i=>encodeURIComponent(i).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),tp="%[a-f0-9]{2}",_f=new RegExp("("+tp+")|([^%]+?)","gi"),mf=new RegExp("("+tp+")+","gi");function au(i,e){try{return[decodeURIComponent(i.join(""))]}catch{}if(i.length===1)return i;e=e||1;var t=i.slice(0,e),s=i.slice(e);return Array.prototype.concat.call([],au(t),au(s))}function pE(i){try{return decodeURIComponent(i)}catch{for(var e=i.match(_f)||[],t=1;t<e.length;t++)i=au(e,t).join(""),e=i.match(_f)||[];return i}}function gE(i){for(var e={"%FE%FF":"��","%FF%FE":"��"},t=mf.exec(i);t;){try{e[t[0]]=decodeURIComponent(t[0])}catch{var s=pE(t[0]);s!==t[0]&&(e[t[0]]=s)}t=mf.exec(i)}e["%C2"]="�";for(var o=Object.keys(e),c=0;c<o.length;c++){var l=o[c];i=i.replace(new RegExp(l,"g"),e[l])}return i}var yE=function(i){if(typeof i!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof i+"`");try{return i=i.replace(/\+/g," "),decodeURIComponent(i)}catch{return gE(i)}},vE=(i,e)=>{if(!(typeof i=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[i];const t=i.indexOf(e);return t===-1?[i]:[i.slice(0,t),i.slice(t+e.length)]},_E=function(i,e){for(var t={},s=Object.keys(i),o=Array.isArray(e),c=0;c<s.length;c++){var l=s[c],f=i[l];(o?e.indexOf(l)!==-1:e(l,f,i))&&(t[l]=f)}return t};(function(i){const e=dE,t=yE,s=vE,o=_E,c=$=>$==null,l=Symbol("encodeFragmentIdentifier");function f($){switch($.arrayFormat){case"index":return U=>(P,N)=>{const E=P.length;return N===void 0||$.skipNull&&N===null||$.skipEmptyString&&N===""?P:N===null?[...P,[v(U,$),"[",E,"]"].join("")]:[...P,[v(U,$),"[",v(E,$),"]=",v(N,$)].join("")]};case"bracket":return U=>(P,N)=>N===void 0||$.skipNull&&N===null||$.skipEmptyString&&N===""?P:N===null?[...P,[v(U,$),"[]"].join("")]:[...P,[v(U,$),"[]=",v(N,$)].join("")];case"colon-list-separator":return U=>(P,N)=>N===void 0||$.skipNull&&N===null||$.skipEmptyString&&N===""?P:N===null?[...P,[v(U,$),":list="].join("")]:[...P,[v(U,$),":list=",v(N,$)].join("")];case"comma":case"separator":case"bracket-separator":{const U=$.arrayFormat==="bracket-separator"?"[]=":"=";return P=>(N,E)=>E===void 0||$.skipNull&&E===null||$.skipEmptyString&&E===""?N:(E=E===null?"":E,N.length===0?[[v(P,$),U,v(E,$)].join("")]:[[N,v(E,$)].join($.arrayFormatSeparator)])}default:return U=>(P,N)=>N===void 0||$.skipNull&&N===null||$.skipEmptyString&&N===""?P:N===null?[...P,v(U,$)]:[...P,[v(U,$),"=",v(N,$)].join("")]}}function y($){let U;switch($.arrayFormat){case"index":return(P,N,E)=>{if(U=/\[(\d*)\]$/.exec(P),P=P.replace(/\[\d*\]$/,""),!U){E[P]=N;return}E[P]===void 0&&(E[P]={}),E[P][U[1]]=N};case"bracket":return(P,N,E)=>{if(U=/(\[\])$/.exec(P),P=P.replace(/\[\]$/,""),!U){E[P]=N;return}if(E[P]===void 0){E[P]=[N];return}E[P]=[].concat(E[P],N)};case"colon-list-separator":return(P,N,E)=>{if(U=/(:list)$/.exec(P),P=P.replace(/:list$/,""),!U){E[P]=N;return}if(E[P]===void 0){E[P]=[N];return}E[P]=[].concat(E[P],N)};case"comma":case"separator":return(P,N,E)=>{const u=typeof N=="string"&&N.includes($.arrayFormatSeparator),b=typeof N=="string"&&!u&&S(N,$).includes($.arrayFormatSeparator);N=b?S(N,$):N;const G=u||b?N.split($.arrayFormatSeparator).map(W=>S(W,$)):N===null?N:S(N,$);E[P]=G};case"bracket-separator":return(P,N,E)=>{const u=/(\[\])$/.test(P);if(P=P.replace(/\[\]$/,""),!u){E[P]=N&&S(N,$);return}const b=N===null?[]:N.split($.arrayFormatSeparator).map(G=>S(G,$));if(E[P]===void 0){E[P]=b;return}E[P]=[].concat(E[P],b)};default:return(P,N,E)=>{if(E[P]===void 0){E[P]=N;return}E[P]=[].concat(E[P],N)}}}function p($){if(typeof $!="string"||$.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function v($,U){return U.encode?U.strict?e($):encodeURIComponent($):$}function S($,U){return U.decode?t($):$}function D($){return Array.isArray($)?$.sort():typeof $=="object"?D(Object.keys($)).sort((U,P)=>Number(U)-Number(P)).map(U=>$[U]):$}function x($){const U=$.indexOf("#");return U!==-1&&($=$.slice(0,U)),$}function O($){let U="";const P=$.indexOf("#");return P!==-1&&(U=$.slice(P)),U}function z($){$=x($);const U=$.indexOf("?");return U===-1?"":$.slice(U+1)}function H($,U){return U.parseNumbers&&!Number.isNaN(Number($))&&typeof $=="string"&&$.trim()!==""?$=Number($):U.parseBooleans&&$!==null&&($.toLowerCase()==="true"||$.toLowerCase()==="false")&&($=$.toLowerCase()==="true"),$}function ne($,U){U=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},U),p(U.arrayFormatSeparator);const P=y(U),N=Object.create(null);if(typeof $!="string"||($=$.trim().replace(/^[?#&]/,""),!$))return N;for(const E of $.split("&")){if(E==="")continue;let[u,b]=s(U.decode?E.replace(/\+/g," "):E,"=");b=b===void 0?null:["comma","separator","bracket-separator"].includes(U.arrayFormat)?b:S(b,U),P(S(u,U),b,N)}for(const E of Object.keys(N)){const u=N[E];if(typeof u=="object"&&u!==null)for(const b of Object.keys(u))u[b]=H(u[b],U);else N[E]=H(u,U)}return U.sort===!1?N:(U.sort===!0?Object.keys(N).sort():Object.keys(N).sort(U.sort)).reduce((E,u)=>{const b=N[u];return b&&typeof b=="object"&&!Array.isArray(b)?E[u]=D(b):E[u]=b,E},Object.create(null))}i.extract=z,i.parse=ne,i.stringify=($,U)=>{if(!$)return"";U=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},U),p(U.arrayFormatSeparator);const P=b=>U.skipNull&&c($[b])||U.skipEmptyString&&$[b]==="",N=f(U),E={};for(const b of Object.keys($))P(b)||(E[b]=$[b]);const u=Object.keys(E);return U.sort!==!1&&u.sort(U.sort),u.map(b=>{const G=$[b];return G===void 0?"":G===null?v(b,U):Array.isArray(G)?G.length===0&&U.arrayFormat==="bracket-separator"?v(b,U)+"[]":G.reduce(N(b),[]).join("&"):v(b,U)+"="+v(G,U)}).filter(b=>b.length>0).join("&")},i.parseUrl=($,U)=>{U=Object.assign({decode:!0},U);const[P,N]=s($,"#");return Object.assign({url:P.split("?")[0]||"",query:ne(z($),U)},U&&U.parseFragmentIdentifier&&N?{fragmentIdentifier:S(N,U)}:{})},i.stringifyUrl=($,U)=>{U=Object.assign({encode:!0,strict:!0,[l]:!0},U);const P=x($.url).split("?")[0]||"",N=i.extract($.url),E=i.parse(N,{sort:!1}),u=Object.assign(E,$.query);let b=i.stringify(u,U);b&&(b=`?${b}`);let G=O($.url);return $.fragmentIdentifier&&(G=`#${U[l]?v($.fragmentIdentifier,U):$.fragmentIdentifier}`),`${P}${b}${G}`},i.pick=($,U,P)=>{P=Object.assign({parseFragmentIdentifier:!0,[l]:!1},P);const{url:N,query:E,fragmentIdentifier:u}=i.parseUrl($,P);return i.stringifyUrl({url:N,query:o(E,U),fragmentIdentifier:u},P)},i.exclude=($,U,P)=>{const N=Array.isArray(U)?E=>!U.includes(E):(E,u)=>!U(E,u);return i.pick($,N,P)}})(ps);const mE={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function bE(i,e=[]){const t=[];return Object.keys(i).forEach(s=>{if(e.length&&!e.includes(s))return;const o=i[s];t.push(...o.accounts)}),t}function rp(i,e){return i.includes(":")?[i]:e.chains||[]}const ip="base10",ur="base16",cu="base64pad",Uu="utf8",np=0,sn=1,wE=0,bf=1,uu=12,ju=32;function EE(){const i=Nu.generateKeyPair();return{privateKey:hr(i.secretKey,ur),publicKey:hr(i.publicKey,ur)}}function hu(){const i=Rn.randomBytes(ju);return hr(i,ur)}function DE(i,e){const t=Nu.sharedKey(mr(i,ur),mr(e,ur)),s=new fb(Zo.SHA256,t).expand(ju);return hr(s,ur)}function SE(i){const e=Zo.hash(mr(i,ur));return hr(e,ur)}function Tn(i){const e=Zo.hash(mr(i,Uu));return hr(e,ur)}function IE(i){return mr(`${i}`,ip)}function ws(i){return Number(hr(i,ip))}function xE(i){const e=IE(typeof i.type<"u"?i.type:np);if(ws(e)===sn&&typeof i.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof i.senderPublicKey<"u"?mr(i.senderPublicKey,ur):void 0,s=typeof i.iv<"u"?mr(i.iv,ur):Rn.randomBytes(uu),o=new Cu.ChaCha20Poly1305(mr(i.symKey,ur)).seal(s,mr(i.message,Uu));return PE({type:e,sealed:o,iv:s,senderPublicKey:t})}function OE(i){const e=new Cu.ChaCha20Poly1305(mr(i.symKey,ur)),{sealed:t,iv:s}=qo(i.encoded),o=e.open(s,t);if(o===null)throw new Error("Failed to decrypt");return hr(o,Uu)}function PE(i){if(ws(i.type)===sn){if(typeof i.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return hr(iu([i.type,i.senderPublicKey,i.iv,i.sealed]),cu)}return hr(iu([i.type,i.iv,i.sealed]),cu)}function qo(i){const e=mr(i,cu),t=e.slice(wE,bf),s=bf;if(ws(t)===sn){const f=s+ju,y=f+uu,p=e.slice(s,f),v=e.slice(f,y),S=e.slice(y);return{type:t,sealed:S,iv:v,senderPublicKey:p}}const o=s+uu,c=e.slice(s,o),l=e.slice(o);return{type:t,sealed:l,iv:c}}function AE(i,e){const t=qo(i);return sp({type:ws(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?hr(t.senderPublicKey,ur):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function sp(i){const e=(i==null?void 0:i.type)||np;if(e===sn){if(typeof(i==null?void 0:i.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(i==null?void 0:i.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:i==null?void 0:i.senderPublicKey,receiverPublicKey:i==null?void 0:i.receiverPublicKey}}function wf(i){return i.type===sn&&typeof i.senderPublicKey=="string"&&typeof i.receiverPublicKey=="string"}var CE=Object.defineProperty,Ef=Object.getOwnPropertySymbols,TE=Object.prototype.hasOwnProperty,NE=Object.prototype.propertyIsEnumerable,Df=(i,e,t)=>e in i?CE(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Sf=(i,e)=>{for(var t in e||(e={}))TE.call(e,t)&&Df(i,t,e[t]);if(Ef)for(var t of Ef(e))NE.call(e,t)&&Df(i,t,e[t]);return i};const RE="ReactNative",Ni={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},$E="js";function Mu(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function op(){return!Zd()&&!!$u()&&navigator.product===RE}function Lu(){return!Mu()&&!!$u()}function Bu(){return op()?Ni.reactNative:Mu()?Ni.node:Lu()?Ni.browser:Ni.unknown}function FE(i,e){let t=ps.parse(i);return t=Sf(Sf({},t),e),i=ps.stringify(t),i}function UE(){return ep()||{name:"",description:"",url:"",icons:[""]}}function jE(){if(Bu()===Ni.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:t,Version:s}=global.Platform;return[t,s].join("-")}const i=Dw();if(i===null)return"unknown";const e=i.os?i.os.replace(" ","").toLowerCase():"unknown";return i.type==="browser"?[e,i.name,i.version].join("-"):[e,i.version].join("-")}function ME(){var i;const e=Bu();return e===Ni.browser?[e,((i=Qd())==null?void 0:i.host)||"unknown"].join(":"):e}function LE(i,e,t){const s=jE(),o=ME();return[[i,e].join("-"),[$E,t].join("-"),s,o].join("/")}function BE({protocol:i,version:e,relayUrl:t,sdkVersion:s,auth:o,projectId:c,useOnCloseEvent:l}){const f=t.split("?"),y=LE(i,e,s),p={auth:o,ua:y,projectId:c,useOnCloseEvent:l||void 0},v=FE(f[1]||"",p);return f[0]+"?"+v}function tn(i,e){return i.filter(t=>e.includes(t)).length===i.length}function ap(i){return Object.fromEntries(i.entries())}function cp(i){return new Map(Object.entries(i))}function Cn(i=ve.FIVE_MINUTES,e){const t=ve.toMiliseconds(i||ve.FIVE_MINUTES);let s,o,c;return{resolve:l=>{c&&s&&(clearTimeout(c),s(l))},reject:l=>{c&&o&&(clearTimeout(c),o(l))},done:()=>new Promise((l,f)=>{c=setTimeout(()=>{f(new Error(e))},t),s=l,o=f})}}function Ho(i,e,t){return new Promise(async(s,o)=>{const c=setTimeout(()=>o(new Error(t)),e);try{const l=await i;s(l)}catch(l){o(l)}clearTimeout(c)})}function up(i,e){if(typeof e=="string"&&e.startsWith(`${i}:`))return e;if(i.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(i.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${i}`)}function zE(i){return up("topic",i)}function qE(i){return up("id",i)}function hp(i){const[e,t]=i.split(":"),s={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")s.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))s.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return s}function kr(i,e){return ve.fromMiliseconds((e||Date.now())+ve.toMiliseconds(i))}function Ti(i){return Date.now()>=ve.toMiliseconds(i)}function qt(i,e){return`${i}${e?`:${e}`:""}`}function Uc(i=[],e=[]){return[...new Set([...i,...e])]}async function HE({id:i,topic:e,wcDeepLink:t}){try{if(!t)return;const s=typeof t=="string"?JSON.parse(t):t;let o=s==null?void 0:s.href;if(typeof o!="string")return;o.endsWith("/")&&(o=o.slice(0,-1));const c=`${o}/wc?requestId=${i}&sessionTopic=${e}`,l=Bu();l===Ni.browser?c.startsWith("https://")?window.open(c,"_blank","noreferrer noopener"):window.open(c,"_self","noreferrer noopener"):l===Ni.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(c)}catch(s){console.error(s)}}const KE="irn";function lu(i){return(i==null?void 0:i.relay)||{protocol:KE}}function Fo(i){const e=mE[i];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${i}`);return e}var VE=Object.defineProperty,If=Object.getOwnPropertySymbols,kE=Object.prototype.hasOwnProperty,GE=Object.prototype.propertyIsEnumerable,xf=(i,e,t)=>e in i?VE(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,WE=(i,e)=>{for(var t in e||(e={}))kE.call(e,t)&&xf(i,t,e[t]);if(If)for(var t of If(e))GE.call(e,t)&&xf(i,t,e[t]);return i};function YE(i,e="-"){const t={},s="relay"+e;return Object.keys(i).forEach(o=>{if(o.startsWith(s)){const c=o.replace(s,""),l=i[o];t[c]=l}}),t}function JE(i){const e=i.indexOf(":"),t=i.indexOf("?")!==-1?i.indexOf("?"):void 0,s=i.substring(0,e),o=i.substring(e+1,t).split("@"),c=typeof t<"u"?i.substring(t):"",l=ps.parse(c);return{protocol:s,topic:XE(o[0]),version:parseInt(o[1],10),symKey:l.symKey,relay:YE(l)}}function XE(i){return i.startsWith("//")?i.substring(2):i}function ZE(i,e="-"){const t="relay",s={};return Object.keys(i).forEach(o=>{const c=t+e+o;i[o]&&(s[c]=i[o])}),s}function QE(i){return`${i.protocol}:${i.topic}@${i.version}?`+ps.stringify(WE({symKey:i.symKey},ZE(i.relay)))}function Fn(i){const e=[];return i.forEach(t=>{const[s,o]=t.split(":");e.push(`${s}:${o}`)}),e}function e3(i){const e=[];return Object.values(i).forEach(t=>{e.push(...Fn(t.accounts))}),e}function t3(i,e){const t=[];return Object.values(i).forEach(s=>{Fn(s.accounts).includes(e)&&t.push(...s.methods)}),t}function r3(i,e){const t=[];return Object.values(i).forEach(s=>{Fn(s.accounts).includes(e)&&t.push(...s.events)}),t}function i3(i,e){const t=jo(i,e);if(t)throw new Error(t.message);const s={};for(const[o,c]of Object.entries(i))s[o]={methods:c.methods,events:c.events,chains:c.accounts.map(l=>`${l.split(":")[0]}:${l.split(":")[1]}`)};return s}function zu(i){return i.includes(":")}function Uo(i){return zu(i)?i.split(":")[0]:i}const n3={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},s3={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function he(i,e){const{message:t,code:s}=s3[i];return{message:e?`${t} ${e}`:t,code:s}}function Rt(i,e){const{message:t,code:s}=n3[i];return{message:e?`${t} ${e}`:t,code:s}}function ni(i,e){return Array.isArray(i)?typeof e<"u"&&i.length?i.every(e):!0:!1}function Nn(i){return Object.getPrototypeOf(i)===Object.prototype&&Object.keys(i).length}function cr(i){return typeof i>"u"}function Wt(i,e){return e&&cr(i)?!0:typeof i=="string"&&!!i.trim().length}function qu(i,e){return e&&cr(i)?!0:typeof i=="number"&&!isNaN(i)}function o3(i,e){const{requiredNamespaces:t}=e,s=Object.keys(i.namespaces),o=Object.keys(t);let c=!0;return tn(o,s)?(s.forEach(l=>{const{accounts:f,methods:y,events:p}=i.namespaces[l],v=Fn(f),S=t[l];(!tn(rp(l,S),v)||!tn(S.methods,y)||!tn(S.events,p))&&(c=!1)}),c):!1}function Ko(i){return Wt(i,!1)&&i.includes(":")?i.split(":").length===2:!1}function a3(i){if(Wt(i,!1)&&i.includes(":")){const e=i.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&Ko(t)}}return!1}function c3(i){if(Wt(i,!1))try{return typeof new URL(i)<"u"}catch{return!1}return!1}function u3(i){var e;return(e=i==null?void 0:i.proposer)==null?void 0:e.publicKey}function h3(i){return i==null?void 0:i.topic}function l3(i,e){let t=null;return Wt(i==null?void 0:i.publicKey,!1)||(t=he("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function Of(i){let e=!0;return ni(i)?i.length&&(e=i.every(t=>Wt(t,!1))):e=!1,e}function f3(i,e,t){let s=null;return ni(e)&&e.length?e.forEach(o=>{s||Ko(o)||(s=Rt("UNSUPPORTED_CHAINS",`${t}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):Ko(i)||(s=Rt("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),s}function d3(i,e,t){let s=null;return Object.entries(i).forEach(([o,c])=>{if(s)return;const l=f3(o,rp(o,c),`${e} ${t}`);l&&(s=l)}),s}function p3(i,e){let t=null;return ni(i)?i.forEach(s=>{t||a3(s)||(t=Rt("UNSUPPORTED_ACCOUNTS",`${e}, account ${s} should be a string and conform to "namespace:chainId:address" format`))}):t=Rt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function g3(i,e){let t=null;return Object.values(i).forEach(s=>{if(t)return;const o=p3(s==null?void 0:s.accounts,`${e} namespace`);o&&(t=o)}),t}function y3(i,e){let t=null;return Of(i==null?void 0:i.methods)?Of(i==null?void 0:i.events)||(t=Rt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=Rt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function lp(i,e){let t=null;return Object.values(i).forEach(s=>{if(t)return;const o=y3(s,`${e}, namespace`);o&&(t=o)}),t}function v3(i,e,t){let s=null;if(i&&Nn(i)){const o=lp(i,e);o&&(s=o);const c=d3(i,e,t);c&&(s=c)}else s=he("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return s}function jo(i,e){let t=null;if(i&&Nn(i)){const s=lp(i,e);s&&(t=s);const o=g3(i,e);o&&(t=o)}else t=he("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function fp(i){return Wt(i.protocol,!0)}function _3(i,e){let t=!1;return e&&!i?t=!0:i&&ni(i)&&i.length&&i.forEach(s=>{t=fp(s)}),t}function m3(i){return typeof i=="number"}function _r(i){return typeof i<"u"&&typeof i!==null}function b3(i){return!(!i||typeof i!="object"||!i.code||!qu(i.code,!1)||!i.message||!Wt(i.message,!1))}function w3(i){return!(cr(i)||!Wt(i.method,!1))}function E3(i){return!(cr(i)||cr(i.result)&&cr(i.error)||!qu(i.id,!1)||!Wt(i.jsonrpc,!1))}function D3(i){return!(cr(i)||!Wt(i.name,!1))}function Pf(i,e){return!(!Ko(e)||!e3(i).includes(e))}function S3(i,e,t){return Wt(t,!1)?t3(i,e).includes(t):!1}function I3(i,e,t){return Wt(t,!1)?r3(i,e).includes(t):!1}function Af(i,e,t){let s=null;const o=x3(i),c=O3(e),l=Object.keys(o),f=Object.keys(c),y=Cf(Object.keys(i)),p=Cf(Object.keys(e)),v=y.filter(S=>!p.includes(S));return v.length&&(s=he("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${v.toString()}
      Received: ${Object.keys(e).toString()}`)),tn(l,f)||(s=he("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${l.toString()}
      Approved: ${f.toString()}`)),Object.keys(e).forEach(S=>{if(!S.includes(":")||s)return;const D=Fn(e[S].accounts);D.includes(S)||(s=he("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${S}
        Required: ${S}
        Approved: ${D.toString()}`))}),l.forEach(S=>{s||(tn(o[S].methods,c[S].methods)?tn(o[S].events,c[S].events)||(s=he("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${S}`)):s=he("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${S}`))}),s}function x3(i){const e={};return Object.keys(i).forEach(t=>{var s;t.includes(":")?e[t]=i[t]:(s=i[t].chains)==null||s.forEach(o=>{e[o]={methods:i[t].methods,events:i[t].events}})}),e}function Cf(i){return[...new Set(i.map(e=>e.includes(":")?e.split(":")[0]:e))]}function O3(i){const e={};return Object.keys(i).forEach(t=>{if(t.includes(":"))e[t]=i[t];else{const s=Fn(i[t].accounts);s==null||s.forEach(o=>{e[o]={accounts:i[t].accounts.filter(c=>c.includes(`${o}:`)),methods:i[t].methods,events:i[t].events}})}}),e}function P3(i,e){return qu(i,!1)&&i<=e.max&&i>=e.min}const A3=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,C3=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,T3=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function N3(i,e){if(i==="__proto__"||i==="constructor"&&e&&typeof e=="object"&&"prototype"in e){R3(i);return}return e}function R3(i){console.warn(`[destr] Dropping "${i}" key to prevent prototype pollution.`)}function Co(i,e={}){if(typeof i!="string")return i;const t=i.trim();if(i[0]==='"'&&i.at(-1)==='"'&&!i.includes("\\"))return t.slice(1,-1);if(t.length<=9){const s=t.toLowerCase();if(s==="true")return!0;if(s==="false")return!1;if(s==="undefined")return;if(s==="null")return null;if(s==="nan")return Number.NaN;if(s==="infinity")return Number.POSITIVE_INFINITY;if(s==="-infinity")return Number.NEGATIVE_INFINITY}if(!T3.test(i)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return i}try{if(A3.test(i)||C3.test(i)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(i,N3)}return JSON.parse(i)}catch(s){if(e.strict)throw s;return i}}function $3(i){return!i||typeof i.then!="function"?Promise.resolve(i):i}function Gt(i,...e){try{return $3(i(...e))}catch(t){return Promise.reject(t)}}function F3(i){const e=typeof i;return i===null||e!=="object"&&e!=="function"}function U3(i){const e=Object.getPrototypeOf(i);return!e||e.isPrototypeOf(Object)}function Mo(i){if(F3(i))return String(i);if(U3(i)||Array.isArray(i))return JSON.stringify(i);if(typeof i.toJSON=="function")return Mo(i.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function dp(){if(typeof Buffer===void 0)throw new TypeError("[unstorage] Buffer is not supported!")}const fu="base64:";function j3(i){if(typeof i=="string")return i;dp();const e=Buffer.from(i).toString("base64");return fu+e}function M3(i){return typeof i!="string"||!i.startsWith(fu)?i:(dp(),Buffer.from(i.slice(fu.length),"base64"))}function vr(i){return i?i.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function L3(...i){return vr(i.join(":"))}function To(i){return i=vr(i),i?i+":":""}const B3="memory",z3=()=>{const i=new Map;return{name:B3,options:{},hasItem(e){return i.has(e)},getItem(e){return i.get(e)??null},getItemRaw(e){return i.get(e)??null},setItem(e,t){i.set(e,t)},setItemRaw(e,t){i.set(e,t)},removeItem(e){i.delete(e)},getKeys(){return Array.from(i.keys())},clear(){i.clear()},dispose(){i.clear()}}};function q3(i={}){const e={mounts:{"":i.driver||z3()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},t=p=>{for(const v of e.mountpoints)if(p.startsWith(v))return{base:v,relativeKey:p.slice(v.length),driver:e.mounts[v]};return{base:"",relativeKey:p,driver:e.mounts[""]}},s=(p,v)=>e.mountpoints.filter(S=>S.startsWith(p)||v&&p.startsWith(S)).map(S=>({relativeBase:p.length>S.length?p.slice(S.length):void 0,mountpoint:S,driver:e.mounts[S]})),o=(p,v)=>{if(e.watching){v=vr(v);for(const S of e.watchListeners)S(p,v)}},c=async()=>{if(!e.watching){e.watching=!0;for(const p in e.mounts)e.unwatch[p]=await Tf(e.mounts[p],o,p)}},l=async()=>{if(e.watching){for(const p in e.unwatch)await e.unwatch[p]();e.unwatch={},e.watching=!1}},f=(p,v,S)=>{const D=new Map,x=O=>{let z=D.get(O.base);return z||(z={driver:O.driver,base:O.base,items:[]},D.set(O.base,z)),z};for(const O of p){const z=typeof O=="string",H=vr(z?O:O.key),ne=z?void 0:O.value,$=z||!O.options?v:{...v,...O.options},U=t(H);x(U).items.push({key:H,value:ne,relativeKey:U.relativeKey,options:$})}return Promise.all([...D.values()].map(O=>S(O))).then(O=>O.flat())},y={hasItem(p,v={}){p=vr(p);const{relativeKey:S,driver:D}=t(p);return Gt(D.hasItem,S,v)},getItem(p,v={}){p=vr(p);const{relativeKey:S,driver:D}=t(p);return Gt(D.getItem,S,v).then(x=>Co(x))},getItems(p,v){return f(p,v,S=>S.driver.getItems?Gt(S.driver.getItems,S.items.map(D=>({key:D.relativeKey,options:D.options})),v).then(D=>D.map(x=>({key:L3(S.base,x.key),value:Co(x.value)}))):Promise.all(S.items.map(D=>Gt(S.driver.getItem,D.relativeKey,D.options).then(x=>({key:D.key,value:Co(x)})))))},getItemRaw(p,v={}){p=vr(p);const{relativeKey:S,driver:D}=t(p);return D.getItemRaw?Gt(D.getItemRaw,S,v):Gt(D.getItem,S,v).then(x=>M3(x))},async setItem(p,v,S={}){if(v===void 0)return y.removeItem(p);p=vr(p);const{relativeKey:D,driver:x}=t(p);x.setItem&&(await Gt(x.setItem,D,Mo(v),S),x.watch||o("update",p))},async setItems(p,v){await f(p,v,async S=>{S.driver.setItems&&await Gt(S.driver.setItems,S.items.map(D=>({key:D.relativeKey,value:Mo(D.value),options:D.options})),v),S.driver.setItem&&await Promise.all(S.items.map(D=>Gt(S.driver.setItem,D.relativeKey,Mo(D.value),D.options)))})},async setItemRaw(p,v,S={}){if(v===void 0)return y.removeItem(p,S);p=vr(p);const{relativeKey:D,driver:x}=t(p);if(x.setItemRaw)await Gt(x.setItemRaw,D,v,S);else if(x.setItem)await Gt(x.setItem,D,j3(v),S);else return;x.watch||o("update",p)},async removeItem(p,v={}){typeof v=="boolean"&&(v={removeMeta:v}),p=vr(p);const{relativeKey:S,driver:D}=t(p);D.removeItem&&(await Gt(D.removeItem,S,v),(v.removeMeta||v.removeMata)&&await Gt(D.removeItem,S+"$",v),D.watch||o("remove",p))},async getMeta(p,v={}){typeof v=="boolean"&&(v={nativeOnly:v}),p=vr(p);const{relativeKey:S,driver:D}=t(p),x=Object.create(null);if(D.getMeta&&Object.assign(x,await Gt(D.getMeta,S,v)),!v.nativeOnly){const O=await Gt(D.getItem,S+"$",v).then(z=>Co(z));O&&typeof O=="object"&&(typeof O.atime=="string"&&(O.atime=new Date(O.atime)),typeof O.mtime=="string"&&(O.mtime=new Date(O.mtime)),Object.assign(x,O))}return x},setMeta(p,v,S={}){return this.setItem(p+"$",v,S)},removeMeta(p,v={}){return this.removeItem(p+"$",v)},async getKeys(p,v={}){p=To(p);const S=s(p,!0);let D=[];const x=[];for(const O of S){const H=(await Gt(O.driver.getKeys,O.relativeBase,v)).map(ne=>O.mountpoint+vr(ne)).filter(ne=>!D.some($=>ne.startsWith($)));x.push(...H),D=[O.mountpoint,...D.filter(ne=>!ne.startsWith(O.mountpoint))]}return p?x.filter(O=>O.startsWith(p)&&!O.endsWith("$")):x.filter(O=>!O.endsWith("$"))},async clear(p,v={}){p=To(p),await Promise.all(s(p,!1).map(async S=>{if(S.driver.clear)return Gt(S.driver.clear,S.relativeBase,v);if(S.driver.removeItem){const D=await S.driver.getKeys(S.relativeBase||"",v);return Promise.all(D.map(x=>S.driver.removeItem(x,v)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(p=>Nf(p)))},async watch(p){return await c(),e.watchListeners.push(p),async()=>{e.watchListeners=e.watchListeners.filter(v=>v!==p),e.watchListeners.length===0&&await l()}},async unwatch(){e.watchListeners=[],await l()},mount(p,v){if(p=To(p),p&&e.mounts[p])throw new Error(`already mounted at ${p}`);return p&&(e.mountpoints.push(p),e.mountpoints.sort((S,D)=>D.length-S.length)),e.mounts[p]=v,e.watching&&Promise.resolve(Tf(v,o,p)).then(S=>{e.unwatch[p]=S}).catch(console.error),y},async unmount(p,v=!0){p=To(p),!(!p||!e.mounts[p])&&(e.watching&&p in e.unwatch&&(e.unwatch[p](),delete e.unwatch[p]),v&&await Nf(e.mounts[p]),e.mountpoints=e.mountpoints.filter(S=>S!==p),delete e.mounts[p])},getMount(p=""){p=vr(p)+":";const v=t(p);return{driver:v.driver,base:v.base}},getMounts(p="",v={}){return p=vr(p),s(p,v.parents).map(D=>({driver:D.driver,base:D.mountpoint}))}};return y}function Tf(i,e,t){return i.watch?i.watch((s,o)=>e(s,t+o)):()=>{}}async function Nf(i){typeof i.dispose=="function"&&await Gt(i.dispose)}function on(i){return new Promise((e,t)=>{i.oncomplete=i.onsuccess=()=>e(i.result),i.onabort=i.onerror=()=>t(i.error)})}function pp(i,e){const t=indexedDB.open(i);t.onupgradeneeded=()=>t.result.createObjectStore(e);const s=on(t);return(o,c)=>s.then(l=>c(l.transaction(e,o).objectStore(e)))}let jc;function Es(){return jc||(jc=pp("keyval-store","keyval")),jc}function Rf(i,e=Es()){return e("readonly",t=>on(t.get(i)))}function H3(i,e,t=Es()){return t("readwrite",s=>(s.put(e,i),on(s.transaction)))}function K3(i,e=Es()){return e("readwrite",t=>(t.delete(i),on(t.transaction)))}function V3(i=Es()){return i("readwrite",e=>(e.clear(),on(e.transaction)))}function k3(i,e){return i.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},on(i.transaction)}function G3(i=Es()){return i("readonly",e=>{if(e.getAllKeys)return on(e.getAllKeys());const t=[];return k3(e,s=>t.push(s.key)).then(()=>t)})}const W3=i=>JSON.stringify(i,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),Y3=i=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=i.replace(e,'$1"$2n"$3');return JSON.parse(t,(s,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function Ds(i){if(typeof i!="string")throw new Error(`Cannot safe json parse value of type ${typeof i}`);try{return Y3(i)}catch{return i}}function rn(i){return typeof i=="string"?i:W3(i)||""}const J3="idb-keyval";var X3=(i={})=>{const e=i.base&&i.base.length>0?`${i.base}:`:"",t=o=>e+o;let s;return i.dbName&&i.storeName&&(s=pp(i.dbName,i.storeName)),{name:J3,options:i,async hasItem(o){return!(typeof await Rf(t(o),s)>"u")},async getItem(o){return await Rf(t(o),s)??null},setItem(o,c){return H3(t(o),c,s)},removeItem(o){return K3(t(o),s)},getKeys(){return G3(s)},clear(){return V3(s)}}};const Z3="WALLET_CONNECT_V2_INDEXED_DB",Q3="keyvaluestorage";let e6=class{constructor(){this.indexedDb=q3({driver:X3({dbName:Z3,storeName:Q3})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const t=await this.indexedDb.getItem(e);if(t!==null)return t}async setItem(e,t){await this.indexedDb.setItem(e,rn(t))}async removeItem(e){await this.indexedDb.removeItem(e)}};var Mc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Lo={exports:{}};(function(){let i;function e(){}i=e,i.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},i.prototype.setItem=function(t,s){this[t]=String(s)},i.prototype.removeItem=function(t){delete this[t]},i.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(s){t[s]=void 0,delete t[s]})},i.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},i.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Mc<"u"&&Mc.localStorage?Lo.exports=Mc.localStorage:typeof window<"u"&&window.localStorage?Lo.exports=window.localStorage:Lo.exports=new e})();function t6(i){var e;return[i[0],Ds((e=i[1])!=null?e:"")]}let r6=class{constructor(){this.localStorage=Lo.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(t6)}async getItem(e){const t=this.localStorage.getItem(e);if(t!==null)return Ds(t)}async setItem(e,t){this.localStorage.setItem(e,rn(t))}async removeItem(e){this.localStorage.removeItem(e)}};const i6="wc_storage_version",$f=1,n6=async(i,e,t)=>{const s=i6,o=await e.getItem(s);if(o&&o>=$f){t(e);return}const c=await i.getKeys();if(!c.length){t(e);return}const l=[];for(;c.length;){const f=c.shift();if(!f)continue;const y=f.toLowerCase();if(y.includes("wc@")||y.includes("walletconnect")||y.includes("wc_")||y.includes("wallet_connect")){const p=await i.getItem(f);await e.setItem(f,p),l.push(f)}}await e.setItem(s,$f),t(e),s6(i,l)},s6=async(i,e)=>{e.length&&e.forEach(async t=>{await i.removeItem(t)})};let o6=class{constructor(){this.initialized=!1,this.setInitialized=t=>{this.storage=t,this.initialized=!0};const e=new r6;this.storage=e;try{const t=new e6;n6(e,t,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)})}};var Un={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var du=function(i,e){return du=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},du(i,e)};function a6(i,e){du(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var pu=function(){return pu=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},pu.apply(this,arguments)};function c6(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(t[s[o]]=i[s[o]]);return t}function u6(i,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(i,e,t,s);else for(var f=i.length-1;f>=0;f--)(l=i[f])&&(c=(o<3?l(c):o>3?l(e,t,c):l(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function h6(i,e){return function(t,s){e(t,s,i)}}function l6(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)}function f6(i,e,t,s){function o(c){return c instanceof t?c:new t(function(l){l(c)})}return new(t||(t=Promise))(function(c,l){function f(v){try{p(s.next(v))}catch(S){l(S)}}function y(v){try{p(s.throw(v))}catch(S){l(S)}}function p(v){v.done?c(v.value):o(v.value).then(f,y)}p((s=s.apply(i,e||[])).next())})}function d6(i,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(p){return function(v){return y([p,v])}}function y(p){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=p[0]&2?o.return:p[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,p[1])).done)return c;switch(o=0,c&&(p=[p[0]&2,c.value]),p[0]){case 0:case 1:c=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!c||p[1]>c[0]&&p[1]<c[3])){t.label=p[1];break}if(p[0]===6&&t.label<c[1]){t.label=c[1],c=p;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(p);break}c[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(i,t)}catch(v){p=[6,v],o=0}finally{s=c=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function p6(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}function g6(i,e){for(var t in i)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=i[t])}function gu(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],s=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function gp(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var s=t.call(i),o,c=[],l;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(f){l={error:f}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(l)throw l.error}}return c}function y6(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(gp(arguments[e]));return i}function v6(){for(var i=0,e=0,t=arguments.length;e<t;e++)i+=arguments[e].length;for(var s=Array(i),o=0,e=0;e<t;e++)for(var c=arguments[e],l=0,f=c.length;l<f;l++,o++)s[o]=c[l];return s}function gs(i){return this instanceof gs?(this.v=i,this):new gs(i)}function _6(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(i,e||[]),o,c=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(D){s[D]&&(o[D]=function(x){return new Promise(function(O,z){c.push([D,x,O,z])>1||f(D,x)})})}function f(D,x){try{y(s[D](x))}catch(O){S(c[0][3],O)}}function y(D){D.value instanceof gs?Promise.resolve(D.value.v).then(p,v):S(c[0][2],D)}function p(D){f("next",D)}function v(D){f("throw",D)}function S(D,x){D(x),c.shift(),c.length&&f(c[0][0],c[0][1])}}function m6(i){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=i[o]?function(l){return(t=!t)?{value:gs(i[o](l)),done:o==="return"}:c?c(l):l}:c}}function b6(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof gu=="function"?gu(i):i[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=i[c]&&function(l){return new Promise(function(f,y){l=i[c](l),o(f,y,l.done,l.value)})}}function o(c,l,f,y){Promise.resolve(y).then(function(p){c({value:p,done:f})},l)}}function w6(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i}function E6(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)Object.hasOwnProperty.call(i,t)&&(e[t]=i[t]);return e.default=i,e}function D6(i){return i&&i.__esModule?i:{default:i}}function S6(i,e){if(!e.has(i))throw new TypeError("attempted to get private field on non-instance");return e.get(i)}function I6(i,e,t){if(!e.has(i))throw new TypeError("attempted to set private field on non-instance");return e.set(i,t),t}const x6=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return pu},__asyncDelegator:m6,__asyncGenerator:_6,__asyncValues:b6,__await:gs,__awaiter:f6,__classPrivateFieldGet:S6,__classPrivateFieldSet:I6,__createBinding:p6,__decorate:u6,__exportStar:g6,__extends:a6,__generator:d6,__importDefault:D6,__importStar:E6,__makeTemplateObject:w6,__metadata:l6,__param:h6,__read:gp,__rest:c6,__spread:y6,__spreadArrays:v6,__values:gu},Symbol.toStringTag,{value:"Module"})),ta=_s(x6);var ns={},Lc={},ss={};let an=class{};const O6=Object.freeze(Object.defineProperty({__proto__:null,IEvents:an},Symbol.toStringTag,{value:"Module"})),P6=_s(O6);var Ff;function A6(){if(Ff)return ss;Ff=1,Object.defineProperty(ss,"__esModule",{value:!0}),ss.IHeartBeat=void 0;const i=P6;class e extends i.IEvents{constructor(s){super()}}return ss.IHeartBeat=e,ss}var Uf;function yp(){return Uf||(Uf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),ta.__exportStar(A6(),i)}(Lc)),Lc}var Bc={},Qi={},jf;function C6(){if(jf)return Qi;jf=1,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.HEARTBEAT_EVENTS=Qi.HEARTBEAT_INTERVAL=void 0;const i=ve;return Qi.HEARTBEAT_INTERVAL=i.FIVE_SECONDS,Qi.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},Qi}var Mf;function vp(){return Mf||(Mf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),ta.__exportStar(C6(),i)}(Bc)),Bc}var Lf;function T6(){if(Lf)return ns;Lf=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.HeartBeat=void 0;const i=ta,e=Lr,t=ve,s=yp(),o=vp();class c extends s.IHeartBeat{constructor(f){super(f),this.events=new e.EventEmitter,this.interval=o.HEARTBEAT_INTERVAL,this.interval=(f==null?void 0:f.interval)||o.HEARTBEAT_INTERVAL}static init(f){return i.__awaiter(this,void 0,void 0,function*(){const y=new c(f);return yield y.init(),y})}init(){return i.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(f,y){this.events.on(f,y)}once(f,y){this.events.once(f,y)}off(f,y){this.events.off(f,y)}removeListener(f,y){this.events.removeListener(f,y)}initialize(){return i.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),t.toMiliseconds(this.interval))})}pulse(){this.events.emit(o.HEARTBEAT_EVENTS.pulse)}}return ns.HeartBeat=c,ns}(function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=ta;e.__exportStar(T6(),i),e.__exportStar(yp(),i),e.__exportStar(vp(),i)})(Un);var Qe={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var yu=function(i,e){return yu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},yu(i,e)};function N6(i,e){yu(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var vu=function(){return vu=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},vu.apply(this,arguments)};function R6(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(t[s[o]]=i[s[o]]);return t}function $6(i,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(i,e,t,s);else for(var f=i.length-1;f>=0;f--)(l=i[f])&&(c=(o<3?l(c):o>3?l(e,t,c):l(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function F6(i,e){return function(t,s){e(t,s,i)}}function U6(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)}function j6(i,e,t,s){function o(c){return c instanceof t?c:new t(function(l){l(c)})}return new(t||(t=Promise))(function(c,l){function f(v){try{p(s.next(v))}catch(S){l(S)}}function y(v){try{p(s.throw(v))}catch(S){l(S)}}function p(v){v.done?c(v.value):o(v.value).then(f,y)}p((s=s.apply(i,e||[])).next())})}function M6(i,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(p){return function(v){return y([p,v])}}function y(p){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=p[0]&2?o.return:p[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,p[1])).done)return c;switch(o=0,c&&(p=[p[0]&2,c.value]),p[0]){case 0:case 1:c=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!c||p[1]>c[0]&&p[1]<c[3])){t.label=p[1];break}if(p[0]===6&&t.label<c[1]){t.label=c[1],c=p;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(p);break}c[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(i,t)}catch(v){p=[6,v],o=0}finally{s=c=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function L6(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}function B6(i,e){for(var t in i)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=i[t])}function _u(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],s=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _p(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var s=t.call(i),o,c=[],l;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(f){l={error:f}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(l)throw l.error}}return c}function z6(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(_p(arguments[e]));return i}function q6(){for(var i=0,e=0,t=arguments.length;e<t;e++)i+=arguments[e].length;for(var s=Array(i),o=0,e=0;e<t;e++)for(var c=arguments[e],l=0,f=c.length;l<f;l++,o++)s[o]=c[l];return s}function ys(i){return this instanceof ys?(this.v=i,this):new ys(i)}function H6(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(i,e||[]),o,c=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(D){s[D]&&(o[D]=function(x){return new Promise(function(O,z){c.push([D,x,O,z])>1||f(D,x)})})}function f(D,x){try{y(s[D](x))}catch(O){S(c[0][3],O)}}function y(D){D.value instanceof ys?Promise.resolve(D.value.v).then(p,v):S(c[0][2],D)}function p(D){f("next",D)}function v(D){f("throw",D)}function S(D,x){D(x),c.shift(),c.length&&f(c[0][0],c[0][1])}}function K6(i){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=i[o]?function(l){return(t=!t)?{value:ys(i[o](l)),done:o==="return"}:c?c(l):l}:c}}function V6(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof _u=="function"?_u(i):i[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=i[c]&&function(l){return new Promise(function(f,y){l=i[c](l),o(f,y,l.done,l.value)})}}function o(c,l,f,y){Promise.resolve(y).then(function(p){c({value:p,done:f})},l)}}function k6(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i}function G6(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)Object.hasOwnProperty.call(i,t)&&(e[t]=i[t]);return e.default=i,e}function W6(i){return i&&i.__esModule?i:{default:i}}function Y6(i,e){if(!e.has(i))throw new TypeError("attempted to get private field on non-instance");return e.get(i)}function J6(i,e,t){if(!e.has(i))throw new TypeError("attempted to set private field on non-instance");return e.set(i,t),t}const X6=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return vu},__asyncDelegator:K6,__asyncGenerator:H6,__asyncValues:V6,__await:ys,__awaiter:j6,__classPrivateFieldGet:Y6,__classPrivateFieldSet:J6,__createBinding:L6,__decorate:$6,__exportStar:B6,__extends:N6,__generator:M6,__importDefault:W6,__importStar:G6,__makeTemplateObject:k6,__metadata:U6,__param:F6,__read:_p,__rest:R6,__spread:z6,__spreadArrays:q6,__values:_u},Symbol.toStringTag,{value:"Module"})),Z6=_s(X6);var zc,Bf;function Q6(){if(Bf)return zc;Bf=1;function i(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}zc=e;function e(t,s,o){var c=o&&o.stringify||i,l=1;if(typeof t=="object"&&t!==null){var f=s.length+l;if(f===1)return t;var y=new Array(f);y[0]=c(t);for(var p=1;p<f;p++)y[p]=c(s[p]);return y.join(" ")}if(typeof t!="string")return t;var v=s.length;if(v===0)return t;for(var S="",D=1-l,x=-1,O=t&&t.length||0,z=0;z<O;){if(t.charCodeAt(z)===37&&z+1<O){switch(x=x>-1?x:0,t.charCodeAt(z+1)){case 100:case 102:if(D>=v||s[D]==null)break;x<z&&(S+=t.slice(x,z)),S+=Number(s[D]),x=z+2,z++;break;case 105:if(D>=v||s[D]==null)break;x<z&&(S+=t.slice(x,z)),S+=Math.floor(Number(s[D])),x=z+2,z++;break;case 79:case 111:case 106:if(D>=v||s[D]===void 0)break;x<z&&(S+=t.slice(x,z));var H=typeof s[D];if(H==="string"){S+="'"+s[D]+"'",x=z+2,z++;break}if(H==="function"){S+=s[D].name||"<anonymous>",x=z+2,z++;break}S+=c(s[D]),x=z+2,z++;break;case 115:if(D>=v)break;x<z&&(S+=t.slice(x,z)),S+=String(s[D]),x=z+2,z++;break;case 37:x<z&&(S+=t.slice(x,z)),S+="%",x=z+2,z++,D--;break}++D}++z}return x===-1?t:(x<O&&(S+=t.slice(x)),S)}return zc}var qc,zf;function eD(){if(zf)return qc;zf=1;const i=Q6();qc=o;const e=N().console||{},t={mapHttpRequest:O,mapHttpResponse:O,wrapRequestSerializer:z,wrapResponseSerializer:z,wrapErrorSerializer:z,req:O,res:O,err:D};function s(E,u){return Array.isArray(E)?E.filter(function(G){return G!=="!stdSerializers.err"}):E===!0?Object.keys(u):!1}function o(E){E=E||{},E.browser=E.browser||{};const u=E.browser.transmit;if(u&&typeof u.send!="function")throw Error("pino: transmit option must have a send function");const b=E.browser.write||e;E.browser.write&&(E.browser.asObject=!0);const G=E.serializers||{},W=s(E.browser.serialize,G);let se=E.browser.serialize;Array.isArray(E.browser.serialize)&&E.browser.serialize.indexOf("!stdSerializers.err")>-1&&(se=!1);const ce=["error","fatal","warn","info","debug","trace"];typeof b=="function"&&(b.error=b.fatal=b.warn=b.info=b.debug=b.trace=b),E.enabled===!1&&(E.level="silent");const de=E.level||"info",w=Object.create(b);w.log||(w.log=H),Object.defineProperty(w,"levelVal",{get:ee}),Object.defineProperty(w,"level",{get:X,set:V});const C={transmit:u,serialize:W,asObject:E.browser.asObject,levels:ce,timestamp:x(E)};w.levels=o.levels,w.level=de,w.setMaxListeners=w.getMaxListeners=w.emit=w.addListener=w.on=w.prependListener=w.once=w.prependOnceListener=w.removeListener=w.removeAllListeners=w.listeners=w.listenerCount=w.eventNames=w.write=w.flush=H,w.serializers=G,w._serialize=W,w._stdErrSerialize=se,w.child=k,u&&(w._logEvent=S());function ee(){return this.level==="silent"?1/0:this.levels.values[this.level]}function X(){return this._level}function V(J){if(J!=="silent"&&!this.levels.values[J])throw Error("unknown level "+J);this._level=J,c(C,w,"error","log"),c(C,w,"fatal","error"),c(C,w,"warn","error"),c(C,w,"info","log"),c(C,w,"debug","log"),c(C,w,"trace","log")}function k(J,re){if(!J)throw new Error("missing bindings for child Pino");re=re||{},W&&J.serializers&&(re.serializers=J.serializers);const be=re.serializers;if(W&&be){var oe=Object.assign({},G,be),we=E.browser.serialize===!0?Object.keys(oe):W;delete J.serializers,y([J],we,oe,this._stdErrSerialize)}function le(_e){this._childLevel=(_e._childLevel|0)+1,this.error=p(_e,J,"error"),this.fatal=p(_e,J,"fatal"),this.warn=p(_e,J,"warn"),this.info=p(_e,J,"info"),this.debug=p(_e,J,"debug"),this.trace=p(_e,J,"trace"),oe&&(this.serializers=oe,this._serialize=we),u&&(this._logEvent=S([].concat(_e._logEvent.bindings,J)))}return le.prototype=this,new le(this)}return w}o.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},o.stdSerializers=t,o.stdTimeFunctions=Object.assign({},{nullTime:ne,epochTime:$,unixTime:U,isoTime:P});function c(E,u,b,G){const W=Object.getPrototypeOf(u);u[b]=u.levelVal>u.levels.values[b]?H:W[b]?W[b]:e[b]||e[G]||H,l(E,u,b)}function l(E,u,b){!E.transmit&&u[b]===H||(u[b]=function(G){return function(){const se=E.timestamp(),ce=new Array(arguments.length),de=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var w=0;w<ce.length;w++)ce[w]=arguments[w];if(E.serialize&&!E.asObject&&y(ce,this._serialize,this.serializers,this._stdErrSerialize),E.asObject?G.call(de,f(this,b,ce,se)):G.apply(de,ce),E.transmit){const C=E.transmit.level||u.level,ee=o.levels.values[C],X=o.levels.values[b];if(X<ee)return;v(this,{ts:se,methodLevel:b,methodValue:X,transmitLevel:C,transmitValue:o.levels.values[E.transmit.level||u.level],send:E.transmit.send,val:u.levelVal},ce)}}}(u[b]))}function f(E,u,b,G){E._serialize&&y(b,E._serialize,E.serializers,E._stdErrSerialize);const W=b.slice();let se=W[0];const ce={};G&&(ce.time=G),ce.level=o.levels.values[u];let de=(E._childLevel|0)+1;if(de<1&&(de=1),se!==null&&typeof se=="object"){for(;de--&&typeof W[0]=="object";)Object.assign(ce,W.shift());se=W.length?i(W.shift(),W):void 0}else typeof se=="string"&&(se=i(W.shift(),W));return se!==void 0&&(ce.msg=se),ce}function y(E,u,b,G){for(const W in E)if(G&&E[W]instanceof Error)E[W]=o.stdSerializers.err(E[W]);else if(typeof E[W]=="object"&&!Array.isArray(E[W]))for(const se in E[W])u&&u.indexOf(se)>-1&&se in b&&(E[W][se]=b[se](E[W][se]))}function p(E,u,b){return function(){const G=new Array(1+arguments.length);G[0]=u;for(var W=1;W<G.length;W++)G[W]=arguments[W-1];return E[b].apply(this,G)}}function v(E,u,b){const G=u.send,W=u.ts,se=u.methodLevel,ce=u.methodValue,de=u.val,w=E._logEvent.bindings;y(b,E._serialize||Object.keys(E.serializers),E.serializers,E._stdErrSerialize===void 0?!0:E._stdErrSerialize),E._logEvent.ts=W,E._logEvent.messages=b.filter(function(C){return w.indexOf(C)===-1}),E._logEvent.level.label=se,E._logEvent.level.value=ce,G(se,E._logEvent,de),E._logEvent=S(w)}function S(E){return{ts:0,messages:[],bindings:E||[],level:{label:"",value:0}}}function D(E){const u={type:E.constructor.name,msg:E.message,stack:E.stack};for(const b in E)u[b]===void 0&&(u[b]=E[b]);return u}function x(E){return typeof E.timestamp=="function"?E.timestamp:E.timestamp===!1?ne:$}function O(){return{}}function z(E){return E}function H(){}function ne(){return!1}function $(){return Date.now()}function U(){return Math.round(Date.now()/1e3)}function P(){return new Date(Date.now()).toISOString()}function N(){function E(u){return typeof u<"u"&&u}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return E(self)||E(window)||E(this)||{}}}return qc}var en={},qf;function mp(){return qf||(qf=1,Object.defineProperty(en,"__esModule",{value:!0}),en.PINO_CUSTOM_CONTEXT_KEY=en.PINO_LOGGER_DEFAULTS=void 0,en.PINO_LOGGER_DEFAULTS={level:"info"},en.PINO_CUSTOM_CONTEXT_KEY="custom_context"),en}var ar={},Hf;function tD(){if(Hf)return ar;Hf=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.generateChildLogger=ar.formatChildLoggerContext=ar.getLoggerContext=ar.setBrowserLoggerContext=ar.getBrowserLoggerContext=ar.getDefaultLoggerOptions=void 0;const i=mp();function e(f){return Object.assign(Object.assign({},f),{level:(f==null?void 0:f.level)||i.PINO_LOGGER_DEFAULTS.level})}ar.getDefaultLoggerOptions=e;function t(f,y=i.PINO_CUSTOM_CONTEXT_KEY){return f[y]||""}ar.getBrowserLoggerContext=t;function s(f,y,p=i.PINO_CUSTOM_CONTEXT_KEY){return f[p]=y,f}ar.setBrowserLoggerContext=s;function o(f,y=i.PINO_CUSTOM_CONTEXT_KEY){let p="";return typeof f.bindings>"u"?p=t(f,y):p=f.bindings().context||"",p}ar.getLoggerContext=o;function c(f,y,p=i.PINO_CUSTOM_CONTEXT_KEY){const v=o(f,p);return v.trim()?`${v}/${y}`:y}ar.formatChildLoggerContext=c;function l(f,y,p=i.PINO_CUSTOM_CONTEXT_KEY){const v=c(f,y,p),S=f.child({context:v});return s(S,v,p)}return ar.generateChildLogger=l,ar}(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.pino=void 0;const e=Z6,t=e.__importDefault(eD());Object.defineProperty(i,"pino",{enumerable:!0,get:function(){return t.default}}),e.__exportStar(mp(),i),e.__exportStar(tD(),i)})(Qe);class rD extends an{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class iD extends an{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}}class nD{constructor(e,t){this.logger=e,this.core=t}}let sD=class extends an{constructor(e,t){super(),this.relayer=e,this.logger=t}},oD=class extends an{constructor(e){super()}},aD=class{constructor(e,t,s,o){this.core=e,this.logger=t,this.name=s}};class cD extends an{constructor(e,t){super(),this.relayer=e,this.logger=t}}let uD=class extends an{constructor(e,t){super(),this.core=e,this.logger=t}},hD=class{constructor(e,t){this.projectId=e,this.logger=t}},lD=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},fD=class{constructor(e){this.client=e}};var Hu={},bp={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=Ue,t=xr;i.DIGEST_LENGTH=64,i.BLOCK_SIZE=128;var s=function(){function f(){this.digestLength=i.DIGEST_LENGTH,this.blockSize=i.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return f.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},f.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},f.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._tempHi),t.wipe(this._tempLo),this.reset()},f.prototype.update=function(y,p){if(p===void 0&&(p=y.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var v=0;if(this._bytesHashed+=p,this._bufferLength>0){for(;this._bufferLength<i.BLOCK_SIZE&&p>0;)this._buffer[this._bufferLength++]=y[v++],p--;this._bufferLength===this.blockSize&&(c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(p>=this.blockSize&&(v=c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,y,v,p),p%=this.blockSize);p>0;)this._buffer[this._bufferLength++]=y[v++],p--;return this},f.prototype.finish=function(y){if(!this._finished){var p=this._bytesHashed,v=this._bufferLength,S=p/536870912|0,D=p<<3,x=p%128<112?128:256;this._buffer[v]=128;for(var O=v+1;O<x-8;O++)this._buffer[O]=0;e.writeUint32BE(S,this._buffer,x-8),e.writeUint32BE(D,this._buffer,x-4),c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,x),this._finished=!0}for(var O=0;O<this.digestLength/8;O++)e.writeUint32BE(this._stateHi[O],y,O*8),e.writeUint32BE(this._stateLo[O],y,O*8+4);return this},f.prototype.digest=function(){var y=new Uint8Array(this.digestLength);return this.finish(y),y},f.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},f.prototype.restoreState=function(y){return this._stateHi.set(y.stateHi),this._stateLo.set(y.stateLo),this._bufferLength=y.bufferLength,y.buffer&&this._buffer.set(y.buffer),this._bytesHashed=y.bytesHashed,this._finished=!1,this},f.prototype.cleanSavedState=function(y){t.wipe(y.stateHi),t.wipe(y.stateLo),y.buffer&&t.wipe(y.buffer),y.bufferLength=0,y.bytesHashed=0},f}();i.SHA512=s;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function c(f,y,p,v,S,D,x){for(var O=p[0],z=p[1],H=p[2],ne=p[3],$=p[4],U=p[5],P=p[6],N=p[7],E=v[0],u=v[1],b=v[2],G=v[3],W=v[4],se=v[5],ce=v[6],de=v[7],w,C,ee,X,V,k,J,re;x>=128;){for(var be=0;be<16;be++){var oe=8*be+D;f[be]=e.readUint32BE(S,oe),y[be]=e.readUint32BE(S,oe+4)}for(var be=0;be<80;be++){var we=O,le=z,_e=H,q=ne,B=$,F=U,d=P,T=N,ae=E,fe=u,Ie=b,qe=G,Ve=W,je=se,pt=ce,gt=de;if(w=N,C=de,V=C&65535,k=C>>>16,J=w&65535,re=w>>>16,w=($>>>14|W<<32-14)^($>>>18|W<<32-18)^(W>>>41-32|$<<32-(41-32)),C=(W>>>14|$<<32-14)^(W>>>18|$<<32-18)^($>>>41-32|W<<32-(41-32)),V+=C&65535,k+=C>>>16,J+=w&65535,re+=w>>>16,w=$&U^~$&P,C=W&se^~W&ce,V+=C&65535,k+=C>>>16,J+=w&65535,re+=w>>>16,w=o[be*2],C=o[be*2+1],V+=C&65535,k+=C>>>16,J+=w&65535,re+=w>>>16,w=f[be%16],C=y[be%16],V+=C&65535,k+=C>>>16,J+=w&65535,re+=w>>>16,k+=V>>>16,J+=k>>>16,re+=J>>>16,ee=J&65535|re<<16,X=V&65535|k<<16,w=ee,C=X,V=C&65535,k=C>>>16,J=w&65535,re=w>>>16,w=(O>>>28|E<<32-28)^(E>>>34-32|O<<32-(34-32))^(E>>>39-32|O<<32-(39-32)),C=(E>>>28|O<<32-28)^(O>>>34-32|E<<32-(34-32))^(O>>>39-32|E<<32-(39-32)),V+=C&65535,k+=C>>>16,J+=w&65535,re+=w>>>16,w=O&z^O&H^z&H,C=E&u^E&b^u&b,V+=C&65535,k+=C>>>16,J+=w&65535,re+=w>>>16,k+=V>>>16,J+=k>>>16,re+=J>>>16,T=J&65535|re<<16,gt=V&65535|k<<16,w=q,C=qe,V=C&65535,k=C>>>16,J=w&65535,re=w>>>16,w=ee,C=X,V+=C&65535,k+=C>>>16,J+=w&65535,re+=w>>>16,k+=V>>>16,J+=k>>>16,re+=J>>>16,q=J&65535|re<<16,qe=V&65535|k<<16,z=we,H=le,ne=_e,$=q,U=B,P=F,N=d,O=T,u=ae,b=fe,G=Ie,W=qe,se=Ve,ce=je,de=pt,E=gt,be%16===15)for(var oe=0;oe<16;oe++)w=f[oe],C=y[oe],V=C&65535,k=C>>>16,J=w&65535,re=w>>>16,w=f[(oe+9)%16],C=y[(oe+9)%16],V+=C&65535,k+=C>>>16,J+=w&65535,re+=w>>>16,ee=f[(oe+1)%16],X=y[(oe+1)%16],w=(ee>>>1|X<<32-1)^(ee>>>8|X<<32-8)^ee>>>7,C=(X>>>1|ee<<32-1)^(X>>>8|ee<<32-8)^(X>>>7|ee<<32-7),V+=C&65535,k+=C>>>16,J+=w&65535,re+=w>>>16,ee=f[(oe+14)%16],X=y[(oe+14)%16],w=(ee>>>19|X<<32-19)^(X>>>61-32|ee<<32-(61-32))^ee>>>6,C=(X>>>19|ee<<32-19)^(ee>>>61-32|X<<32-(61-32))^(X>>>6|ee<<32-6),V+=C&65535,k+=C>>>16,J+=w&65535,re+=w>>>16,k+=V>>>16,J+=k>>>16,re+=J>>>16,f[oe]=J&65535|re<<16,y[oe]=V&65535|k<<16}w=O,C=E,V=C&65535,k=C>>>16,J=w&65535,re=w>>>16,w=p[0],C=v[0],V+=C&65535,k+=C>>>16,J+=w&65535,re+=w>>>16,k+=V>>>16,J+=k>>>16,re+=J>>>16,p[0]=O=J&65535|re<<16,v[0]=E=V&65535|k<<16,w=z,C=u,V=C&65535,k=C>>>16,J=w&65535,re=w>>>16,w=p[1],C=v[1],V+=C&65535,k+=C>>>16,J+=w&65535,re+=w>>>16,k+=V>>>16,J+=k>>>16,re+=J>>>16,p[1]=z=J&65535|re<<16,v[1]=u=V&65535|k<<16,w=H,C=b,V=C&65535,k=C>>>16,J=w&65535,re=w>>>16,w=p[2],C=v[2],V+=C&65535,k+=C>>>16,J+=w&65535,re+=w>>>16,k+=V>>>16,J+=k>>>16,re+=J>>>16,p[2]=H=J&65535|re<<16,v[2]=b=V&65535|k<<16,w=ne,C=G,V=C&65535,k=C>>>16,J=w&65535,re=w>>>16,w=p[3],C=v[3],V+=C&65535,k+=C>>>16,J+=w&65535,re+=w>>>16,k+=V>>>16,J+=k>>>16,re+=J>>>16,p[3]=ne=J&65535|re<<16,v[3]=G=V&65535|k<<16,w=$,C=W,V=C&65535,k=C>>>16,J=w&65535,re=w>>>16,w=p[4],C=v[4],V+=C&65535,k+=C>>>16,J+=w&65535,re+=w>>>16,k+=V>>>16,J+=k>>>16,re+=J>>>16,p[4]=$=J&65535|re<<16,v[4]=W=V&65535|k<<16,w=U,C=se,V=C&65535,k=C>>>16,J=w&65535,re=w>>>16,w=p[5],C=v[5],V+=C&65535,k+=C>>>16,J+=w&65535,re+=w>>>16,k+=V>>>16,J+=k>>>16,re+=J>>>16,p[5]=U=J&65535|re<<16,v[5]=se=V&65535|k<<16,w=P,C=ce,V=C&65535,k=C>>>16,J=w&65535,re=w>>>16,w=p[6],C=v[6],V+=C&65535,k+=C>>>16,J+=w&65535,re+=w>>>16,k+=V>>>16,J+=k>>>16,re+=J>>>16,p[6]=P=J&65535|re<<16,v[6]=ce=V&65535|k<<16,w=N,C=de,V=C&65535,k=C>>>16,J=w&65535,re=w>>>16,w=p[7],C=v[7],V+=C&65535,k+=C>>>16,J+=w&65535,re+=w>>>16,k+=V>>>16,J+=k>>>16,re+=J>>>16,p[7]=N=J&65535|re<<16,v[7]=de=V&65535|k<<16,D+=128,x-=128}return D}function l(f){var y=new s;y.update(f);var p=y.digest();return y.clean(),p}i.hash=l})(bp);(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.convertSecretKeyToX25519=i.convertPublicKeyToX25519=i.verify=i.sign=i.extractPublicKeyFromSecretKey=i.generateKeyPair=i.generateKeyPairFromSeed=i.SEED_LENGTH=i.SECRET_KEY_LENGTH=i.PUBLIC_KEY_LENGTH=i.SIGNATURE_LENGTH=void 0;const e=Rn,t=bp,s=xr;i.SIGNATURE_LENGTH=64,i.PUBLIC_KEY_LENGTH=32,i.SECRET_KEY_LENGTH=64,i.SEED_LENGTH=32;function o(q){const B=new Float64Array(16);if(q)for(let F=0;F<q.length;F++)B[F]=q[F];return B}const c=new Uint8Array(32);c[0]=9;const l=o(),f=o([1]),y=o([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),p=o([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),v=o([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),S=o([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),D=o([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function x(q,B){for(let F=0;F<16;F++)q[F]=B[F]|0}function O(q){let B=1;for(let F=0;F<16;F++){let d=q[F]+B+65535;B=Math.floor(d/65536),q[F]=d-B*65536}q[0]+=B-1+37*(B-1)}function z(q,B,F){const d=~(F-1);for(let T=0;T<16;T++){const ae=d&(q[T]^B[T]);q[T]^=ae,B[T]^=ae}}function H(q,B){const F=o(),d=o();for(let T=0;T<16;T++)d[T]=B[T];O(d),O(d),O(d);for(let T=0;T<2;T++){F[0]=d[0]-65517;for(let fe=1;fe<15;fe++)F[fe]=d[fe]-65535-(F[fe-1]>>16&1),F[fe-1]&=65535;F[15]=d[15]-32767-(F[14]>>16&1);const ae=F[15]>>16&1;F[14]&=65535,z(d,F,1-ae)}for(let T=0;T<16;T++)q[2*T]=d[T]&255,q[2*T+1]=d[T]>>8}function ne(q,B){let F=0;for(let d=0;d<32;d++)F|=q[d]^B[d];return(1&F-1>>>8)-1}function $(q,B){const F=new Uint8Array(32),d=new Uint8Array(32);return H(F,q),H(d,B),ne(F,d)}function U(q){const B=new Uint8Array(32);return H(B,q),B[0]&1}function P(q,B){for(let F=0;F<16;F++)q[F]=B[2*F]+(B[2*F+1]<<8);q[15]&=32767}function N(q,B,F){for(let d=0;d<16;d++)q[d]=B[d]+F[d]}function E(q,B,F){for(let d=0;d<16;d++)q[d]=B[d]-F[d]}function u(q,B,F){let d,T,ae=0,fe=0,Ie=0,qe=0,Ve=0,je=0,pt=0,gt=0,Le=0,xe=0,Re=0,$e=0,Be=0,Pe=0,Fe=0,Se=0,Ae=0,He=0,Oe=0,ke=0,We=0,et=0,tt=0,Je=0,tr=0,lr=0,Yr=0,rr=0,si=0,bi=0,ji=0,wt=F[0],yt=F[1],Et=F[2],Dt=F[3],mt=F[4],vt=F[5],Ft=F[6],Ut=F[7],St=F[8],jt=F[9],It=F[10],At=F[11],xt=F[12],ht=F[13],Mt=F[14],Lt=F[15];d=B[0],ae+=d*wt,fe+=d*yt,Ie+=d*Et,qe+=d*Dt,Ve+=d*mt,je+=d*vt,pt+=d*Ft,gt+=d*Ut,Le+=d*St,xe+=d*jt,Re+=d*It,$e+=d*At,Be+=d*xt,Pe+=d*ht,Fe+=d*Mt,Se+=d*Lt,d=B[1],fe+=d*wt,Ie+=d*yt,qe+=d*Et,Ve+=d*Dt,je+=d*mt,pt+=d*vt,gt+=d*Ft,Le+=d*Ut,xe+=d*St,Re+=d*jt,$e+=d*It,Be+=d*At,Pe+=d*xt,Fe+=d*ht,Se+=d*Mt,Ae+=d*Lt,d=B[2],Ie+=d*wt,qe+=d*yt,Ve+=d*Et,je+=d*Dt,pt+=d*mt,gt+=d*vt,Le+=d*Ft,xe+=d*Ut,Re+=d*St,$e+=d*jt,Be+=d*It,Pe+=d*At,Fe+=d*xt,Se+=d*ht,Ae+=d*Mt,He+=d*Lt,d=B[3],qe+=d*wt,Ve+=d*yt,je+=d*Et,pt+=d*Dt,gt+=d*mt,Le+=d*vt,xe+=d*Ft,Re+=d*Ut,$e+=d*St,Be+=d*jt,Pe+=d*It,Fe+=d*At,Se+=d*xt,Ae+=d*ht,He+=d*Mt,Oe+=d*Lt,d=B[4],Ve+=d*wt,je+=d*yt,pt+=d*Et,gt+=d*Dt,Le+=d*mt,xe+=d*vt,Re+=d*Ft,$e+=d*Ut,Be+=d*St,Pe+=d*jt,Fe+=d*It,Se+=d*At,Ae+=d*xt,He+=d*ht,Oe+=d*Mt,ke+=d*Lt,d=B[5],je+=d*wt,pt+=d*yt,gt+=d*Et,Le+=d*Dt,xe+=d*mt,Re+=d*vt,$e+=d*Ft,Be+=d*Ut,Pe+=d*St,Fe+=d*jt,Se+=d*It,Ae+=d*At,He+=d*xt,Oe+=d*ht,ke+=d*Mt,We+=d*Lt,d=B[6],pt+=d*wt,gt+=d*yt,Le+=d*Et,xe+=d*Dt,Re+=d*mt,$e+=d*vt,Be+=d*Ft,Pe+=d*Ut,Fe+=d*St,Se+=d*jt,Ae+=d*It,He+=d*At,Oe+=d*xt,ke+=d*ht,We+=d*Mt,et+=d*Lt,d=B[7],gt+=d*wt,Le+=d*yt,xe+=d*Et,Re+=d*Dt,$e+=d*mt,Be+=d*vt,Pe+=d*Ft,Fe+=d*Ut,Se+=d*St,Ae+=d*jt,He+=d*It,Oe+=d*At,ke+=d*xt,We+=d*ht,et+=d*Mt,tt+=d*Lt,d=B[8],Le+=d*wt,xe+=d*yt,Re+=d*Et,$e+=d*Dt,Be+=d*mt,Pe+=d*vt,Fe+=d*Ft,Se+=d*Ut,Ae+=d*St,He+=d*jt,Oe+=d*It,ke+=d*At,We+=d*xt,et+=d*ht,tt+=d*Mt,Je+=d*Lt,d=B[9],xe+=d*wt,Re+=d*yt,$e+=d*Et,Be+=d*Dt,Pe+=d*mt,Fe+=d*vt,Se+=d*Ft,Ae+=d*Ut,He+=d*St,Oe+=d*jt,ke+=d*It,We+=d*At,et+=d*xt,tt+=d*ht,Je+=d*Mt,tr+=d*Lt,d=B[10],Re+=d*wt,$e+=d*yt,Be+=d*Et,Pe+=d*Dt,Fe+=d*mt,Se+=d*vt,Ae+=d*Ft,He+=d*Ut,Oe+=d*St,ke+=d*jt,We+=d*It,et+=d*At,tt+=d*xt,Je+=d*ht,tr+=d*Mt,lr+=d*Lt,d=B[11],$e+=d*wt,Be+=d*yt,Pe+=d*Et,Fe+=d*Dt,Se+=d*mt,Ae+=d*vt,He+=d*Ft,Oe+=d*Ut,ke+=d*St,We+=d*jt,et+=d*It,tt+=d*At,Je+=d*xt,tr+=d*ht,lr+=d*Mt,Yr+=d*Lt,d=B[12],Be+=d*wt,Pe+=d*yt,Fe+=d*Et,Se+=d*Dt,Ae+=d*mt,He+=d*vt,Oe+=d*Ft,ke+=d*Ut,We+=d*St,et+=d*jt,tt+=d*It,Je+=d*At,tr+=d*xt,lr+=d*ht,Yr+=d*Mt,rr+=d*Lt,d=B[13],Pe+=d*wt,Fe+=d*yt,Se+=d*Et,Ae+=d*Dt,He+=d*mt,Oe+=d*vt,ke+=d*Ft,We+=d*Ut,et+=d*St,tt+=d*jt,Je+=d*It,tr+=d*At,lr+=d*xt,Yr+=d*ht,rr+=d*Mt,si+=d*Lt,d=B[14],Fe+=d*wt,Se+=d*yt,Ae+=d*Et,He+=d*Dt,Oe+=d*mt,ke+=d*vt,We+=d*Ft,et+=d*Ut,tt+=d*St,Je+=d*jt,tr+=d*It,lr+=d*At,Yr+=d*xt,rr+=d*ht,si+=d*Mt,bi+=d*Lt,d=B[15],Se+=d*wt,Ae+=d*yt,He+=d*Et,Oe+=d*Dt,ke+=d*mt,We+=d*vt,et+=d*Ft,tt+=d*Ut,Je+=d*St,tr+=d*jt,lr+=d*It,Yr+=d*At,rr+=d*xt,si+=d*ht,bi+=d*Mt,ji+=d*Lt,ae+=38*Ae,fe+=38*He,Ie+=38*Oe,qe+=38*ke,Ve+=38*We,je+=38*et,pt+=38*tt,gt+=38*Je,Le+=38*tr,xe+=38*lr,Re+=38*Yr,$e+=38*rr,Be+=38*si,Pe+=38*bi,Fe+=38*ji,T=1,d=ae+T+65535,T=Math.floor(d/65536),ae=d-T*65536,d=fe+T+65535,T=Math.floor(d/65536),fe=d-T*65536,d=Ie+T+65535,T=Math.floor(d/65536),Ie=d-T*65536,d=qe+T+65535,T=Math.floor(d/65536),qe=d-T*65536,d=Ve+T+65535,T=Math.floor(d/65536),Ve=d-T*65536,d=je+T+65535,T=Math.floor(d/65536),je=d-T*65536,d=pt+T+65535,T=Math.floor(d/65536),pt=d-T*65536,d=gt+T+65535,T=Math.floor(d/65536),gt=d-T*65536,d=Le+T+65535,T=Math.floor(d/65536),Le=d-T*65536,d=xe+T+65535,T=Math.floor(d/65536),xe=d-T*65536,d=Re+T+65535,T=Math.floor(d/65536),Re=d-T*65536,d=$e+T+65535,T=Math.floor(d/65536),$e=d-T*65536,d=Be+T+65535,T=Math.floor(d/65536),Be=d-T*65536,d=Pe+T+65535,T=Math.floor(d/65536),Pe=d-T*65536,d=Fe+T+65535,T=Math.floor(d/65536),Fe=d-T*65536,d=Se+T+65535,T=Math.floor(d/65536),Se=d-T*65536,ae+=T-1+37*(T-1),T=1,d=ae+T+65535,T=Math.floor(d/65536),ae=d-T*65536,d=fe+T+65535,T=Math.floor(d/65536),fe=d-T*65536,d=Ie+T+65535,T=Math.floor(d/65536),Ie=d-T*65536,d=qe+T+65535,T=Math.floor(d/65536),qe=d-T*65536,d=Ve+T+65535,T=Math.floor(d/65536),Ve=d-T*65536,d=je+T+65535,T=Math.floor(d/65536),je=d-T*65536,d=pt+T+65535,T=Math.floor(d/65536),pt=d-T*65536,d=gt+T+65535,T=Math.floor(d/65536),gt=d-T*65536,d=Le+T+65535,T=Math.floor(d/65536),Le=d-T*65536,d=xe+T+65535,T=Math.floor(d/65536),xe=d-T*65536,d=Re+T+65535,T=Math.floor(d/65536),Re=d-T*65536,d=$e+T+65535,T=Math.floor(d/65536),$e=d-T*65536,d=Be+T+65535,T=Math.floor(d/65536),Be=d-T*65536,d=Pe+T+65535,T=Math.floor(d/65536),Pe=d-T*65536,d=Fe+T+65535,T=Math.floor(d/65536),Fe=d-T*65536,d=Se+T+65535,T=Math.floor(d/65536),Se=d-T*65536,ae+=T-1+37*(T-1),q[0]=ae,q[1]=fe,q[2]=Ie,q[3]=qe,q[4]=Ve,q[5]=je,q[6]=pt,q[7]=gt,q[8]=Le,q[9]=xe,q[10]=Re,q[11]=$e,q[12]=Be,q[13]=Pe,q[14]=Fe,q[15]=Se}function b(q,B){u(q,B,B)}function G(q,B){const F=o();let d;for(d=0;d<16;d++)F[d]=B[d];for(d=253;d>=0;d--)b(F,F),d!==2&&d!==4&&u(F,F,B);for(d=0;d<16;d++)q[d]=F[d]}function W(q,B){const F=o();let d;for(d=0;d<16;d++)F[d]=B[d];for(d=250;d>=0;d--)b(F,F),d!==1&&u(F,F,B);for(d=0;d<16;d++)q[d]=F[d]}function se(q,B){const F=o(),d=o(),T=o(),ae=o(),fe=o(),Ie=o(),qe=o(),Ve=o(),je=o();E(F,q[1],q[0]),E(je,B[1],B[0]),u(F,F,je),N(d,q[0],q[1]),N(je,B[0],B[1]),u(d,d,je),u(T,q[3],B[3]),u(T,T,p),u(ae,q[2],B[2]),N(ae,ae,ae),E(fe,d,F),E(Ie,ae,T),N(qe,ae,T),N(Ve,d,F),u(q[0],fe,Ie),u(q[1],Ve,qe),u(q[2],qe,Ie),u(q[3],fe,Ve)}function ce(q,B,F){for(let d=0;d<4;d++)z(q[d],B[d],F)}function de(q,B){const F=o(),d=o(),T=o();G(T,B[2]),u(F,B[0],T),u(d,B[1],T),H(q,d),q[31]^=U(F)<<7}function w(q,B,F){x(q[0],l),x(q[1],f),x(q[2],f),x(q[3],l);for(let d=255;d>=0;--d){const T=F[d/8|0]>>(d&7)&1;ce(q,B,T),se(B,q),se(q,q),ce(q,B,T)}}function C(q,B){const F=[o(),o(),o(),o()];x(F[0],v),x(F[1],S),x(F[2],f),u(F[3],v,S),w(q,F,B)}function ee(q){if(q.length!==i.SEED_LENGTH)throw new Error(`ed25519: seed must be ${i.SEED_LENGTH} bytes`);const B=(0,t.hash)(q);B[0]&=248,B[31]&=127,B[31]|=64;const F=new Uint8Array(32),d=[o(),o(),o(),o()];C(d,B),de(F,d);const T=new Uint8Array(64);return T.set(q),T.set(F,32),{publicKey:F,secretKey:T}}i.generateKeyPairFromSeed=ee;function X(q){const B=(0,e.randomBytes)(32,q),F=ee(B);return(0,s.wipe)(B),F}i.generateKeyPair=X;function V(q){if(q.length!==i.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${i.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(q.subarray(32))}i.extractPublicKeyFromSecretKey=V;const k=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function J(q,B){let F,d,T,ae;for(d=63;d>=32;--d){for(F=0,T=d-32,ae=d-12;T<ae;++T)B[T]+=F-16*B[d]*k[T-(d-32)],F=Math.floor((B[T]+128)/256),B[T]-=F*256;B[T]+=F,B[d]=0}for(F=0,T=0;T<32;T++)B[T]+=F-(B[31]>>4)*k[T],F=B[T]>>8,B[T]&=255;for(T=0;T<32;T++)B[T]-=F*k[T];for(d=0;d<32;d++)B[d+1]+=B[d]>>8,q[d]=B[d]&255}function re(q){const B=new Float64Array(64);for(let F=0;F<64;F++)B[F]=q[F];for(let F=0;F<64;F++)q[F]=0;J(q,B)}function be(q,B){const F=new Float64Array(64),d=[o(),o(),o(),o()],T=(0,t.hash)(q.subarray(0,32));T[0]&=248,T[31]&=127,T[31]|=64;const ae=new Uint8Array(64);ae.set(T.subarray(32),32);const fe=new t.SHA512;fe.update(ae.subarray(32)),fe.update(B);const Ie=fe.digest();fe.clean(),re(Ie),C(d,Ie),de(ae,d),fe.reset(),fe.update(ae.subarray(0,32)),fe.update(q.subarray(32)),fe.update(B);const qe=fe.digest();re(qe);for(let Ve=0;Ve<32;Ve++)F[Ve]=Ie[Ve];for(let Ve=0;Ve<32;Ve++)for(let je=0;je<32;je++)F[Ve+je]+=qe[Ve]*T[je];return J(ae.subarray(32),F),ae}i.sign=be;function oe(q,B){const F=o(),d=o(),T=o(),ae=o(),fe=o(),Ie=o(),qe=o();return x(q[2],f),P(q[1],B),b(T,q[1]),u(ae,T,y),E(T,T,q[2]),N(ae,q[2],ae),b(fe,ae),b(Ie,fe),u(qe,Ie,fe),u(F,qe,T),u(F,F,ae),W(F,F),u(F,F,T),u(F,F,ae),u(F,F,ae),u(q[0],F,ae),b(d,q[0]),u(d,d,ae),$(d,T)&&u(q[0],q[0],D),b(d,q[0]),u(d,d,ae),$(d,T)?-1:(U(q[0])===B[31]>>7&&E(q[0],l,q[0]),u(q[3],q[0],q[1]),0)}function we(q,B,F){const d=new Uint8Array(32),T=[o(),o(),o(),o()],ae=[o(),o(),o(),o()];if(F.length!==i.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${i.SIGNATURE_LENGTH} bytes`);if(oe(ae,q))return!1;const fe=new t.SHA512;fe.update(F.subarray(0,32)),fe.update(q),fe.update(B);const Ie=fe.digest();return re(Ie),w(T,ae,Ie),C(ae,F.subarray(32)),se(T,ae),de(d,T),!ne(F,d)}i.verify=we;function le(q){let B=[o(),o(),o(),o()];if(oe(B,q))throw new Error("Ed25519: invalid public key");let F=o(),d=o(),T=B[1];N(F,f,T),E(d,f,T),G(d,d),u(F,F,d);let ae=new Uint8Array(32);return H(ae,F),ae}i.convertPublicKeyToX25519=le;function _e(q){const B=(0,t.hash)(q.subarray(0,32));B[0]&=248,B[31]&=127,B[31]|=64;const F=new Uint8Array(B.subarray(0,32));return(0,s.wipe)(B),F}i.convertSecretKeyToX25519=_e})(Hu);const dD="EdDSA",pD="JWT",wp=".",Ep="base64url",gD="utf8",yD="utf8",vD=":",_D="did",mD="key",Kf="base58btc",bD="z",wD="K36",ED=32;function Vo(i){return hr(mr(rn(i),gD),Ep)}function Dp(i){const e=mr(wD,Kf),t=bD+hr(iu([e,i]),Kf);return[_D,mD,t].join(vD)}function DD(i){return hr(i,Ep)}function SD(i){return mr([Vo(i.header),Vo(i.payload)].join(wp),yD)}function ID(i){return[Vo(i.header),Vo(i.payload),DD(i.signature)].join(wp)}function Vf(i=Rn.randomBytes(ED)){return Hu.generateKeyPairFromSeed(i)}async function xD(i,e,t,s,o=ve.fromMiliseconds(Date.now())){const c={alg:dD,typ:pD},l=Dp(s.publicKey),f=o+t,y={iss:l,sub:i,aud:e,iat:o,exp:f},p=SD({header:c,payload:y}),v=Hu.sign(s.secretKey,p);return ID({header:c,payload:y,signature:v})}const OD="PARSE_ERROR",PD="INVALID_REQUEST",AD="METHOD_NOT_FOUND",CD="INVALID_PARAMS",Sp="INTERNAL_ERROR",Ku="SERVER_ERROR",TD=[-32700,-32600,-32601,-32602,-32603],fs={[OD]:{code:-32700,message:"Parse error"},[PD]:{code:-32600,message:"Invalid Request"},[AD]:{code:-32601,message:"Method not found"},[CD]:{code:-32602,message:"Invalid params"},[Sp]:{code:-32603,message:"Internal error"},[Ku]:{code:-32e3,message:"Server error"}},Ip=Ku;function ND(i){return TD.includes(i)}function kf(i){return Object.keys(fs).includes(i)?fs[i]:fs[Ip]}function RD(i){const e=Object.values(fs).find(t=>t.code===i);return e||fs[Ip]}function xp(i,e,t){return i.message.includes("getaddrinfo ENOTFOUND")||i.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):i}var Op={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var mu=function(i,e){return mu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},mu(i,e)};function $D(i,e){mu(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var bu=function(){return bu=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},bu.apply(this,arguments)};function FD(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(t[s[o]]=i[s[o]]);return t}function UD(i,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(i,e,t,s);else for(var f=i.length-1;f>=0;f--)(l=i[f])&&(c=(o<3?l(c):o>3?l(e,t,c):l(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function jD(i,e){return function(t,s){e(t,s,i)}}function MD(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)}function LD(i,e,t,s){function o(c){return c instanceof t?c:new t(function(l){l(c)})}return new(t||(t=Promise))(function(c,l){function f(v){try{p(s.next(v))}catch(S){l(S)}}function y(v){try{p(s.throw(v))}catch(S){l(S)}}function p(v){v.done?c(v.value):o(v.value).then(f,y)}p((s=s.apply(i,e||[])).next())})}function BD(i,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(p){return function(v){return y([p,v])}}function y(p){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=p[0]&2?o.return:p[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,p[1])).done)return c;switch(o=0,c&&(p=[p[0]&2,c.value]),p[0]){case 0:case 1:c=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!c||p[1]>c[0]&&p[1]<c[3])){t.label=p[1];break}if(p[0]===6&&t.label<c[1]){t.label=c[1],c=p;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(p);break}c[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(i,t)}catch(v){p=[6,v],o=0}finally{s=c=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function zD(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}function qD(i,e){for(var t in i)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=i[t])}function wu(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],s=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pp(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var s=t.call(i),o,c=[],l;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(f){l={error:f}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(l)throw l.error}}return c}function HD(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(Pp(arguments[e]));return i}function KD(){for(var i=0,e=0,t=arguments.length;e<t;e++)i+=arguments[e].length;for(var s=Array(i),o=0,e=0;e<t;e++)for(var c=arguments[e],l=0,f=c.length;l<f;l++,o++)s[o]=c[l];return s}function vs(i){return this instanceof vs?(this.v=i,this):new vs(i)}function VD(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(i,e||[]),o,c=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(D){s[D]&&(o[D]=function(x){return new Promise(function(O,z){c.push([D,x,O,z])>1||f(D,x)})})}function f(D,x){try{y(s[D](x))}catch(O){S(c[0][3],O)}}function y(D){D.value instanceof vs?Promise.resolve(D.value.v).then(p,v):S(c[0][2],D)}function p(D){f("next",D)}function v(D){f("throw",D)}function S(D,x){D(x),c.shift(),c.length&&f(c[0][0],c[0][1])}}function kD(i){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=i[o]?function(l){return(t=!t)?{value:vs(i[o](l)),done:o==="return"}:c?c(l):l}:c}}function GD(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof wu=="function"?wu(i):i[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=i[c]&&function(l){return new Promise(function(f,y){l=i[c](l),o(f,y,l.done,l.value)})}}function o(c,l,f,y){Promise.resolve(y).then(function(p){c({value:p,done:f})},l)}}function WD(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i}function YD(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)Object.hasOwnProperty.call(i,t)&&(e[t]=i[t]);return e.default=i,e}function JD(i){return i&&i.__esModule?i:{default:i}}function XD(i,e){if(!e.has(i))throw new TypeError("attempted to get private field on non-instance");return e.get(i)}function ZD(i,e,t){if(!e.has(i))throw new TypeError("attempted to set private field on non-instance");return e.set(i,t),t}const QD=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return bu},__asyncDelegator:kD,__asyncGenerator:VD,__asyncValues:GD,__await:vs,__awaiter:LD,__classPrivateFieldGet:XD,__classPrivateFieldSet:ZD,__createBinding:zD,__decorate:UD,__exportStar:qD,__extends:$D,__generator:BD,__importDefault:JD,__importStar:YD,__makeTemplateObject:WD,__metadata:MD,__param:jD,__read:Pp,__rest:FD,__spread:HD,__spreadArrays:KD,__values:wu},Symbol.toStringTag,{value:"Module"})),e2=_s(QD);var vi={},Gf;function t2(){if(Gf)return vi;Gf=1,Object.defineProperty(vi,"__esModule",{value:!0}),vi.isBrowserCryptoAvailable=vi.getSubtleCrypto=vi.getBrowerCrypto=void 0;function i(){return(Wr===null||Wr===void 0?void 0:Wr.crypto)||(Wr===null||Wr===void 0?void 0:Wr.msCrypto)||{}}vi.getBrowerCrypto=i;function e(){const s=i();return s.subtle||s.webkitSubtle}vi.getSubtleCrypto=e;function t(){return!!i()&&!!e()}return vi.isBrowserCryptoAvailable=t,vi}var _i={},Wf;function r2(){if(Wf)return _i;Wf=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.isBrowser=_i.isNode=_i.isReactNative=void 0;function i(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}_i.isReactNative=i;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}_i.isNode=e;function t(){return!i()&&!e()}return _i.isBrowser=t,_i}(function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=e2;e.__exportStar(t2(),i),e.__exportStar(r2(),i)})(Op);function Ap(i=3){const e=Date.now()*Math.pow(10,i),t=Math.floor(Math.random()*Math.pow(10,i));return e+t}function Vu(i=6){return BigInt(Ap(i))}function ra(i,e,t){return{id:t||Ap(),jsonrpc:"2.0",method:i,params:e}}function ku(i,e){return{id:i,jsonrpc:"2.0",result:e}}function ia(i,e,t){return{id:i,jsonrpc:"2.0",error:i2(e,t)}}function i2(i,e){return typeof i>"u"?kf(Sp):(typeof i=="string"&&(i=Object.assign(Object.assign({},kf(Ku)),{message:i})),typeof e<"u"&&(i.data=e),ND(i.code)&&(i=RD(i.code)),i)}class n2{}class s2 extends n2{constructor(){super()}}class o2 extends s2{constructor(e){super()}}const a2="^https?:",c2="^wss?:";function u2(i){const e=i.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Cp(i,e){const t=u2(i);return typeof t>"u"?!1:new RegExp(e).test(t)}function Yf(i){return Cp(i,a2)}function Jf(i){return Cp(i,c2)}function h2(i){return new RegExp("wss?://localhost(:d{2,5})?").test(i)}function Tp(i){return typeof i=="object"&&"id"in i&&"jsonrpc"in i&&i.jsonrpc==="2.0"}function Gu(i){return Tp(i)&&"method"in i}function na(i){return Tp(i)&&(mi(i)||Gr(i))}function mi(i){return"result"in i}function Gr(i){return"error"in i}class Fi extends o2{constructor(e){super(e),this.events=new Lr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(ra(e.method,e.params||[],e.id||Vu().toString()),t)}async requestStrict(e,t){return new Promise(async(s,o)=>{if(!this.connection.connected)try{await this.open()}catch(c){o(c)}this.events.on(`${e.id}`,c=>{Gr(c)?o(c.error):s(c.result)});try{await this.connection.send(e,t)}catch(c){o(c)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),na(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const l2=()=>typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:require("ws"),f2=()=>typeof window<"u",Xf=i=>i.split("?")[0],Zf=10,d2=l2();class p2{constructor(e){if(this.url=e,this.events=new Lr.EventEmitter,this.registering=!1,!Jf(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=s=>{this.onClose(s),e()},this.socket.close()})}async send(e,t){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(rn(e))}catch(s){this.onError(e.id,s)}}register(e=this.url){if(!Jf(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((s,o)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),o(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return o(new Error("WebSocket connection is missing or invalid"));s(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,s)=>{const o=Op.isReactNative()?void 0:{rejectUnauthorized:!h2(e)},c=new d2(e,[],o);f2()?c.onerror=l=>{const f=l;s(this.emitError(f.error))}:c.on("error",l=>{s(this.emitError(l))}),c.onopen=()=>{this.onOpen(c),t(c)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?Ds(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const s=this.parseError(t),o=s.message||s.toString(),c=ia(e,o);this.events.emit("payload",c)}parseError(e,t=this.url){return xp(e,Xf(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Zf&&this.events.setMaxListeners(Zf)}emitError(e){const t=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${Xf(this.url)}`));return this.events.emit("register_error",t),t}}var ko={exports:{}};ko.exports;(function(i,e){var t=200,s="__lodash_hash_undefined__",o=1,c=2,l=9007199254740991,f="[object Arguments]",y="[object Array]",p="[object AsyncFunction]",v="[object Boolean]",S="[object Date]",D="[object Error]",x="[object Function]",O="[object GeneratorFunction]",z="[object Map]",H="[object Number]",ne="[object Null]",$="[object Object]",U="[object Promise]",P="[object Proxy]",N="[object RegExp]",E="[object Set]",u="[object String]",b="[object Symbol]",G="[object Undefined]",W="[object WeakMap]",se="[object ArrayBuffer]",ce="[object DataView]",de="[object Float32Array]",w="[object Float64Array]",C="[object Int8Array]",ee="[object Int16Array]",X="[object Int32Array]",V="[object Uint8Array]",k="[object Uint8ClampedArray]",J="[object Uint16Array]",re="[object Uint32Array]",be=/[\\^$.*+?()[\]{}|]/g,oe=/^\[object .+?Constructor\]$/,we=/^(?:0|[1-9]\d*)$/,le={};le[de]=le[w]=le[C]=le[ee]=le[X]=le[V]=le[k]=le[J]=le[re]=!0,le[f]=le[y]=le[se]=le[v]=le[ce]=le[S]=le[D]=le[x]=le[z]=le[H]=le[$]=le[N]=le[E]=le[u]=le[W]=!1;var _e=typeof Wr=="object"&&Wr&&Wr.Object===Object&&Wr,q=typeof self=="object"&&self&&self.Object===Object&&self,B=_e||q||Function("return this")(),F=e&&!e.nodeType&&e,d=F&&!0&&i&&!i.nodeType&&i,T=d&&d.exports===F,ae=T&&_e.process,fe=function(){try{return ae&&ae.binding&&ae.binding("util")}catch{}}(),Ie=fe&&fe.isTypedArray;function qe(I,j){for(var te=-1,pe=I==null?0:I.length,at=0,Te=[];++te<pe;){var ft=I[te];j(ft,te,I)&&(Te[at++]=ft)}return Te}function Ve(I,j){for(var te=-1,pe=j.length,at=I.length;++te<pe;)I[at+te]=j[te];return I}function je(I,j){for(var te=-1,pe=I==null?0:I.length;++te<pe;)if(j(I[te],te,I))return!0;return!1}function pt(I,j){for(var te=-1,pe=Array(I);++te<I;)pe[te]=j(te);return pe}function gt(I){return function(j){return I(j)}}function Le(I,j){return I.has(j)}function xe(I,j){return I==null?void 0:I[j]}function Re(I){var j=-1,te=Array(I.size);return I.forEach(function(pe,at){te[++j]=[at,pe]}),te}function $e(I,j){return function(te){return I(j(te))}}function Be(I){var j=-1,te=Array(I.size);return I.forEach(function(pe){te[++j]=pe}),te}var Pe=Array.prototype,Fe=Function.prototype,Se=Object.prototype,Ae=B["__core-js_shared__"],He=Fe.toString,Oe=Se.hasOwnProperty,ke=function(){var I=/[^.]+$/.exec(Ae&&Ae.keys&&Ae.keys.IE_PROTO||"");return I?"Symbol(src)_1."+I:""}(),We=Se.toString,et=RegExp("^"+He.call(Oe).replace(be,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=T?B.Buffer:void 0,Je=B.Symbol,tr=B.Uint8Array,lr=Se.propertyIsEnumerable,Yr=Pe.splice,rr=Je?Je.toStringTag:void 0,si=Object.getOwnPropertySymbols,bi=tt?tt.isBuffer:void 0,ji=$e(Object.keys,Object),wt=br(B,"DataView"),yt=br(B,"Map"),Et=br(B,"Promise"),Dt=br(B,"Set"),mt=br(B,"WeakMap"),vt=br(Object,"create"),Ft=ai(wt),Ut=ai(yt),St=ai(Et),jt=ai(Dt),It=ai(mt),At=Je?Je.prototype:void 0,xt=At?At.valueOf:void 0;function ht(I){var j=-1,te=I==null?0:I.length;for(this.clear();++j<te;){var pe=I[j];this.set(pe[0],pe[1])}}function Mt(){this.__data__=vt?vt(null):{},this.size=0}function Lt(I){var j=this.has(I)&&delete this.__data__[I];return this.size-=j?1:0,j}function aa(I){var j=this.__data__;if(vt){var te=j[I];return te===s?void 0:te}return Oe.call(j,I)?j[I]:void 0}function ca(I){var j=this.__data__;return vt?j[I]!==void 0:Oe.call(j,I)}function ua(I,j){var te=this.__data__;return this.size+=this.has(I)?0:1,te[I]=vt&&j===void 0?s:j,this}ht.prototype.clear=Mt,ht.prototype.delete=Lt,ht.prototype.get=aa,ht.prototype.has=ca,ht.prototype.set=ua;function Or(I){var j=-1,te=I==null?0:I.length;for(this.clear();++j<te;){var pe=I[j];this.set(pe[0],pe[1])}}function ha(){this.__data__=[],this.size=0}function la(I){var j=this.__data__,te=Mi(j,I);if(te<0)return!1;var pe=j.length-1;return te==pe?j.pop():Yr.call(j,te,1),--this.size,!0}function fa(I){var j=this.__data__,te=Mi(j,I);return te<0?void 0:j[te][1]}function da(I){return Mi(this.__data__,I)>-1}function pa(I,j){var te=this.__data__,pe=Mi(te,I);return pe<0?(++this.size,te.push([I,j])):te[pe][1]=j,this}Or.prototype.clear=ha,Or.prototype.delete=la,Or.prototype.get=fa,Or.prototype.has=da,Or.prototype.set=pa;function oi(I){var j=-1,te=I==null?0:I.length;for(this.clear();++j<te;){var pe=I[j];this.set(pe[0],pe[1])}}function un(){this.size=0,this.__data__={hash:new ht,map:new(yt||Or),string:new ht}}function ga(I){var j=wi(this,I).delete(I);return this.size-=j?1:0,j}function hn(I){return wi(this,I).get(I)}function ya(I){return wi(this,I).has(I)}function va(I,j){var te=wi(this,I),pe=te.size;return te.set(I,j),this.size+=te.size==pe?0:1,this}oi.prototype.clear=un,oi.prototype.delete=ga,oi.prototype.get=hn,oi.prototype.has=ya,oi.prototype.set=va;function ln(I){var j=-1,te=I==null?0:I.length;for(this.__data__=new oi;++j<te;)this.add(I[j])}function Is(I){return this.__data__.set(I,s),this}function xs(I){return this.__data__.has(I)}ln.prototype.add=ln.prototype.push=Is,ln.prototype.has=xs;function Br(I){var j=this.__data__=new Or(I);this.size=j.size}function _a(){this.__data__=new Or,this.size=0}function ma(I){var j=this.__data__,te=j.delete(I);return this.size=j.size,te}function ba(I){return this.__data__.get(I)}function wa(I){return this.__data__.has(I)}function Os(I,j){var te=this.__data__;if(te instanceof Or){var pe=te.__data__;if(!yt||pe.length<t-1)return pe.push([I,j]),this.size=++te.size,this;te=this.__data__=new oi(pe)}return te.set(I,j),this.size=te.size,this}Br.prototype.clear=_a,Br.prototype.delete=ma,Br.prototype.get=ba,Br.prototype.has=wa,Br.prototype.set=Os;function Ps(I,j){var te=pn(I),pe=!te&&Bs(I),at=!te&&!pe&&Ln(I),Te=!te&&!pe&&!at&&Hs(I),ft=te||pe||at||Te,Bt=ft?pt(I.length,String):[],Xe=Bt.length;for(var ct in I)(j||Oe.call(I,ct))&&!(ft&&(ct=="length"||at&&(ct=="offset"||ct=="parent")||Te&&(ct=="buffer"||ct=="byteLength"||ct=="byteOffset")||Fs(ct,Xe)))&&Bt.push(ct);return Bt}function Mi(I,j){for(var te=I.length;te--;)if(Ls(I[te][0],j))return te;return-1}function jn(I,j,te){var pe=j(I);return pn(I)?pe:Ve(pe,te(I))}function Li(I){return I==null?I===void 0?G:ne:rr&&rr in Object(I)?Rs(I):Sa(I)}function Mn(I){return zi(I)&&Li(I)==f}function Bi(I,j,te,pe,at){return I===j?!0:I==null||j==null||!zi(I)&&!zi(j)?I!==I&&j!==j:As(I,j,te,pe,Bi,at)}function As(I,j,te,pe,at,Te){var ft=pn(I),Bt=pn(j),Xe=ft?y:Jr(I),ct=Bt?y:Jr(j);Xe=Xe==f?$:Xe,ct=ct==f?$:ct;var Ct=Xe==$,fr=ct==$,zt=Xe==ct;if(zt&&Ln(I)){if(!Ln(j))return!1;ft=!0,Ct=!1}if(zt&&!Ct)return Te||(Te=new Br),ft||Hs(I)?fn(I,j,te,pe,at,Te):Da(I,j,Xe,te,pe,at,Te);if(!(te&o)){var dt=Ct&&Oe.call(I,"__wrapped__"),ir=fr&&Oe.call(j,"__wrapped__");if(dt||ir){var zr=dt?I.value():I,Pr=ir?j.value():j;return Te||(Te=new Br),at(zr,Pr,te,pe,Te)}}return zt?(Te||(Te=new Br),Ns(I,j,te,pe,at,Te)):!1}function Ea(I){if(!qs(I)||js(I))return!1;var j=gn(I)?et:oe;return j.test(ai(I))}function Cs(I){return zi(I)&&zs(I.length)&&!!le[Li(I)]}function Ts(I){if(!Ms(I))return ji(I);var j=[];for(var te in Object(I))Oe.call(I,te)&&te!="constructor"&&j.push(te);return j}function fn(I,j,te,pe,at,Te){var ft=te&o,Bt=I.length,Xe=j.length;if(Bt!=Xe&&!(ft&&Xe>Bt))return!1;var ct=Te.get(I);if(ct&&Te.get(j))return ct==j;var Ct=-1,fr=!0,zt=te&c?new ln:void 0;for(Te.set(I,j),Te.set(j,I);++Ct<Bt;){var dt=I[Ct],ir=j[Ct];if(pe)var zr=ft?pe(ir,dt,Ct,j,I,Te):pe(dt,ir,Ct,I,j,Te);if(zr!==void 0){if(zr)continue;fr=!1;break}if(zt){if(!je(j,function(Pr,Xr){if(!Le(zt,Xr)&&(dt===Pr||at(dt,Pr,te,pe,Te)))return zt.push(Xr)})){fr=!1;break}}else if(!(dt===ir||at(dt,ir,te,pe,Te))){fr=!1;break}}return Te.delete(I),Te.delete(j),fr}function Da(I,j,te,pe,at,Te,ft){switch(te){case ce:if(I.byteLength!=j.byteLength||I.byteOffset!=j.byteOffset)return!1;I=I.buffer,j=j.buffer;case se:return!(I.byteLength!=j.byteLength||!Te(new tr(I),new tr(j)));case v:case S:case H:return Ls(+I,+j);case D:return I.name==j.name&&I.message==j.message;case N:case u:return I==j+"";case z:var Bt=Re;case E:var Xe=pe&o;if(Bt||(Bt=Be),I.size!=j.size&&!Xe)return!1;var ct=ft.get(I);if(ct)return ct==j;pe|=c,ft.set(I,j);var Ct=fn(Bt(I),Bt(j),pe,at,Te,ft);return ft.delete(I),Ct;case b:if(xt)return xt.call(I)==xt.call(j)}return!1}function Ns(I,j,te,pe,at,Te){var ft=te&o,Bt=dn(I),Xe=Bt.length,ct=dn(j),Ct=ct.length;if(Xe!=Ct&&!ft)return!1;for(var fr=Xe;fr--;){var zt=Bt[fr];if(!(ft?zt in j:Oe.call(j,zt)))return!1}var dt=Te.get(I);if(dt&&Te.get(j))return dt==j;var ir=!0;Te.set(I,j),Te.set(j,I);for(var zr=ft;++fr<Xe;){zt=Bt[fr];var Pr=I[zt],Xr=j[zt];if(pe)var Bn=ft?pe(Xr,Pr,zt,j,I,Te):pe(Pr,Xr,zt,I,j,Te);if(!(Bn===void 0?Pr===Xr||at(Pr,Xr,te,pe,Te):Bn)){ir=!1;break}zr||(zr=zt=="constructor")}if(ir&&!zr){var qi=I.constructor,Vt=j.constructor;qi!=Vt&&"constructor"in I&&"constructor"in j&&!(typeof qi=="function"&&qi instanceof qi&&typeof Vt=="function"&&Vt instanceof Vt)&&(ir=!1)}return Te.delete(I),Te.delete(j),ir}function dn(I){return jn(I,Oa,$s)}function wi(I,j){var te=I.__data__;return Us(j)?te[typeof j=="string"?"string":"hash"]:te.map}function br(I,j){var te=xe(I,j);return Ea(te)?te:void 0}function Rs(I){var j=Oe.call(I,rr),te=I[rr];try{I[rr]=void 0;var pe=!0}catch{}var at=We.call(I);return pe&&(j?I[rr]=te:delete I[rr]),at}var $s=si?function(I){return I==null?[]:(I=Object(I),qe(si(I),function(j){return lr.call(I,j)}))}:ot,Jr=Li;(wt&&Jr(new wt(new ArrayBuffer(1)))!=ce||yt&&Jr(new yt)!=z||Et&&Jr(Et.resolve())!=U||Dt&&Jr(new Dt)!=E||mt&&Jr(new mt)!=W)&&(Jr=function(I){var j=Li(I),te=j==$?I.constructor:void 0,pe=te?ai(te):"";if(pe)switch(pe){case Ft:return ce;case Ut:return z;case St:return U;case jt:return E;case It:return W}return j});function Fs(I,j){return j=j??l,!!j&&(typeof I=="number"||we.test(I))&&I>-1&&I%1==0&&I<j}function Us(I){var j=typeof I;return j=="string"||j=="number"||j=="symbol"||j=="boolean"?I!=="__proto__":I===null}function js(I){return!!ke&&ke in I}function Ms(I){var j=I&&I.constructor,te=typeof j=="function"&&j.prototype||Se;return I===te}function Sa(I){return We.call(I)}function ai(I){if(I!=null){try{return He.call(I)}catch{}try{return I+""}catch{}}return""}function Ls(I,j){return I===j||I!==I&&j!==j}var Bs=Mn(function(){return arguments}())?Mn:function(I){return zi(I)&&Oe.call(I,"callee")&&!lr.call(I,"callee")},pn=Array.isArray;function Ia(I){return I!=null&&zs(I.length)&&!gn(I)}var Ln=bi||st;function xa(I,j){return Bi(I,j)}function gn(I){if(!qs(I))return!1;var j=Li(I);return j==x||j==O||j==p||j==P}function zs(I){return typeof I=="number"&&I>-1&&I%1==0&&I<=l}function qs(I){var j=typeof I;return I!=null&&(j=="object"||j=="function")}function zi(I){return I!=null&&typeof I=="object"}var Hs=Ie?gt(Ie):Cs;function Oa(I){return Ia(I)?Ps(I):Ts(I)}function ot(){return[]}function st(){return!1}i.exports=xa})(ko,ko.exports);var g2=ko.exports;const y2=Rd(g2);function v2(i,e){if(i.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var o=0;o<i.length;o++){var c=i.charAt(o),l=c.charCodeAt(0);if(t[l]!==255)throw new TypeError(c+" is ambiguous");t[l]=o}var f=i.length,y=i.charAt(0),p=Math.log(f)/Math.log(256),v=Math.log(256)/Math.log(f);function S(O){if(O instanceof Uint8Array||(ArrayBuffer.isView(O)?O=new Uint8Array(O.buffer,O.byteOffset,O.byteLength):Array.isArray(O)&&(O=Uint8Array.from(O))),!(O instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(O.length===0)return"";for(var z=0,H=0,ne=0,$=O.length;ne!==$&&O[ne]===0;)ne++,z++;for(var U=($-ne)*v+1>>>0,P=new Uint8Array(U);ne!==$;){for(var N=O[ne],E=0,u=U-1;(N!==0||E<H)&&u!==-1;u--,E++)N+=256*P[u]>>>0,P[u]=N%f>>>0,N=N/f>>>0;if(N!==0)throw new Error("Non-zero carry");H=E,ne++}for(var b=U-H;b!==U&&P[b]===0;)b++;for(var G=y.repeat(z);b<U;++b)G+=i.charAt(P[b]);return G}function D(O){if(typeof O!="string")throw new TypeError("Expected String");if(O.length===0)return new Uint8Array;var z=0;if(O[z]!==" "){for(var H=0,ne=0;O[z]===y;)H++,z++;for(var $=(O.length-z)*p+1>>>0,U=new Uint8Array($);O[z];){var P=t[O.charCodeAt(z)];if(P===255)return;for(var N=0,E=$-1;(P!==0||N<ne)&&E!==-1;E--,N++)P+=f*U[E]>>>0,U[E]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");ne=N,z++}if(O[z]!==" "){for(var u=$-ne;u!==$&&U[u]===0;)u++;for(var b=new Uint8Array(H+($-u)),G=H;u!==$;)b[G++]=U[u++];return b}}}function x(O){var z=D(O);if(z)return z;throw new Error(`Non-${e} character`)}return{encode:S,decodeUnsafe:D,decode:x}}var _2=v2,m2=_2;const Np=i=>{if(i instanceof Uint8Array&&i.constructor.name==="Uint8Array")return i;if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);throw new Error("Unknown type, must be binary type")},b2=i=>new TextEncoder().encode(i),w2=i=>new TextDecoder().decode(i);class E2{constructor(e,t,s){this.name=e,this.prefix=t,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class D2{constructor(e,t,s){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Rp(this,e)}}class S2{constructor(e){this.decoders=e}or(e){return Rp(this,e)}decode(e){const t=e[0],s=this.decoders[t];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Rp=(i,e)=>new S2({...i.decoders||{[i.prefix]:i},...e.decoders||{[e.prefix]:e}});class I2{constructor(e,t,s,o){this.name=e,this.prefix=t,this.baseEncode=s,this.baseDecode=o,this.encoder=new E2(e,t,s),this.decoder=new D2(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const sa=({name:i,prefix:e,encode:t,decode:s})=>new I2(i,e,t,s),Ss=({prefix:i,name:e,alphabet:t})=>{const{encode:s,decode:o}=m2(t,e);return sa({prefix:i,name:e,encode:s,decode:c=>Np(o(c))})},x2=(i,e,t,s)=>{const o={};for(let v=0;v<e.length;++v)o[e[v]]=v;let c=i.length;for(;i[c-1]==="=";)--c;const l=new Uint8Array(c*t/8|0);let f=0,y=0,p=0;for(let v=0;v<c;++v){const S=o[i[v]];if(S===void 0)throw new SyntaxError(`Non-${s} character`);y=y<<t|S,f+=t,f>=8&&(f-=8,l[p++]=255&y>>f)}if(f>=t||255&y<<8-f)throw new SyntaxError("Unexpected end of data");return l},O2=(i,e,t)=>{const s=e[e.length-1]==="=",o=(1<<t)-1;let c="",l=0,f=0;for(let y=0;y<i.length;++y)for(f=f<<8|i[y],l+=8;l>t;)l-=t,c+=e[o&f>>l];if(l&&(c+=e[o&f<<t-l]),s)for(;c.length*t&7;)c+="=";return c},Xt=({name:i,prefix:e,bitsPerChar:t,alphabet:s})=>sa({prefix:e,name:i,encode(o){return O2(o,s,t)},decode(o){return x2(o,s,t,i)}}),P2=sa({prefix:"\0",name:"identity",encode:i=>w2(i),decode:i=>b2(i)});var A2=Object.freeze({__proto__:null,identity:P2});const C2=Xt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var T2=Object.freeze({__proto__:null,base2:C2});const N2=Xt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var R2=Object.freeze({__proto__:null,base8:N2});const $2=Ss({prefix:"9",name:"base10",alphabet:"0123456789"});var F2=Object.freeze({__proto__:null,base10:$2});const U2=Xt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),j2=Xt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var M2=Object.freeze({__proto__:null,base16:U2,base16upper:j2});const L2=Xt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),B2=Xt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),z2=Xt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),q2=Xt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),H2=Xt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),K2=Xt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),V2=Xt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),k2=Xt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),G2=Xt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var W2=Object.freeze({__proto__:null,base32:L2,base32upper:B2,base32pad:z2,base32padupper:q2,base32hex:H2,base32hexupper:K2,base32hexpad:V2,base32hexpadupper:k2,base32z:G2});const Y2=Ss({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),J2=Ss({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var X2=Object.freeze({__proto__:null,base36:Y2,base36upper:J2});const Z2=Ss({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Q2=Ss({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var eS=Object.freeze({__proto__:null,base58btc:Z2,base58flickr:Q2});const tS=Xt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),rS=Xt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),iS=Xt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),nS=Xt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var sS=Object.freeze({__proto__:null,base64:tS,base64pad:rS,base64url:iS,base64urlpad:nS});const $p=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),oS=$p.reduce((i,e,t)=>(i[t]=e,i),[]),aS=$p.reduce((i,e,t)=>(i[e.codePointAt(0)]=t,i),[]);function cS(i){return i.reduce((e,t)=>(e+=oS[t],e),"")}function uS(i){const e=[];for(const t of i){const s=aS[t.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(s)}return new Uint8Array(e)}const hS=sa({prefix:"🚀",name:"base256emoji",encode:cS,decode:uS});var lS=Object.freeze({__proto__:null,base256emoji:hS}),fS=Fp,Qf=128,dS=127,pS=~dS,gS=Math.pow(2,31);function Fp(i,e,t){e=e||[],t=t||0;for(var s=t;i>=gS;)e[t++]=i&255|Qf,i/=128;for(;i&pS;)e[t++]=i&255|Qf,i>>>=7;return e[t]=i|0,Fp.bytes=t-s+1,e}var yS=Eu,vS=128,ed=127;function Eu(i,s){var t=0,s=s||0,o=0,c=s,l,f=i.length;do{if(c>=f)throw Eu.bytes=0,new RangeError("Could not decode varint");l=i[c++],t+=o<28?(l&ed)<<o:(l&ed)*Math.pow(2,o),o+=7}while(l>=vS);return Eu.bytes=c-s,t}var _S=Math.pow(2,7),mS=Math.pow(2,14),bS=Math.pow(2,21),wS=Math.pow(2,28),ES=Math.pow(2,35),DS=Math.pow(2,42),SS=Math.pow(2,49),IS=Math.pow(2,56),xS=Math.pow(2,63),OS=function(i){return i<_S?1:i<mS?2:i<bS?3:i<wS?4:i<ES?5:i<DS?6:i<SS?7:i<IS?8:i<xS?9:10},PS={encode:fS,decode:yS,encodingLength:OS},Up=PS;const td=(i,e,t=0)=>(Up.encode(i,e,t),e),rd=i=>Up.encodingLength(i),Du=(i,e)=>{const t=e.byteLength,s=rd(i),o=s+rd(t),c=new Uint8Array(o+t);return td(i,c,0),td(t,c,s),c.set(e,o),new AS(i,t,e,c)};class AS{constructor(e,t,s,o){this.code=e,this.size=t,this.digest=s,this.bytes=o}}const jp=({name:i,code:e,encode:t})=>new CS(i,e,t);class CS{constructor(e,t,s){this.name=e,this.code=t,this.encode=s}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Du(this.code,t):t.then(s=>Du(this.code,s))}else throw Error("Unknown type, must be binary type")}}const Mp=i=>async e=>new Uint8Array(await crypto.subtle.digest(i,e)),TS=jp({name:"sha2-256",code:18,encode:Mp("SHA-256")}),NS=jp({name:"sha2-512",code:19,encode:Mp("SHA-512")});var RS=Object.freeze({__proto__:null,sha256:TS,sha512:NS});const Lp=0,$S="identity",Bp=Np,FS=i=>Du(Lp,Bp(i)),US={code:Lp,name:$S,encode:Bp,digest:FS};var jS=Object.freeze({__proto__:null,identity:US});new TextEncoder,new TextDecoder;const id={...A2,...T2,...R2,...F2,...M2,...W2,...X2,...eS,...sS,...lS};({...RS,...jS});function zp(i){return globalThis.Buffer!=null?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):i}function MS(i=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?zp(globalThis.Buffer.allocUnsafe(i)):new Uint8Array(i)}function qp(i,e,t,s){return{name:i,prefix:e,encoder:{name:i,prefix:e,encode:t},decoder:{decode:s}}}const nd=qp("utf8","u",i=>"u"+new TextDecoder("utf8").decode(i),i=>new TextEncoder().encode(i.substring(1))),Hc=qp("ascii","a",i=>{let e="a";for(let t=0;t<i.length;t++)e+=String.fromCharCode(i[t]);return e},i=>{i=i.substring(1);const e=MS(i.length);for(let t=0;t<i.length;t++)e[t]=i.charCodeAt(t);return e}),LS={utf8:nd,"utf-8":nd,hex:id.base16,latin1:Hc,ascii:Hc,binary:Hc,...id};function BS(i,e="utf8"){const t=LS[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?zp(globalThis.Buffer.from(i,"utf-8")):t.decoder.decode(`${t.prefix}${i}`)}const Hp="wc",zS=2,Wu="core",Ri=`${Hp}@2:${Wu}:`,qS={name:Wu,logger:"error"},HS={database:":memory:"},KS="crypto",sd="client_ed25519_seed",VS=ve.ONE_DAY,kS="keychain",GS="0.3",WS="messages",YS="0.3",JS=ve.SIX_HOURS,XS="publisher",Kp="irn",ZS="error",Vp="wss://relay.walletconnect.com",od="wss://relay.walletconnect.org",QS="relayer",Pt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},eI="_subscription",os={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},tI=ve.ONE_SECOND/2,rI="2.9.0",iI=1e4,nI="0.3",sI="WALLETCONNECT_CLIENT_ID",ii={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},oI="subscription",aI="0.3",cI=ve.FIVE_SECONDS*1e3,uI="pairing",hI="0.3",as={wc_pairingDelete:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:0},res:{ttl:ve.ONE_DAY,prompt:!1,tag:0}}},ri={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},lI="history",fI="0.3",dI="expirer",jr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},pI="0.3",Kc="verify-api",ad="https://verify.walletconnect.com";class gI{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name=kS,this.version=GS,this.initialized=!1,this.storagePrefix=Ri,this.init=async()=>{if(!this.initialized){const s=await this.getKeyChain();typeof s<"u"&&(this.keychain=s),this.initialized=!0}},this.has=s=>(this.isInitialized(),this.keychain.has(s)),this.set=async(s,o)=>{this.isInitialized(),this.keychain.set(s,o),await this.persist()},this.get=s=>{this.isInitialized();const o=this.keychain.get(s);if(typeof o>"u"){const{message:c}=he("NO_MATCHING_KEY",`${this.name}: ${s}`);throw new Error(c)}return o},this.del=async s=>{this.isInitialized(),this.keychain.delete(s),await this.persist()},this.core=e,this.logger=Qe.generateChildLogger(t,this.name)}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,ap(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?cp(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}}class yI{constructor(e,t,s){this.core=e,this.logger=t,this.name=KS,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=o=>(this.isInitialized(),this.keychain.has(o)),this.getClientId=async()=>{this.isInitialized();const o=await this.getClientSeed(),c=Vf(o);return Dp(c.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const o=EE();return this.setPrivateKey(o.publicKey,o.privateKey)},this.signJWT=async o=>{this.isInitialized();const c=await this.getClientSeed(),l=Vf(c),f=hu();return await xD(f,o,VS,l)},this.generateSharedKey=(o,c,l)=>{this.isInitialized();const f=this.getPrivateKey(o),y=DE(f,c);return this.setSymKey(y,l)},this.setSymKey=async(o,c)=>{this.isInitialized();const l=c||SE(o);return await this.keychain.set(l,o),l},this.deleteKeyPair=async o=>{this.isInitialized(),await this.keychain.del(o)},this.deleteSymKey=async o=>{this.isInitialized(),await this.keychain.del(o)},this.encode=async(o,c,l)=>{this.isInitialized();const f=sp(l),y=rn(c);if(wf(f)){const D=f.senderPublicKey,x=f.receiverPublicKey;o=await this.generateSharedKey(D,x)}const p=this.getSymKey(o),{type:v,senderPublicKey:S}=f;return xE({type:v,symKey:p,message:y,senderPublicKey:S})},this.decode=async(o,c,l)=>{this.isInitialized();const f=AE(c,l);if(wf(f)){const v=f.receiverPublicKey,S=f.senderPublicKey;o=await this.generateSharedKey(v,S)}const y=this.getSymKey(o),p=OE({symKey:y,encoded:c});return Ds(p)},this.getPayloadType=o=>{const c=qo(o);return ws(c.type)},this.getPayloadSenderPublicKey=o=>{const c=qo(o);return c.senderPublicKey?hr(c.senderPublicKey,ur):void 0},this.core=e,this.logger=Qe.generateChildLogger(t,this.name),this.keychain=s||new gI(this.core,this.logger)}get context(){return Qe.getLoggerContext(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(sd)}catch{e=hu(),await this.keychain.set(sd,e)}return BS(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}}class vI extends nD{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name=WS,this.version=YS,this.initialized=!1,this.storagePrefix=Ri,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const s=await this.getRelayerMessages();typeof s<"u"&&(this.messages=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(s){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(s)}finally{this.initialized=!0}}},this.set=async(s,o)=>{this.isInitialized();const c=Tn(o);let l=this.messages.get(s);return typeof l>"u"&&(l={}),typeof l[c]<"u"||(l[c]=o,this.messages.set(s,l),await this.persist()),c},this.get=s=>{this.isInitialized();let o=this.messages.get(s);return typeof o>"u"&&(o={}),o},this.has=(s,o)=>{this.isInitialized();const c=this.get(s),l=Tn(o);return typeof c[l]<"u"},this.del=async s=>{this.isInitialized(),this.messages.delete(s),await this.persist()},this.logger=Qe.generateChildLogger(e,this.name),this.core=t}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,ap(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?cp(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}}class _I extends sD{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new Lr.EventEmitter,this.name=XS,this.queue=new Map,this.publishTimeout=ve.toMiliseconds(ve.TEN_SECONDS),this.queueTimeout=ve.toMiliseconds(ve.FIVE_SECONDS),this.needsTransportRestart=!1,this.publish=async(s,o,c)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:c}});try{const l=(c==null?void 0:c.ttl)||JS,f=lu(c),y=(c==null?void 0:c.prompt)||!1,p=(c==null?void 0:c.tag)||0,v=(c==null?void 0:c.id)||Vu().toString(),S={topic:s,message:o,opts:{ttl:l,relay:f,prompt:y,tag:p,id:v}},D=setTimeout(()=>this.queue.set(v,S),this.queueTimeout);try{await await Ho(this.rpcPublish(s,o,l,f,y,p,v),this.publishTimeout),clearTimeout(D),this.relayer.events.emit(Pt.publish,S)}catch{this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0;return}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:c}})}catch(l){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(l),l}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.relayer=e,this.logger=Qe.generateChildLogger(t,this.name),this.registerEventListeners()}get context(){return Qe.getLoggerContext(this.logger)}rpcPublish(e,t,s,o,c,l,f){var y,p,v,S;const D={method:Fo(o.protocol).publish,params:{topic:e,message:t,ttl:s,prompt:c,tag:l},id:f};return cr((y=D.params)==null?void 0:y.prompt)&&((p=D.params)==null||delete p.prompt),cr((v=D.params)==null?void 0:v.tag)&&((S=D.params)==null||delete S.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:D}),this.relayer.request(D)}onPublish(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:t,message:s,opts:o}=e;await this.publish(t,s,o)})}registerEventListeners(){this.relayer.core.heartbeat.on(Un.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Pt.connection_stalled);return}this.checkQueue()}),this.relayer.on(Pt.message_ack,e=>{this.onPublish(e.id.toString())})}}class mI{constructor(){this.map=new Map,this.set=(e,t)=>{const s=this.get(e);this.exists(e,t)||this.map.set(e,[...s,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const s=this.get(e);if(!this.exists(e,t))return;const o=s.filter(c=>c!==t);if(!o.length){this.map.delete(e);return}this.map.set(e,o)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var bI=Object.defineProperty,wI=Object.defineProperties,EI=Object.getOwnPropertyDescriptors,cd=Object.getOwnPropertySymbols,DI=Object.prototype.hasOwnProperty,SI=Object.prototype.propertyIsEnumerable,ud=(i,e,t)=>e in i?bI(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,cs=(i,e)=>{for(var t in e||(e={}))DI.call(e,t)&&ud(i,t,e[t]);if(cd)for(var t of cd(e))SI.call(e,t)&&ud(i,t,e[t]);return i},Vc=(i,e)=>wI(i,EI(e));class II extends cD{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new mI,this.events=new Lr.EventEmitter,this.name=oI,this.version=aI,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Ri,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}});try{const c=lu(o),l={topic:s,relay:c};this.pending.set(s,l);const f=await this.rpcSubscribe(s,c);return this.onSubscribe(f,l),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}}),f}catch(c){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(c),c}},this.unsubscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),typeof(o==null?void 0:o.id)<"u"?await this.unsubscribeById(s,o.id,o):await this.unsubscribeByTopic(s,o)},this.isSubscribed=async s=>this.topics.includes(s)?!0:await new Promise((o,c)=>{const l=new ve.Watch;l.start(this.pendingSubscriptionWatchLabel);const f=setInterval(()=>{!this.pending.has(s)&&this.topics.includes(s)&&(clearInterval(f),l.stop(this.pendingSubscriptionWatchLabel),o(!0)),l.elapsed(this.pendingSubscriptionWatchLabel)>=cI&&(clearInterval(f),l.stop(this.pendingSubscriptionWatchLabel),c(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Qe.generateChildLogger(t,this.name),this.clientId=""}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let s=!1;try{s=this.getSubscription(e).topic===t}catch{}return s}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const s=this.topicMap.get(e);await Promise.all(s.map(async o=>await this.unsubscribeById(e,o,t)))}async unsubscribeById(e,t,s){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:s}});try{const o=lu(s);await this.rpcUnsubscribe(e,t,o);const c=Rt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,c),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:s}})}catch(o){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(o),o}}async rpcSubscribe(e,t){const s={method:Fo(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{await await Ho(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Pt.connection_stalled)}return Tn(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,s={method:Fo(t.protocol).batchSubscribe,params:{topics:e.map(o=>o.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{return await await Ho(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Pt.connection_stalled)}}rpcUnsubscribe(e,t,s){const o={method:Fo(s.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o}),this.relayer.request(o)}onSubscribe(e,t){this.setSubscription(e,Vc(cs({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,cs({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,s){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,s),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,cs({},t)),this.topicMap.set(t.topic,e),this.events.emit(ii.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:s}=he("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const s=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(s.topic,e),this.events.emit(ii.deleted,Vc(cs({},s),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(ii.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){const s=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(ii.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=he("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const t=await this.rpcBatchSubscribe(e);ni(t)&&this.onBatchSubscribe(t.map((s,o)=>Vc(cs({},e[o]),{id:s})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(Un.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(Pt.connect,async()=>{await this.onConnect()}),this.relayer.on(Pt.disconnect,()=>{this.onDisconnect()}),this.events.on(ii.created,async e=>{const t=ii.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(ii.deleted,async e=>{const t=ii.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const t=setInterval(()=>{this.restartInProgress||(clearInterval(t),e())},this.pollingInterval)})}}var xI=Object.defineProperty,hd=Object.getOwnPropertySymbols,OI=Object.prototype.hasOwnProperty,PI=Object.prototype.propertyIsEnumerable,ld=(i,e,t)=>e in i?xI(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,AI=(i,e)=>{for(var t in e||(e={}))OI.call(e,t)&&ld(i,t,e[t]);if(hd)for(var t of hd(e))PI.call(e,t)&&ld(i,t,e[t]);return i};class CI extends oD{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new Lr.EventEmitter,this.name=QS,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async t=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(t)}catch(s){throw this.logger.debug("Failed to Publish Request"),this.logger.error(s),s}},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Qe.generateChildLogger(e.logger,this.name):Qe.pino(Qe.getDefaultLoggerOptions({level:e.logger||ZS})),this.messages=new vI(this.logger,e.core),this.subscriber=new II(this,this.logger),this.publisher=new _I(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||Vp,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${od}...`),await this.restartTransport(od)}this.registerEventListeners(),this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},iI)}get context(){return Qe.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,t,s){this.isInitialized(),await this.publisher.publish(e,t,s),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})}async subscribe(e,t){var s;this.isInitialized();let o=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"";return o||(await Promise.all([new Promise(c=>{this.subscriber.once(ii.created,l=>{l.topic===e&&c()})}),new Promise(async c=>{o=await this.subscriber.subscribe(e,t),c()})]),o)}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(Pt.transport_closed))}async transportOpen(e){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=e||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(t=>{this.initialized||t(),this.subscriber.once(ii.resubscribed,()=>{t()})}),await Promise.race([new Promise(async(t,s)=>{await Ho(this.provider.connect(),5e3,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>s(o)).then(()=>t()).finally(()=>this.removeListener(Pt.transport_closed,this.rejectTransportOpen))}),new Promise(t=>this.once(Pt.transport_closed,this.rejectTransportOpen))])])}catch(t){this.logger.error(t);const s=t;if(!this.isConnectionStalled(s.message))throw t;this.events.emit(Pt.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(e){this.transportExplicitlyClosed||this.reconnecting||(this.relayUrl=e||this.relayUrl,this.connected&&await Promise.all([new Promise(t=>{this.provider.once(os.disconnect,()=>{t()})}),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}rejectTransportOpen(){throw new Error("Attempt to connect to relay via `transportOpen` has stalled. Retrying...")}async createProvider(){const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Fi(new p2(BE({sdkVersion:rI,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:s}=e;await this.messages.set(t,s)}async shouldIgnoreMessageEvent(e){const{topic:t,message:s}=e;return await this.subscriber.isSubscribed(t)?this.messages.has(t,s):!0}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Gu(e)){if(!e.method.endsWith(eI))return;const t=e.params,{topic:s,message:o,publishedAt:c}=t.data,l={topic:s,message:o,publishedAt:c};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(AI({type:"event",event:t.id},l)),this.events.emit(t.id,l),await this.acknowledgePayload(e),await this.onMessageEvent(l)}else na(e)&&this.events.emit(Pt.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Pt.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=ku(e.id,!0);await this.provider.connection.send(t)}registerProviderListeners(){this.provider.on(os.payload,e=>this.onProviderPayload(e)),this.provider.on(os.connect,()=>{this.events.emit(Pt.connect)}),this.provider.on(os.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(os.error,e=>{this.logger.error(e),this.events.emit(Pt.error,e)})}registerEventListeners(){this.events.on(Pt.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(Pt.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},ve.toMiliseconds(tI))}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(e=>{const t=setInterval(()=>{this.connected&&(clearInterval(t),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var TI=Object.defineProperty,fd=Object.getOwnPropertySymbols,NI=Object.prototype.hasOwnProperty,RI=Object.prototype.propertyIsEnumerable,dd=(i,e,t)=>e in i?TI(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,pd=(i,e)=>{for(var t in e||(e={}))NI.call(e,t)&&dd(i,t,e[t]);if(fd)for(var t of fd(e))RI.call(e,t)&&dd(i,t,e[t]);return i};class oa extends aD{constructor(e,t,s,o=Ri,c=void 0){super(e,t,s,o),this.core=e,this.logger=t,this.name=s,this.map=new Map,this.version=nI,this.cached=[],this.initialized=!1,this.storagePrefix=Ri,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(l=>{this.getKey&&l!==null&&!cr(l)?this.map.set(this.getKey(l),l):u3(l)?this.map.set(l.id,l):h3(l)&&this.map.set(l.topic,l)}),this.cached=[],this.initialized=!0)},this.set=async(l,f)=>{this.isInitialized(),this.map.has(l)?await this.update(l,f):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:l,value:f}),this.map.set(l,f),await this.persist())},this.get=l=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:l}),this.getData(l)),this.getAll=l=>(this.isInitialized(),l?this.values.filter(f=>Object.keys(l).every(y=>y2(f[y],l[y]))):this.values),this.update=async(l,f)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:l,update:f});const y=pd(pd({},this.getData(l)),f);this.map.set(l,y),await this.persist()},this.delete=async(l,f)=>{this.isInitialized(),this.map.has(l)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:l,reason:f}),this.map.delete(l),await this.persist())},this.logger=Qe.generateChildLogger(t,this.name),this.storagePrefix=o,this.getKey=c}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){const{message:s}=he("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=he("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}}class $I{constructor(e,t){this.core=e,this.logger=t,this.name=uI,this.version=hI,this.events=new Au,this.initialized=!1,this.storagePrefix=Ri,this.ignoredPayloadTypes=[sn],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]},this.create=async()=>{this.isInitialized();const s=hu(),o=await this.core.crypto.setSymKey(s),c=kr(ve.FIVE_MINUTES),l={protocol:Kp},f={topic:o,expiry:c,relay:l,active:!1},y=QE({protocol:this.core.protocol,version:this.core.version,topic:o,symKey:s,relay:l});return await this.pairings.set(o,f),await this.core.relayer.subscribe(o),this.core.expirer.set(o,c),{topic:o,uri:y}},this.pair=async s=>{this.isInitialized(),this.isValidPair(s);const{topic:o,symKey:c,relay:l}=JE(s.uri);if(this.pairings.keys.includes(o))throw new Error(`Pairing already exists: ${o}`);if(this.core.crypto.hasKeys(o))throw new Error(`Keychain already exists: ${o}`);const f=kr(ve.FIVE_MINUTES),y={topic:o,relay:l,expiry:f,active:!1};return await this.pairings.set(o,y),await this.core.crypto.setSymKey(c,o),await this.core.relayer.subscribe(o,{relay:l}),this.core.expirer.set(o,f),s.activatePairing&&await this.activate({topic:o}),y},this.activate=async({topic:s})=>{this.isInitialized();const o=kr(ve.THIRTY_DAYS);await this.pairings.update(s,{active:!0,expiry:o}),this.core.expirer.set(s,o)},this.ping=async s=>{this.isInitialized(),await this.isValidPing(s);const{topic:o}=s;if(this.pairings.keys.includes(o)){const c=await this.sendRequest(o,"wc_pairingPing",{}),{done:l,resolve:f,reject:y}=Cn();this.events.once(qt("pairing_ping",c),({error:p})=>{p?y(p):f()}),await l()}},this.updateExpiry=async({topic:s,expiry:o})=>{this.isInitialized(),await this.pairings.update(s,{expiry:o})},this.updateMetadata=async({topic:s,metadata:o})=>{this.isInitialized(),await this.pairings.update(s,{peerMetadata:o})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async s=>{this.isInitialized(),await this.isValidDisconnect(s);const{topic:o}=s;this.pairings.keys.includes(o)&&(await this.sendRequest(o,"wc_pairingDelete",Rt("USER_DISCONNECTED")),await this.deletePairing(o))},this.sendRequest=async(s,o,c)=>{const l=ra(o,c),f=await this.core.crypto.encode(s,l),y=as[o].req;return this.core.history.set(s,l),this.core.relayer.publish(s,f,y),l.id},this.sendResult=async(s,o,c)=>{const l=ku(s,c),f=await this.core.crypto.encode(o,l),y=await this.core.history.get(o,s),p=as[y.request.method].res;await this.core.relayer.publish(o,f,p),await this.core.history.resolve(l)},this.sendError=async(s,o,c)=>{const l=ia(s,c),f=await this.core.crypto.encode(o,l),y=await this.core.history.get(o,s),p=as[y.request.method]?as[y.request.method].res:as.unregistered_method.res;await this.core.relayer.publish(o,f,p),await this.core.history.resolve(l)},this.deletePairing=async(s,o)=>{await this.core.relayer.unsubscribe(s),await Promise.all([this.pairings.delete(s,Rt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(s),o?Promise.resolve():this.core.expirer.del(s)])},this.cleanup=async()=>{const s=this.pairings.getAll().filter(o=>Ti(o.expiry));await Promise.all(s.map(o=>this.deletePairing(o.topic)))},this.onRelayEventRequest=s=>{const{topic:o,payload:c}=s,l=c.method;if(this.pairings.keys.includes(o))switch(l){case"wc_pairingPing":return this.onPairingPingRequest(o,c);case"wc_pairingDelete":return this.onPairingDeleteRequest(o,c);default:return this.onUnknownRpcMethodRequest(o,c)}},this.onRelayEventResponse=async s=>{const{topic:o,payload:c}=s,l=(await this.core.history.get(o,c.id)).request.method;if(this.pairings.keys.includes(o))switch(l){case"wc_pairingPing":return this.onPairingPingResponse(o,c);default:return this.onUnknownRpcMethodResponse(l)}},this.onPairingPingRequest=async(s,o)=>{const{id:c}=o;try{this.isValidPing({topic:s}),await this.sendResult(c,s,!0),this.events.emit("pairing_ping",{id:c,topic:s})}catch(l){await this.sendError(c,s,l),this.logger.error(l)}},this.onPairingPingResponse=(s,o)=>{const{id:c}=o;setTimeout(()=>{mi(o)?this.events.emit(qt("pairing_ping",c),{}):Gr(o)&&this.events.emit(qt("pairing_ping",c),{error:o.error})},500)},this.onPairingDeleteRequest=async(s,o)=>{const{id:c}=o;try{this.isValidDisconnect({topic:s}),await this.deletePairing(s),this.events.emit("pairing_delete",{id:c,topic:s})}catch(l){await this.sendError(c,s,l),this.logger.error(l)}},this.onUnknownRpcMethodRequest=async(s,o)=>{const{id:c,method:l}=o;try{if(this.registeredMethods.includes(l))return;const f=Rt("WC_METHOD_UNSUPPORTED",l);await this.sendError(c,s,f),this.logger.error(f)}catch(f){await this.sendError(c,s,f),this.logger.error(f)}},this.onUnknownRpcMethodResponse=s=>{this.registeredMethods.includes(s)||this.logger.error(Rt("WC_METHOD_UNSUPPORTED",s))},this.isValidPair=s=>{if(!_r(s)){const{message:o}=he("MISSING_OR_INVALID",`pair() params: ${s}`);throw new Error(o)}if(!c3(s.uri)){const{message:o}=he("MISSING_OR_INVALID",`pair() uri: ${s.uri}`);throw new Error(o)}},this.isValidPing=async s=>{if(!_r(s)){const{message:c}=he("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(c)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidDisconnect=async s=>{if(!_r(s)){const{message:c}=he("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(c)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidPairingTopic=async s=>{if(!Wt(s,!1)){const{message:o}=he("MISSING_OR_INVALID",`pairing topic should be a string: ${s}`);throw new Error(o)}if(!this.pairings.keys.includes(s)){const{message:o}=he("NO_MATCHING_KEY",`pairing topic doesn't exist: ${s}`);throw new Error(o)}if(Ti(this.pairings.get(s).expiry)){await this.deletePairing(s);const{message:o}=he("EXPIRED",`pairing topic: ${s}`);throw new Error(o)}},this.core=e,this.logger=Qe.generateChildLogger(t,this.name),this.pairings=new oa(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Qe.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Pt.message,async e=>{const{topic:t,message:s}=e;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(s)))return;const o=await this.core.crypto.decode(t,s);Gu(o)?(this.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o})):na(o)&&(await this.core.history.resolve(o),await this.onRelayEventResponse({topic:t,payload:o}),this.core.history.delete(t,o.id))})}registerExpirerEvents(){this.core.expirer.on(jr.expired,async e=>{const{topic:t}=hp(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit("pairing_expire",{topic:t}))})}}class FI extends iD{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new Lr.EventEmitter,this.name=lI,this.version=fI,this.cached=[],this.initialized=!1,this.storagePrefix=Ri,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.records.set(s.id,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(s,o,c)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:s,request:o,chainId:c}),this.records.has(o.id))return;const l={id:o.id,topic:s,request:{method:o.method,params:o.params||null},chainId:c,expiry:kr(ve.THIRTY_DAYS)};this.records.set(l.id,l),this.events.emit(ri.created,l)},this.resolve=async s=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:s}),!this.records.has(s.id))return;const o=await this.getRecord(s.id);typeof o.response>"u"&&(o.response=Gr(s)?{error:s.error}:{result:s.result},this.records.set(o.id,o),this.events.emit(ri.updated,o))},this.get=async(s,o)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:s,id:o}),await this.getRecord(o)),this.delete=(s,o)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:o}),this.values.forEach(c=>{if(c.topic===s){if(typeof o<"u"&&c.id!==o)return;this.records.delete(c.id),this.events.emit(ri.deleted,c)}})},this.exists=async(s,o)=>(this.isInitialized(),this.records.has(o)?(await this.getRecord(o)).topic===s:!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Qe.generateChildLogger(t,this.name)}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const s={topic:t.topic,request:ra(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(s)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:s}=he("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(ri.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=he("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(ri.created,e=>{const t=ri.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(ri.updated,e=>{const t=ri.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(ri.deleted,e=>{const t=ri.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.core.heartbeat.on(Un.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{ve.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}}class UI extends uD{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new Lr.EventEmitter,this.name=dI,this.version=pI,this.cached=[],this.initialized=!1,this.storagePrefix=Ri,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.expirations.set(s.target,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=s=>{try{const o=this.formatTarget(s);return typeof this.getExpiration(o)<"u"}catch{return!1}},this.set=(s,o)=>{this.isInitialized();const c=this.formatTarget(s),l={target:c,expiry:o};this.expirations.set(c,l),this.checkExpiry(c,l),this.events.emit(jr.created,{target:c,expiration:l})},this.get=s=>{this.isInitialized();const o=this.formatTarget(s);return this.getExpiration(o)},this.del=s=>{if(this.isInitialized(),this.has(s)){const o=this.formatTarget(s),c=this.getExpiration(o);this.expirations.delete(o),this.events.emit(jr.deleted,{target:o,expiration:c})}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Qe.generateChildLogger(t,this.name)}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return zE(e);if(typeof e=="number")return qE(e);const{message:t}=he("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(jr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=he("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:s}=he("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return t}checkExpiry(e,t){const{expiry:s}=t;ve.toMiliseconds(s)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(jr.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(Un.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(jr.created,e=>{const t=jr.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(jr.expired,e=>{const t=jr.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(jr.deleted,e=>{const t=jr.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}}class jI extends hD{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.name=Kc,this.initialized=!1,this.init=async s=>{op()||!Lu()||(this.verifyUrl=(s==null?void 0:s.verifyUrl)||ad,await this.createIframe())},this.register=async s=>{var o;if(this.initialized||await this.init(),!!this.iframe)try{(o=this.iframe.contentWindow)==null||o.postMessage(s.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${s.attestationId} ${this.verifyUrl}`)}catch{}},this.resolve=async s=>{var o;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${s.attestationId}`);const c=this.startAbortTimer(ve.FIVE_SECONDS),l=await fetch(`${this.verifyUrl}/attestation/${s.attestationId}`,{signal:this.abortController.signal});return clearTimeout(c),l.status===200?(o=await l.json())==null?void 0:o.origin:""},this.createIframe=async()=>{try{await Promise.race([new Promise((s,o)=>{if(document.getElementById(Kc))return s();const c=document.createElement("iframe");c.setAttribute("id",Kc),c.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),c.style.display="none",c.addEventListener("load",()=>{this.initialized=!0,s()}),c.addEventListener("error",l=>{o(l)}),document.body.append(c),this.iframe=c}),new Promise(s=>{setTimeout(()=>s("iframe load timeout"),ve.toMiliseconds(ve.ONE_SECOND/2))})])}catch(s){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(s)}},this.logger=Qe.generateChildLogger(t,this.name),this.verifyUrl=ad,this.abortController=new AbortController,this.isDevEnv=Mu()&&{}.IS_VITEST}get context(){return Qe.getLoggerContext(this.logger)}startAbortTimer(e){return setTimeout(()=>this.abortController.abort(),ve.toMiliseconds(e))}}var MI=Object.defineProperty,gd=Object.getOwnPropertySymbols,LI=Object.prototype.hasOwnProperty,BI=Object.prototype.propertyIsEnumerable,yd=(i,e,t)=>e in i?MI(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,vd=(i,e)=>{for(var t in e||(e={}))LI.call(e,t)&&yd(i,t,e[t]);if(gd)for(var t of gd(e))BI.call(e,t)&&yd(i,t,e[t]);return i};class Yu extends rD{constructor(e){super(e),this.protocol=Hp,this.version=zS,this.name=Wu,this.events=new Lr.EventEmitter,this.initialized=!1,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||Vp;const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Qe.pino(Qe.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||qS.logger}));this.logger=Qe.generateChildLogger(t,this.name),this.heartbeat=new Un.HeartBeat,this.crypto=new yI(this,this.logger,e==null?void 0:e.keychain),this.history=new FI(this,this.logger),this.expirer=new UI(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new o6(vd(vd({},HS),e==null?void 0:e.storageOptions)),this.relayer=new CI({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new $I(this,this.logger),this.verify=new jI(this.projectId||"",this.logger)}static async init(e){const t=new Yu(e);await t.initialize();const s=await t.crypto.getClientId();return await t.storage.setItem(sI,s),t}get context(){return Qe.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const zI=Yu,kp="wc",Gp=2,Wp="client",Ju=`${kp}@${Gp}:${Wp}:`,kc={name:Wp,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},qI="WALLETCONNECT_DEEPLINK_CHOICE",HI="proposal",Yp="Proposal expired",KI="session",No=ve.SEVEN_DAYS,VI="engine",us={wc_sessionPropose:{req:{ttl:ve.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ve.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ve.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1115}}},Gc={min:ve.FIVE_MINUTES,max:ve.SEVEN_DAYS},kI="request",GI=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var WI=Object.defineProperty,YI=Object.defineProperties,JI=Object.getOwnPropertyDescriptors,_d=Object.getOwnPropertySymbols,XI=Object.prototype.hasOwnProperty,ZI=Object.prototype.propertyIsEnumerable,md=(i,e,t)=>e in i?WI(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Ur=(i,e)=>{for(var t in e||(e={}))XI.call(e,t)&&md(i,t,e[t]);if(_d)for(var t of _d(e))ZI.call(e,t)&&md(i,t,e[t]);return i},Wc=(i,e)=>YI(i,JI(e));class QI extends fD{constructor(e){super(e),this.name=VI,this.events=new Au,this.initialized=!1,this.ignoredPayloadTypes=[sn],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(us)}),this.initialized=!0)},this.connect=async t=>{this.isInitialized();const s=Wc(Ur({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(s);const{pairingTopic:o,requiredNamespaces:c,optionalNamespaces:l,sessionProperties:f,relays:y}=s;let p=o,v,S=!1;if(p&&(S=this.client.core.pairing.pairings.get(p).active),!p||!S){const{topic:U,uri:P}=await this.client.core.pairing.create();p=U,v=P}const D=await this.client.core.crypto.generateKeyPair(),x=Ur({requiredNamespaces:c,optionalNamespaces:l,relays:y??[{protocol:Kp}],proposer:{publicKey:D,metadata:this.client.metadata}},f&&{sessionProperties:f}),{reject:O,resolve:z,done:H}=Cn(ve.FIVE_MINUTES,Yp);if(this.events.once(qt("session_connect"),async({error:U,session:P})=>{if(U)O(U);else if(P){P.self.publicKey=D;const N=Wc(Ur({},P),{requiredNamespaces:P.requiredNamespaces,optionalNamespaces:P.optionalNamespaces});await this.client.session.set(P.topic,N),await this.setExpiry(P.topic,P.expiry),p&&await this.client.core.pairing.updateMetadata({topic:p,metadata:P.peer.metadata}),z(N)}}),!p){const{message:U}=he("NO_MATCHING_KEY",`connect() pairing topic: ${p}`);throw new Error(U)}const ne=await this.sendRequest(p,"wc_sessionPropose",x),$=kr(ve.FIVE_MINUTES);return await this.setProposal(ne,Ur({id:ne,expiry:$},x)),{uri:v,approval:H}},this.pair=async t=>(this.isInitialized(),await this.client.core.pairing.pair(t)),this.approve=async t=>{this.isInitialized(),await this.isValidApprove(t);const{id:s,relayProtocol:o,namespaces:c,sessionProperties:l}=t,f=this.client.proposal.get(s);let{pairingTopic:y,proposer:p,requiredNamespaces:v,optionalNamespaces:S}=f;y=y||"",Nn(v)||(v=i3(c,"approve()"));const D=await this.client.core.crypto.generateKeyPair(),x=p.publicKey,O=await this.client.core.crypto.generateSharedKey(D,x);y&&s&&(await this.client.core.pairing.updateMetadata({topic:y,metadata:p.metadata}),await this.sendResult(s,y,{relay:{protocol:o??"irn"},responderPublicKey:D}),await this.client.proposal.delete(s,Rt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:y}));const z=Ur({relay:{protocol:o??"irn"},namespaces:c,requiredNamespaces:v,optionalNamespaces:S,pairingTopic:y,controller:{publicKey:D,metadata:this.client.metadata},expiry:kr(No)},l&&{sessionProperties:l});await this.client.core.relayer.subscribe(O),await this.sendRequest(O,"wc_sessionSettle",z);const H=Wc(Ur({},z),{topic:O,pairingTopic:y,acknowledged:!1,self:z.controller,peer:{publicKey:p.publicKey,metadata:p.metadata},controller:D});return await this.client.session.set(O,H),await this.setExpiry(O,kr(No)),{topic:O,acknowledged:()=>new Promise(ne=>setTimeout(()=>ne(this.client.session.get(O)),500))}},this.reject=async t=>{this.isInitialized(),await this.isValidReject(t);const{id:s,reason:o}=t,{pairingTopic:c}=this.client.proposal.get(s);c&&(await this.sendError(s,c,o),await this.client.proposal.delete(s,Rt("USER_DISCONNECTED")))},this.update=async t=>{this.isInitialized(),await this.isValidUpdate(t);const{topic:s,namespaces:o}=t,c=await this.sendRequest(s,"wc_sessionUpdate",{namespaces:o}),{done:l,resolve:f,reject:y}=Cn();return this.events.once(qt("session_update",c),({error:p})=>{p?y(p):f()}),await this.client.session.update(s,{namespaces:o}),{acknowledged:l}},this.extend=async t=>{this.isInitialized(),await this.isValidExtend(t);const{topic:s}=t,o=await this.sendRequest(s,"wc_sessionExtend",{}),{done:c,resolve:l,reject:f}=Cn();return this.events.once(qt("session_extend",o),({error:y})=>{y?f(y):l()}),await this.setExpiry(s,kr(No)),{acknowledged:c}},this.request=async t=>{this.isInitialized(),await this.isValidRequest(t);const{chainId:s,request:o,topic:c,expiry:l}=t,f=await this.sendRequest(c,"wc_sessionRequest",{request:o,chainId:s},l),{done:y,resolve:p,reject:v}=Cn(l);this.events.once(qt("session_request",f),({error:D,result:x})=>{D?v(D):p(x)}),this.client.events.emit("session_request_sent",{topic:c,request:o,chainId:s,id:f});const S=await this.client.core.storage.getItem(qI);return HE({id:f,topic:c,wcDeepLink:S}),await y()},this.respond=async t=>{this.isInitialized(),await this.isValidRespond(t);const{topic:s,response:o}=t,{id:c}=o;mi(o)?await this.sendResult(c,s,o.result):Gr(o)&&await this.sendError(c,s,o.error),this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0})},this.ping=async t=>{this.isInitialized(),await this.isValidPing(t);const{topic:s}=t;if(this.client.session.keys.includes(s)){const o=await this.sendRequest(s,"wc_sessionPing",{}),{done:c,resolve:l,reject:f}=Cn();this.events.once(qt("session_ping",o),({error:y})=>{y?f(y):l()}),await c()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async t=>{this.isInitialized(),await this.isValidEmit(t);const{topic:s,event:o,chainId:c}=t;await this.sendRequest(s,"wc_sessionEvent",{event:o,chainId:c})},this.disconnect=async t=>{this.isInitialized(),await this.isValidDisconnect(t);const{topic:s}=t;if(this.client.session.keys.includes(s)){const o=Vu().toString();let c;const l=f=>{(f==null?void 0:f.id.toString())===o&&(this.client.core.relayer.events.removeListener(Pt.message_ack,l),c())};await Promise.all([new Promise(f=>{c=f,this.client.core.relayer.on(Pt.message_ack,l)}),this.sendRequest(s,"wc_sessionDelete",Rt("USER_DISCONNECTED"),void 0,o)]),await this.deleteSession(s)}else await this.client.core.pairing.disconnect({topic:s})},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter(s=>o3(s,t))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{const s=this.client.core.pairing.pairings.get(t.pairingTopic),o=this.client.core.pairing.pairings.getAll().filter(c=>{var l,f;return((l=c.peerMetadata)==null?void 0:l.url)&&((f=c.peerMetadata)==null?void 0:f.url)===t.peer.metadata.url&&c.topic&&c.topic!==s.topic});if(o.length===0)return;this.client.logger.info(`Cleaning up ${o.length} duplicate pairing(s)`),await Promise.all(o.map(c=>this.client.core.pairing.disconnect({topic:c.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(s){this.client.logger.error(s)}},this.deleteSession=async(t,s)=>{const{self:o}=this.client.session.get(t);await this.client.core.relayer.unsubscribe(t),this.client.session.delete(t,Rt("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(t)&&await this.client.core.crypto.deleteSymKey(t),s||this.client.core.expirer.del(t)},this.deleteProposal=async(t,s)=>{await Promise.all([this.client.proposal.delete(t,Rt("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(t)])},this.deletePendingSessionRequest=async(t,s,o=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,s),o?Promise.resolve():this.client.core.expirer.del(t)])},this.setExpiry=async(t,s)=>{this.client.session.keys.includes(t)&&await this.client.session.update(t,{expiry:s}),this.client.core.expirer.set(t,s)},this.setProposal=async(t,s)=>{await this.client.proposal.set(t,s),this.client.core.expirer.set(t,s.expiry)},this.setPendingSessionRequest=async t=>{const s=us.wc_sessionRequest.req.ttl,{id:o,topic:c,params:l}=t;await this.client.pendingRequest.set(o,{id:o,topic:c,params:l}),s&&this.client.core.expirer.set(o,kr(s))},this.sendRequest=async(t,s,o,c,l)=>{const f=ra(s,o);if(Lu()&&GI.includes(s)){const v=Tn(JSON.stringify(f));await this.client.core.verify.register({attestationId:v})}const y=await this.client.core.crypto.encode(t,f),p=us[s].req;return c&&(p.ttl=c),l&&(p.id=l),this.client.core.history.set(t,f),this.client.core.relayer.publish(t,y,p),f.id},this.sendResult=async(t,s,o)=>{const c=ku(t,o),l=await this.client.core.crypto.encode(s,c),f=await this.client.core.history.get(s,t),y=us[f.request.method].res;this.client.core.relayer.publish(s,l,y),await this.client.core.history.resolve(c)},this.sendError=async(t,s,o)=>{const c=ia(t,o),l=await this.client.core.crypto.encode(s,c),f=await this.client.core.history.get(s,t),y=us[f.request.method].res;this.client.core.relayer.publish(s,l,y),await this.client.core.history.resolve(c)},this.cleanup=async()=>{const t=[],s=[];this.client.session.getAll().forEach(o=>{Ti(o.expiry)&&t.push(o.topic)}),this.client.proposal.getAll().forEach(o=>{Ti(o.expiry)&&s.push(o.id)}),await Promise.all([...t.map(o=>this.deleteSession(o)),...s.map(o=>this.deleteProposal(o))])},this.onRelayEventRequest=t=>{const{topic:s,payload:o}=t,c=o.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeRequest(s,o);case"wc_sessionSettle":return this.onSessionSettleRequest(s,o);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,o);case"wc_sessionExtend":return this.onSessionExtendRequest(s,o);case"wc_sessionPing":return this.onSessionPingRequest(s,o);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,o);case"wc_sessionRequest":return this.onSessionRequest(s,o);case"wc_sessionEvent":return this.onSessionEventRequest(s,o);default:return this.client.logger.info(`Unsupported request method ${c}`)}},this.onRelayEventResponse=async t=>{const{topic:s,payload:o}=t,c=(await this.client.core.history.get(s,o.id)).request.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeResponse(s,o);case"wc_sessionSettle":return this.onSessionSettleResponse(s,o);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,o);case"wc_sessionExtend":return this.onSessionExtendResponse(s,o);case"wc_sessionPing":return this.onSessionPingResponse(s,o);case"wc_sessionRequest":return this.onSessionRequestResponse(s,o);default:return this.client.logger.info(`Unsupported response method ${c}`)}},this.onRelayEventUnknownPayload=t=>{const{topic:s}=t,{message:o}=he("MISSING_OR_INVALID",`Decoded payload on topic ${s} is not identifiable as a JSON-RPC request or a response.`);throw new Error(o)},this.onSessionProposeRequest=async(t,s)=>{const{params:o,id:c}=s;try{this.isValidConnect(Ur({},s.params));const l=kr(ve.FIVE_MINUTES),f=Ur({id:c,pairingTopic:t,expiry:l},o);await this.setProposal(c,f);const y=Tn(JSON.stringify(s)),p=await this.getVerifyContext(y,f.proposer.metadata);this.client.events.emit("session_proposal",{id:c,params:f,verifyContext:p})}catch(l){await this.sendError(c,t,l),this.client.logger.error(l)}},this.onSessionProposeResponse=async(t,s)=>{const{id:o}=s;if(mi(s)){const{result:c}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:c});const l=this.client.proposal.get(o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:l});const f=l.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:f});const y=c.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:y});const p=await this.client.core.crypto.generateSharedKey(f,y);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:p});const v=await this.client.core.relayer.subscribe(p);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:v}),await this.client.core.pairing.activate({topic:t})}else Gr(s)&&(await this.client.proposal.delete(o,Rt("USER_DISCONNECTED")),this.events.emit(qt("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(t,s)=>{const{id:o,params:c}=s;try{this.isValidSessionSettleRequest(c);const{relay:l,controller:f,expiry:y,namespaces:p,requiredNamespaces:v,optionalNamespaces:S,sessionProperties:D,pairingTopic:x}=s.params,O=Ur({topic:t,relay:l,expiry:y,namespaces:p,acknowledged:!0,pairingTopic:x,requiredNamespaces:v,optionalNamespaces:S,controller:f.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:f.publicKey,metadata:f.metadata}},D&&{sessionProperties:D});await this.sendResult(s.id,t,!0),this.events.emit(qt("session_connect"),{session:O}),this.cleanupDuplicatePairings(O)}catch(l){await this.sendError(o,t,l),this.client.logger.error(l)}},this.onSessionSettleResponse=async(t,s)=>{const{id:o}=s;mi(s)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(qt("session_approve",o),{})):Gr(s)&&(await this.client.session.delete(t,Rt("USER_DISCONNECTED")),this.events.emit(qt("session_approve",o),{error:s.error}))},this.onSessionUpdateRequest=async(t,s)=>{const{params:o,id:c}=s;try{this.isValidUpdate(Ur({topic:t},o)),await this.client.session.update(t,{namespaces:o.namespaces}),await this.sendResult(c,t,!0),this.client.events.emit("session_update",{id:c,topic:t,params:o})}catch(l){await this.sendError(c,t,l),this.client.logger.error(l)}},this.onSessionUpdateResponse=(t,s)=>{const{id:o}=s;mi(s)?this.events.emit(qt("session_update",o),{}):Gr(s)&&this.events.emit(qt("session_update",o),{error:s.error})},this.onSessionExtendRequest=async(t,s)=>{const{id:o}=s;try{this.isValidExtend({topic:t}),await this.setExpiry(t,kr(No)),await this.sendResult(o,t,!0),this.client.events.emit("session_extend",{id:o,topic:t})}catch(c){await this.sendError(o,t,c),this.client.logger.error(c)}},this.onSessionExtendResponse=(t,s)=>{const{id:o}=s;mi(s)?this.events.emit(qt("session_extend",o),{}):Gr(s)&&this.events.emit(qt("session_extend",o),{error:s.error})},this.onSessionPingRequest=async(t,s)=>{const{id:o}=s;try{this.isValidPing({topic:t}),await this.sendResult(o,t,!0),this.client.events.emit("session_ping",{id:o,topic:t})}catch(c){await this.sendError(o,t,c),this.client.logger.error(c)}},this.onSessionPingResponse=(t,s)=>{const{id:o}=s;setTimeout(()=>{mi(s)?this.events.emit(qt("session_ping",o),{}):Gr(s)&&this.events.emit(qt("session_ping",o),{error:s.error})},500)},this.onSessionDeleteRequest=async(t,s)=>{const{id:o}=s;try{this.isValidDisconnect({topic:t,reason:s.params}),await Promise.all([new Promise(c=>{this.client.core.relayer.once(Pt.publish,async()=>{c(await this.deleteSession(t))})}),this.sendResult(o,t,!0)]),this.client.events.emit("session_delete",{id:o,topic:t})}catch(c){this.client.logger.error(c)}},this.onSessionRequest=async(t,s)=>{const{id:o,params:c}=s;try{this.isValidRequest(Ur({topic:t},c)),await this.setPendingSessionRequest({id:o,topic:t,params:c});const l=Tn(JSON.stringify(s)),f=this.client.session.get(t),y=await this.getVerifyContext(l,f.peer.metadata);this.client.events.emit("session_request",{id:o,topic:t,params:c,verifyContext:y})}catch(l){await this.sendError(o,t,l),this.client.logger.error(l)}},this.onSessionRequestResponse=(t,s)=>{const{id:o}=s;mi(s)?this.events.emit(qt("session_request",o),{result:s.result}):Gr(s)&&this.events.emit(qt("session_request",o),{error:s.error})},this.onSessionEventRequest=async(t,s)=>{const{id:o,params:c}=s;try{this.isValidEmit(Ur({topic:t},c)),this.client.events.emit("session_event",{id:o,topic:t,params:c})}catch(l){await this.sendError(o,t,l),this.client.logger.error(l)}},this.isValidConnect=async t=>{if(!_r(t)){const{message:y}=he("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(y)}const{pairingTopic:s,requiredNamespaces:o,optionalNamespaces:c,sessionProperties:l,relays:f}=t;if(cr(s)||await this.isValidPairingTopic(s),!_3(f,!0)){const{message:y}=he("MISSING_OR_INVALID",`connect() relays: ${f}`);throw new Error(y)}!cr(o)&&Nn(o)!==0&&this.validateNamespaces(o,"requiredNamespaces"),!cr(c)&&Nn(c)!==0&&this.validateNamespaces(c,"optionalNamespaces"),cr(l)||this.validateSessionProps(l,"sessionProperties")},this.validateNamespaces=(t,s)=>{const o=v3(t,"connect()",s);if(o)throw new Error(o.message)},this.isValidApprove=async t=>{if(!_r(t))throw new Error(he("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:s,namespaces:o,relayProtocol:c,sessionProperties:l}=t;await this.isValidProposalId(s);const f=this.client.proposal.get(s),y=jo(o,"approve()");if(y)throw new Error(y.message);const p=Af(f.requiredNamespaces,o,"approve()");if(p)throw new Error(p.message);if(!Wt(c,!0)){const{message:v}=he("MISSING_OR_INVALID",`approve() relayProtocol: ${c}`);throw new Error(v)}cr(l)||this.validateSessionProps(l,"sessionProperties")},this.isValidReject=async t=>{if(!_r(t)){const{message:c}=he("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(c)}const{id:s,reason:o}=t;if(await this.isValidProposalId(s),!b3(o)){const{message:c}=he("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(o)}`);throw new Error(c)}},this.isValidSessionSettleRequest=t=>{if(!_r(t)){const{message:p}=he("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(p)}const{relay:s,controller:o,namespaces:c,expiry:l}=t;if(!fp(s)){const{message:p}=he("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(p)}const f=l3(o,"onSessionSettleRequest()");if(f)throw new Error(f.message);const y=jo(c,"onSessionSettleRequest()");if(y)throw new Error(y.message);if(Ti(l)){const{message:p}=he("EXPIRED","onSessionSettleRequest()");throw new Error(p)}},this.isValidUpdate=async t=>{if(!_r(t)){const{message:y}=he("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(y)}const{topic:s,namespaces:o}=t;await this.isValidSessionTopic(s);const c=this.client.session.get(s),l=jo(o,"update()");if(l)throw new Error(l.message);const f=Af(c.requiredNamespaces,o,"update()");if(f)throw new Error(f.message)},this.isValidExtend=async t=>{if(!_r(t)){const{message:o}=he("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionTopic(s)},this.isValidRequest=async t=>{if(!_r(t)){const{message:y}=he("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(y)}const{topic:s,request:o,chainId:c,expiry:l}=t;await this.isValidSessionTopic(s);const{namespaces:f}=this.client.session.get(s);if(!Pf(f,c)){const{message:y}=he("MISSING_OR_INVALID",`request() chainId: ${c}`);throw new Error(y)}if(!w3(o)){const{message:y}=he("MISSING_OR_INVALID",`request() ${JSON.stringify(o)}`);throw new Error(y)}if(!S3(f,c,o.method)){const{message:y}=he("MISSING_OR_INVALID",`request() method: ${o.method}`);throw new Error(y)}if(l&&!P3(l,Gc)){const{message:y}=he("MISSING_OR_INVALID",`request() expiry: ${l}. Expiry must be a number (in seconds) between ${Gc.min} and ${Gc.max}`);throw new Error(y)}},this.isValidRespond=async t=>{if(!_r(t)){const{message:c}=he("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(c)}const{topic:s,response:o}=t;if(await this.isValidSessionTopic(s),!E3(o)){const{message:c}=he("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(o)}`);throw new Error(c)}},this.isValidPing=async t=>{if(!_r(t)){const{message:o}=he("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async t=>{if(!_r(t)){const{message:f}=he("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(f)}const{topic:s,event:o,chainId:c}=t;await this.isValidSessionTopic(s);const{namespaces:l}=this.client.session.get(s);if(!Pf(l,c)){const{message:f}=he("MISSING_OR_INVALID",`emit() chainId: ${c}`);throw new Error(f)}if(!D3(o)){const{message:f}=he("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(f)}if(!I3(l,c,o.name)){const{message:f}=he("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(f)}},this.isValidDisconnect=async t=>{if(!_r(t)){const{message:o}=he("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionOrPairingTopic(s)},this.getVerifyContext=async(t,s)=>{const o={verified:{verifyUrl:s.verifyUrl||"",validation:"UNKNOWN",origin:s.url||""}};try{const c=await this.client.core.verify.resolve({attestationId:t,verifyUrl:s.verifyUrl});c&&(o.verified.origin=c,o.verified.validation=c===s.url?"VALID":"INVALID")}catch(c){this.client.logger.error(c)}return this.client.logger.info(`Verify context: ${JSON.stringify(o)}`),o},this.validateSessionProps=(t,s)=>{Object.values(t).forEach(o=>{if(!Wt(o,!1)){const{message:c}=he("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(o)}`);throw new Error(c)}})}}isInitialized(){if(!this.initialized){const{message:e}=he("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.client.core.relayer.on(Pt.message,async e=>{const{topic:t,message:s}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;const o=await this.client.core.crypto.decode(t,s);Gu(o)?(this.client.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o})):na(o)?(await this.client.core.history.resolve(o),await this.onRelayEventResponse({topic:t,payload:o}),this.client.core.history.delete(t,o.id)):this.onRelayEventUnknownPayload({topic:t,payload:o})})}registerExpirerEvents(){this.client.core.expirer.on(jr.expired,async e=>{const{topic:t,id:s}=hp(e.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,he("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession(t,!0),this.client.events.emit("session_expire",{topic:t})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))})}isValidPairingTopic(e){if(!Wt(e,!1)){const{message:t}=he("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=he("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Ti(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=he("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!Wt(e,!1)){const{message:t}=he("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(!this.client.session.keys.includes(e)){const{message:t}=he("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(Ti(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:t}=he("EXPIRED",`session topic: ${e}`);throw new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Wt(e,!1)){const{message:t}=he("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=he("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!m3(e)){const{message:t}=he("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=he("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(Ti(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:t}=he("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class e5 extends oa{constructor(e,t){super(e,t,HI,Ju),this.core=e,this.logger=t}}class t5 extends oa{constructor(e,t){super(e,t,KI,Ju),this.core=e,this.logger=t}}class r5 extends oa{constructor(e,t){super(e,t,kI,Ju,s=>s.id),this.core=e,this.logger=t}}let i5=class Jp extends lD{constructor(e){super(e),this.protocol=kp,this.version=Gp,this.name=kc.name,this.events=new Lr.EventEmitter,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(o){throw this.logger.error(o.message),o}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(o){throw this.logger.error(o.message),o}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(o){throw this.logger.error(o.message),o}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(o){throw this.logger.error(o.message),o}},this.update=async s=>{try{return await this.engine.update(s)}catch(o){throw this.logger.error(o.message),o}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(o){throw this.logger.error(o.message),o}},this.request=async s=>{try{return await this.engine.request(s)}catch(o){throw this.logger.error(o.message),o}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(o){throw this.logger.error(o.message),o}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(o){throw this.logger.error(o.message),o}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(o){throw this.logger.error(o.message),o}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(o){throw this.logger.error(o.message),o}},this.find=s=>{try{return this.engine.find(s)}catch(o){throw this.logger.error(o.message),o}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=(e==null?void 0:e.name)||kc.name,this.metadata=(e==null?void 0:e.metadata)||UE();const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Qe.pino(Qe.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||kc.logger}));this.core=(e==null?void 0:e.core)||new zI(e),this.logger=Qe.generateChildLogger(t,this.name),this.session=new t5(this.core,this.logger),this.proposal=new e5(this.core,this.logger),this.pendingRequest=new r5(this.core,this.logger),this.engine=new QI(this)}static async init(e){const t=new Jp(e);return await t.initialize(),t}get context(){return Qe.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var Su={exports:{}};(function(i,e){var t=typeof self<"u"?self:Wr,s=function(){function c(){this.fetch=!1,this.DOMException=t.DOMException}return c.prototype=t,new c}();(function(c){(function(l){var f={searchParams:"URLSearchParams"in c,iterable:"Symbol"in c&&"iterator"in Symbol,blob:"FileReader"in c&&"Blob"in c&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in c,arrayBuffer:"ArrayBuffer"in c};function y(w){return w&&DataView.prototype.isPrototypeOf(w)}if(f.arrayBuffer)var p=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],v=ArrayBuffer.isView||function(w){return w&&p.indexOf(Object.prototype.toString.call(w))>-1};function S(w){if(typeof w!="string"&&(w=String(w)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(w))throw new TypeError("Invalid character in header field name");return w.toLowerCase()}function D(w){return typeof w!="string"&&(w=String(w)),w}function x(w){var C={next:function(){var ee=w.shift();return{done:ee===void 0,value:ee}}};return f.iterable&&(C[Symbol.iterator]=function(){return C}),C}function O(w){this.map={},w instanceof O?w.forEach(function(C,ee){this.append(ee,C)},this):Array.isArray(w)?w.forEach(function(C){this.append(C[0],C[1])},this):w&&Object.getOwnPropertyNames(w).forEach(function(C){this.append(C,w[C])},this)}O.prototype.append=function(w,C){w=S(w),C=D(C);var ee=this.map[w];this.map[w]=ee?ee+", "+C:C},O.prototype.delete=function(w){delete this.map[S(w)]},O.prototype.get=function(w){return w=S(w),this.has(w)?this.map[w]:null},O.prototype.has=function(w){return this.map.hasOwnProperty(S(w))},O.prototype.set=function(w,C){this.map[S(w)]=D(C)},O.prototype.forEach=function(w,C){for(var ee in this.map)this.map.hasOwnProperty(ee)&&w.call(C,this.map[ee],ee,this)},O.prototype.keys=function(){var w=[];return this.forEach(function(C,ee){w.push(ee)}),x(w)},O.prototype.values=function(){var w=[];return this.forEach(function(C){w.push(C)}),x(w)},O.prototype.entries=function(){var w=[];return this.forEach(function(C,ee){w.push([ee,C])}),x(w)},f.iterable&&(O.prototype[Symbol.iterator]=O.prototype.entries);function z(w){if(w.bodyUsed)return Promise.reject(new TypeError("Already read"));w.bodyUsed=!0}function H(w){return new Promise(function(C,ee){w.onload=function(){C(w.result)},w.onerror=function(){ee(w.error)}})}function ne(w){var C=new FileReader,ee=H(C);return C.readAsArrayBuffer(w),ee}function $(w){var C=new FileReader,ee=H(C);return C.readAsText(w),ee}function U(w){for(var C=new Uint8Array(w),ee=new Array(C.length),X=0;X<C.length;X++)ee[X]=String.fromCharCode(C[X]);return ee.join("")}function P(w){if(w.slice)return w.slice(0);var C=new Uint8Array(w.byteLength);return C.set(new Uint8Array(w)),C.buffer}function N(){return this.bodyUsed=!1,this._initBody=function(w){this._bodyInit=w,w?typeof w=="string"?this._bodyText=w:f.blob&&Blob.prototype.isPrototypeOf(w)?this._bodyBlob=w:f.formData&&FormData.prototype.isPrototypeOf(w)?this._bodyFormData=w:f.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)?this._bodyText=w.toString():f.arrayBuffer&&f.blob&&y(w)?(this._bodyArrayBuffer=P(w.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):f.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(w)||v(w))?this._bodyArrayBuffer=P(w):this._bodyText=w=Object.prototype.toString.call(w):this._bodyText="",this.headers.get("content-type")||(typeof w=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},f.blob&&(this.blob=function(){var w=z(this);if(w)return w;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?z(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(ne)}),this.text=function(){var w=z(this);if(w)return w;if(this._bodyBlob)return $(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(U(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},f.formData&&(this.formData=function(){return this.text().then(G)}),this.json=function(){return this.text().then(JSON.parse)},this}var E=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function u(w){var C=w.toUpperCase();return E.indexOf(C)>-1?C:w}function b(w,C){C=C||{};var ee=C.body;if(w instanceof b){if(w.bodyUsed)throw new TypeError("Already read");this.url=w.url,this.credentials=w.credentials,C.headers||(this.headers=new O(w.headers)),this.method=w.method,this.mode=w.mode,this.signal=w.signal,!ee&&w._bodyInit!=null&&(ee=w._bodyInit,w.bodyUsed=!0)}else this.url=String(w);if(this.credentials=C.credentials||this.credentials||"same-origin",(C.headers||!this.headers)&&(this.headers=new O(C.headers)),this.method=u(C.method||this.method||"GET"),this.mode=C.mode||this.mode||null,this.signal=C.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&ee)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(ee)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})};function G(w){var C=new FormData;return w.trim().split("&").forEach(function(ee){if(ee){var X=ee.split("="),V=X.shift().replace(/\+/g," "),k=X.join("=").replace(/\+/g," ");C.append(decodeURIComponent(V),decodeURIComponent(k))}}),C}function W(w){var C=new O,ee=w.replace(/\r?\n[\t ]+/g," ");return ee.split(/\r?\n/).forEach(function(X){var V=X.split(":"),k=V.shift().trim();if(k){var J=V.join(":").trim();C.append(k,J)}}),C}N.call(b.prototype);function se(w,C){C||(C={}),this.type="default",this.status=C.status===void 0?200:C.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in C?C.statusText:"OK",this.headers=new O(C.headers),this.url=C.url||"",this._initBody(w)}N.call(se.prototype),se.prototype.clone=function(){return new se(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new O(this.headers),url:this.url})},se.error=function(){var w=new se(null,{status:0,statusText:""});return w.type="error",w};var ce=[301,302,303,307,308];se.redirect=function(w,C){if(ce.indexOf(C)===-1)throw new RangeError("Invalid status code");return new se(null,{status:C,headers:{location:w}})},l.DOMException=c.DOMException;try{new l.DOMException}catch{l.DOMException=function(C,ee){this.message=C,this.name=ee;var X=Error(C);this.stack=X.stack},l.DOMException.prototype=Object.create(Error.prototype),l.DOMException.prototype.constructor=l.DOMException}function de(w,C){return new Promise(function(ee,X){var V=new b(w,C);if(V.signal&&V.signal.aborted)return X(new l.DOMException("Aborted","AbortError"));var k=new XMLHttpRequest;function J(){k.abort()}k.onload=function(){var re={status:k.status,statusText:k.statusText,headers:W(k.getAllResponseHeaders()||"")};re.url="responseURL"in k?k.responseURL:re.headers.get("X-Request-URL");var be="response"in k?k.response:k.responseText;ee(new se(be,re))},k.onerror=function(){X(new TypeError("Network request failed"))},k.ontimeout=function(){X(new TypeError("Network request failed"))},k.onabort=function(){X(new l.DOMException("Aborted","AbortError"))},k.open(V.method,V.url,!0),V.credentials==="include"?k.withCredentials=!0:V.credentials==="omit"&&(k.withCredentials=!1),"responseType"in k&&f.blob&&(k.responseType="blob"),V.headers.forEach(function(re,be){k.setRequestHeader(be,re)}),V.signal&&(V.signal.addEventListener("abort",J),k.onreadystatechange=function(){k.readyState===4&&V.signal.removeEventListener("abort",J)}),k.send(typeof V._bodyInit>"u"?null:V._bodyInit)})}return de.polyfill=!0,c.fetch||(c.fetch=de,c.Headers=O,c.Request=b,c.Response=se),l.Headers=O,l.Request=b,l.Response=se,l.fetch=de,Object.defineProperty(l,"__esModule",{value:!0}),l})({})})(s),s.fetch.ponyfill=!0,delete s.fetch.polyfill;var o=s;e=o.fetch,e.default=o.fetch,e.fetch=o.fetch,e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response,i.exports=e})(Su,Su.exports);var n5=Su.exports;const bd=Rd(n5),s5={Accept:"application/json","Content-Type":"application/json"},o5="POST",wd={headers:s5,method:o5},Ed=10;class cn{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new Lr.EventEmitter,this.isAvailable=!1,this.registering=!1,!Yf(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e,t){this.isAvailable||await this.register();try{const s=rn(e),c=await(await bd(this.url,Object.assign(Object.assign({},wd),{body:s}))).json();this.onPayload({data:c})}catch(s){this.onError(e.id,s)}}async register(e=this.url){if(!Yf(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((s,o)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),o(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return o(new Error("HTTP connection is missing or invalid"));s()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=rn({id:1,jsonrpc:"2.0",method:"test",params:[]});await bd(e,Object.assign(Object.assign({},wd),{body:t}))}this.onOpen()}catch(t){const s=this.parseError(t);throw this.events.emit("register_error",s),this.onClose(),s}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?Ds(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const s=this.parseError(t),o=s.message||s.toString(),c=ia(e,o);this.events.emit("payload",c)}parseError(e,t=this.url){return xp(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Ed&&this.events.setMaxListeners(Ed)}}const Dd="error",a5="wss://relay.walletconnect.com",c5="wc",u5="universal_provider",Sd=`${c5}@2:${u5}:`,h5="https://rpc.walletconnect.com/v1",Ui={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var hs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Iu={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(i,e){(function(){var t,s="4.17.21",o=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",f="Invalid `variable` option passed into `_.template`",y="__lodash_hash_undefined__",p=500,v="__lodash_placeholder__",S=1,D=2,x=4,O=1,z=2,H=1,ne=2,$=4,U=8,P=16,N=32,E=64,u=128,b=256,G=512,W=30,se="...",ce=800,de=16,w=1,C=2,ee=3,X=1/0,V=9007199254740991,k=17976931348623157e292,J=0/0,re=4294967295,be=re-1,oe=re>>>1,we=[["ary",u],["bind",H],["bindKey",ne],["curry",U],["curryRight",P],["flip",G],["partial",N],["partialRight",E],["rearg",b]],le="[object Arguments]",_e="[object Array]",q="[object AsyncFunction]",B="[object Boolean]",F="[object Date]",d="[object DOMException]",T="[object Error]",ae="[object Function]",fe="[object GeneratorFunction]",Ie="[object Map]",qe="[object Number]",Ve="[object Null]",je="[object Object]",pt="[object Promise]",gt="[object Proxy]",Le="[object RegExp]",xe="[object Set]",Re="[object String]",$e="[object Symbol]",Be="[object Undefined]",Pe="[object WeakMap]",Fe="[object WeakSet]",Se="[object ArrayBuffer]",Ae="[object DataView]",He="[object Float32Array]",Oe="[object Float64Array]",ke="[object Int8Array]",We="[object Int16Array]",et="[object Int32Array]",tt="[object Uint8Array]",Je="[object Uint8ClampedArray]",tr="[object Uint16Array]",lr="[object Uint32Array]",Yr=/\b__p \+= '';/g,rr=/\b(__p \+=) '' \+/g,si=/(__e\(.*?\)|\b__t\)) \+\n'';/g,bi=/&(?:amp|lt|gt|quot|#39);/g,ji=/[&<>"']/g,wt=RegExp(bi.source),yt=RegExp(ji.source),Et=/<%-([\s\S]+?)%>/g,Dt=/<%([\s\S]+?)%>/g,mt=/<%=([\s\S]+?)%>/g,vt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ft=/^\w*$/,Ut=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,St=/[\\^$.*+?()[\]{}|]/g,jt=RegExp(St.source),It=/^\s+/,At=/\s/,xt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ht=/\{\n\/\* \[wrapped with (.+)\] \*/,Mt=/,? & /,Lt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,aa=/[()=,{}\[\]\/\s]/,ca=/\\(\\)?/g,ua=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Or=/\w*$/,ha=/^[-+]0x[0-9a-f]+$/i,la=/^0b[01]+$/i,fa=/^\[object .+?Constructor\]$/,da=/^0o[0-7]+$/i,pa=/^(?:0|[1-9]\d*)$/,oi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,un=/($^)/,ga=/['\n\r\u2028\u2029\\]/g,hn="\\ud800-\\udfff",ya="\\u0300-\\u036f",va="\\ufe20-\\ufe2f",ln="\\u20d0-\\u20ff",Is=ya+va+ln,xs="\\u2700-\\u27bf",Br="a-z\\xdf-\\xf6\\xf8-\\xff",_a="\\xac\\xb1\\xd7\\xf7",ma="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ba="\\u2000-\\u206f",wa=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Os="A-Z\\xc0-\\xd6\\xd8-\\xde",Ps="\\ufe0e\\ufe0f",Mi=_a+ma+ba+wa,jn="['’]",Li="["+hn+"]",Mn="["+Mi+"]",Bi="["+Is+"]",As="\\d+",Ea="["+xs+"]",Cs="["+Br+"]",Ts="[^"+hn+Mi+As+xs+Br+Os+"]",fn="\\ud83c[\\udffb-\\udfff]",Da="(?:"+Bi+"|"+fn+")",Ns="[^"+hn+"]",dn="(?:\\ud83c[\\udde6-\\uddff]){2}",wi="[\\ud800-\\udbff][\\udc00-\\udfff]",br="["+Os+"]",Rs="\\u200d",$s="(?:"+Cs+"|"+Ts+")",Jr="(?:"+br+"|"+Ts+")",Fs="(?:"+jn+"(?:d|ll|m|re|s|t|ve))?",Us="(?:"+jn+"(?:D|LL|M|RE|S|T|VE))?",js=Da+"?",Ms="["+Ps+"]?",Sa="(?:"+Rs+"(?:"+[Ns,dn,wi].join("|")+")"+Ms+js+")*",ai="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ls="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Bs=Ms+js+Sa,pn="(?:"+[Ea,dn,wi].join("|")+")"+Bs,Ia="(?:"+[Ns+Bi+"?",Bi,dn,wi,Li].join("|")+")",Ln=RegExp(jn,"g"),xa=RegExp(Bi,"g"),gn=RegExp(fn+"(?="+fn+")|"+Ia+Bs,"g"),zs=RegExp([br+"?"+Cs+"+"+Fs+"(?="+[Mn,br,"$"].join("|")+")",Jr+"+"+Us+"(?="+[Mn,br+$s,"$"].join("|")+")",br+"?"+$s+"+"+Fs,br+"+"+Us,Ls,ai,As,pn].join("|"),"g"),qs=RegExp("["+Rs+hn+Is+Ps+"]"),zi=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Hs=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Oa=-1,ot={};ot[He]=ot[Oe]=ot[ke]=ot[We]=ot[et]=ot[tt]=ot[Je]=ot[tr]=ot[lr]=!0,ot[le]=ot[_e]=ot[Se]=ot[B]=ot[Ae]=ot[F]=ot[T]=ot[ae]=ot[Ie]=ot[qe]=ot[je]=ot[Le]=ot[xe]=ot[Re]=ot[Pe]=!1;var st={};st[le]=st[_e]=st[Se]=st[Ae]=st[B]=st[F]=st[He]=st[Oe]=st[ke]=st[We]=st[et]=st[Ie]=st[qe]=st[je]=st[Le]=st[xe]=st[Re]=st[$e]=st[tt]=st[Je]=st[tr]=st[lr]=!0,st[T]=st[ae]=st[Pe]=!1;var I={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},j={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},te={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},pe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},at=parseFloat,Te=parseInt,ft=typeof hs=="object"&&hs&&hs.Object===Object&&hs,Bt=typeof self=="object"&&self&&self.Object===Object&&self,Xe=ft||Bt||Function("return this")(),ct=e&&!e.nodeType&&e,Ct=ct&&!0&&i&&!i.nodeType&&i,fr=Ct&&Ct.exports===ct,zt=fr&&ft.process,dt=function(){try{var M=Ct&&Ct.require&&Ct.require("util").types;return M||zt&&zt.binding&&zt.binding("util")}catch{}}(),ir=dt&&dt.isArrayBuffer,zr=dt&&dt.isDate,Pr=dt&&dt.isMap,Xr=dt&&dt.isRegExp,Bn=dt&&dt.isSet,qi=dt&&dt.isTypedArray;function Vt(M,Y,K){switch(K.length){case 0:return M.call(Y);case 1:return M.call(Y,K[0]);case 2:return M.call(Y,K[0],K[1]);case 3:return M.call(Y,K[0],K[1],K[2])}return M.apply(Y,K)}function Qp(M,Y,K,ge){for(var Ce=-1,rt=M==null?0:M.length;++Ce<rt;){var Ht=M[Ce];Y(ge,Ht,K(Ht),M)}return ge}function Ar(M,Y){for(var K=-1,ge=M==null?0:M.length;++K<ge&&Y(M[K],K,M)!==!1;);return M}function eg(M,Y){for(var K=M==null?0:M.length;K--&&Y(M[K],K,M)!==!1;);return M}function Qu(M,Y){for(var K=-1,ge=M==null?0:M.length;++K<ge;)if(!Y(M[K],K,M))return!1;return!0}function Ei(M,Y){for(var K=-1,ge=M==null?0:M.length,Ce=0,rt=[];++K<ge;){var Ht=M[K];Y(Ht,K,M)&&(rt[Ce++]=Ht)}return rt}function Ks(M,Y){var K=M==null?0:M.length;return!!K&&yn(M,Y,0)>-1}function Pa(M,Y,K){for(var ge=-1,Ce=M==null?0:M.length;++ge<Ce;)if(K(Y,M[ge]))return!0;return!1}function _t(M,Y){for(var K=-1,ge=M==null?0:M.length,Ce=Array(ge);++K<ge;)Ce[K]=Y(M[K],K,M);return Ce}function Di(M,Y){for(var K=-1,ge=Y.length,Ce=M.length;++K<ge;)M[Ce+K]=Y[K];return M}function Aa(M,Y,K,ge){var Ce=-1,rt=M==null?0:M.length;for(ge&&rt&&(K=M[++Ce]);++Ce<rt;)K=Y(K,M[Ce],Ce,M);return K}function tg(M,Y,K,ge){var Ce=M==null?0:M.length;for(ge&&Ce&&(K=M[--Ce]);Ce--;)K=Y(K,M[Ce],Ce,M);return K}function Ca(M,Y){for(var K=-1,ge=M==null?0:M.length;++K<ge;)if(Y(M[K],K,M))return!0;return!1}var rg=Ta("length");function ig(M){return M.split("")}function ng(M){return M.match(Lt)||[]}function eh(M,Y,K){var ge;return K(M,function(Ce,rt,Ht){if(Y(Ce,rt,Ht))return ge=rt,!1}),ge}function Vs(M,Y,K,ge){for(var Ce=M.length,rt=K+(ge?1:-1);ge?rt--:++rt<Ce;)if(Y(M[rt],rt,M))return rt;return-1}function yn(M,Y,K){return Y===Y?yg(M,Y,K):Vs(M,th,K)}function sg(M,Y,K,ge){for(var Ce=K-1,rt=M.length;++Ce<rt;)if(ge(M[Ce],Y))return Ce;return-1}function th(M){return M!==M}function rh(M,Y){var K=M==null?0:M.length;return K?Ra(M,Y)/K:J}function Ta(M){return function(Y){return Y==null?t:Y[M]}}function Na(M){return function(Y){return M==null?t:M[Y]}}function ih(M,Y,K,ge,Ce){return Ce(M,function(rt,Ht,ut){K=ge?(ge=!1,rt):Y(K,rt,Ht,ut)}),K}function og(M,Y){var K=M.length;for(M.sort(Y);K--;)M[K]=M[K].value;return M}function Ra(M,Y){for(var K,ge=-1,Ce=M.length;++ge<Ce;){var rt=Y(M[ge]);rt!==t&&(K=K===t?rt:K+rt)}return K}function $a(M,Y){for(var K=-1,ge=Array(M);++K<M;)ge[K]=Y(K);return ge}function ag(M,Y){return _t(Y,function(K){return[K,M[K]]})}function nh(M){return M&&M.slice(0,ch(M)+1).replace(It,"")}function wr(M){return function(Y){return M(Y)}}function Fa(M,Y){return _t(Y,function(K){return M[K]})}function zn(M,Y){return M.has(Y)}function sh(M,Y){for(var K=-1,ge=M.length;++K<ge&&yn(Y,M[K],0)>-1;);return K}function oh(M,Y){for(var K=M.length;K--&&yn(Y,M[K],0)>-1;);return K}function cg(M,Y){for(var K=M.length,ge=0;K--;)M[K]===Y&&++ge;return ge}var ug=Na(I),hg=Na(j);function lg(M){return"\\"+pe[M]}function fg(M,Y){return M==null?t:M[Y]}function vn(M){return qs.test(M)}function dg(M){return zi.test(M)}function pg(M){for(var Y,K=[];!(Y=M.next()).done;)K.push(Y.value);return K}function Ua(M){var Y=-1,K=Array(M.size);return M.forEach(function(ge,Ce){K[++Y]=[Ce,ge]}),K}function ah(M,Y){return function(K){return M(Y(K))}}function Si(M,Y){for(var K=-1,ge=M.length,Ce=0,rt=[];++K<ge;){var Ht=M[K];(Ht===Y||Ht===v)&&(M[K]=v,rt[Ce++]=K)}return rt}function ks(M){var Y=-1,K=Array(M.size);return M.forEach(function(ge){K[++Y]=ge}),K}function gg(M){var Y=-1,K=Array(M.size);return M.forEach(function(ge){K[++Y]=[ge,ge]}),K}function yg(M,Y,K){for(var ge=K-1,Ce=M.length;++ge<Ce;)if(M[ge]===Y)return ge;return-1}function vg(M,Y,K){for(var ge=K+1;ge--;)if(M[ge]===Y)return ge;return ge}function _n(M){return vn(M)?mg(M):rg(M)}function qr(M){return vn(M)?bg(M):ig(M)}function ch(M){for(var Y=M.length;Y--&&At.test(M.charAt(Y)););return Y}var _g=Na(te);function mg(M){for(var Y=gn.lastIndex=0;gn.test(M);)++Y;return Y}function bg(M){return M.match(gn)||[]}function wg(M){return M.match(zs)||[]}var Eg=function M(Y){Y=Y==null?Xe:mn.defaults(Xe.Object(),Y,mn.pick(Xe,Hs));var K=Y.Array,ge=Y.Date,Ce=Y.Error,rt=Y.Function,Ht=Y.Math,ut=Y.Object,ja=Y.RegExp,Dg=Y.String,Cr=Y.TypeError,Gs=K.prototype,Sg=rt.prototype,bn=ut.prototype,Ws=Y["__core-js_shared__"],Ys=Sg.toString,nt=bn.hasOwnProperty,Ig=0,uh=function(){var r=/[^.]+$/.exec(Ws&&Ws.keys&&Ws.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),Js=bn.toString,xg=Ys.call(ut),Og=Xe._,Pg=ja("^"+Ys.call(nt).replace(St,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xs=fr?Y.Buffer:t,Ii=Y.Symbol,Zs=Y.Uint8Array,hh=Xs?Xs.allocUnsafe:t,Qs=ah(ut.getPrototypeOf,ut),lh=ut.create,fh=bn.propertyIsEnumerable,eo=Gs.splice,dh=Ii?Ii.isConcatSpreadable:t,qn=Ii?Ii.iterator:t,Hi=Ii?Ii.toStringTag:t,to=function(){try{var r=Wi(ut,"defineProperty");return r({},"",{}),r}catch{}}(),Ag=Y.clearTimeout!==Xe.clearTimeout&&Y.clearTimeout,Cg=ge&&ge.now!==Xe.Date.now&&ge.now,Tg=Y.setTimeout!==Xe.setTimeout&&Y.setTimeout,ro=Ht.ceil,io=Ht.floor,Ma=ut.getOwnPropertySymbols,Ng=Xs?Xs.isBuffer:t,ph=Y.isFinite,Rg=Gs.join,$g=ah(ut.keys,ut),Kt=Ht.max,Zt=Ht.min,Fg=ge.now,Ug=Y.parseInt,gh=Ht.random,jg=Gs.reverse,La=Wi(Y,"DataView"),Hn=Wi(Y,"Map"),Ba=Wi(Y,"Promise"),wn=Wi(Y,"Set"),Kn=Wi(Y,"WeakMap"),Vn=Wi(ut,"create"),no=Kn&&new Kn,En={},Mg=Yi(La),Lg=Yi(Hn),Bg=Yi(Ba),zg=Yi(wn),qg=Yi(Kn),so=Ii?Ii.prototype:t,kn=so?so.valueOf:t,yh=so?so.toString:t;function _(r){if(Ot(r)&&!Ne(r)&&!(r instanceof Ye)){if(r instanceof Tr)return r;if(nt.call(r,"__wrapped__"))return vl(r)}return new Tr(r)}var Dn=function(){function r(){}return function(n){if(!bt(n))return{};if(lh)return lh(n);r.prototype=n;var a=new r;return r.prototype=t,a}}();function oo(){}function Tr(r,n){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=t}_.templateSettings={escape:Et,evaluate:Dt,interpolate:mt,variable:"",imports:{_}},_.prototype=oo.prototype,_.prototype.constructor=_,Tr.prototype=Dn(oo.prototype),Tr.prototype.constructor=Tr;function Ye(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=re,this.__views__=[]}function Hg(){var r=new Ye(this.__wrapped__);return r.__actions__=dr(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=dr(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=dr(this.__views__),r}function Kg(){if(this.__filtered__){var r=new Ye(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function Vg(){var r=this.__wrapped__.value(),n=this.__dir__,a=Ne(r),h=n<0,g=a?r.length:0,m=iy(0,g,this.__views__),A=m.start,R=m.end,L=R-A,Z=h?R:A-1,Q=this.__iteratees__,ie=Q.length,ue=0,ye=Zt(L,this.__takeCount__);if(!a||!h&&g==L&&ye==L)return Bh(r,this.__actions__);var Ee=[];e:for(;L--&&ue<ye;){Z+=n;for(var ze=-1,De=r[Z];++ze<ie;){var Ge=Q[ze],Ze=Ge.iteratee,Sr=Ge.type,or=Ze(De);if(Sr==C)De=or;else if(!or){if(Sr==w)continue e;break e}}Ee[ue++]=De}return Ee}Ye.prototype=Dn(oo.prototype),Ye.prototype.constructor=Ye;function Ki(r){var n=-1,a=r==null?0:r.length;for(this.clear();++n<a;){var h=r[n];this.set(h[0],h[1])}}function kg(){this.__data__=Vn?Vn(null):{},this.size=0}function Gg(r){var n=this.has(r)&&delete this.__data__[r];return this.size-=n?1:0,n}function Wg(r){var n=this.__data__;if(Vn){var a=n[r];return a===y?t:a}return nt.call(n,r)?n[r]:t}function Yg(r){var n=this.__data__;return Vn?n[r]!==t:nt.call(n,r)}function Jg(r,n){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=Vn&&n===t?y:n,this}Ki.prototype.clear=kg,Ki.prototype.delete=Gg,Ki.prototype.get=Wg,Ki.prototype.has=Yg,Ki.prototype.set=Jg;function ci(r){var n=-1,a=r==null?0:r.length;for(this.clear();++n<a;){var h=r[n];this.set(h[0],h[1])}}function Xg(){this.__data__=[],this.size=0}function Zg(r){var n=this.__data__,a=ao(n,r);if(a<0)return!1;var h=n.length-1;return a==h?n.pop():eo.call(n,a,1),--this.size,!0}function Qg(r){var n=this.__data__,a=ao(n,r);return a<0?t:n[a][1]}function e0(r){return ao(this.__data__,r)>-1}function t0(r,n){var a=this.__data__,h=ao(a,r);return h<0?(++this.size,a.push([r,n])):a[h][1]=n,this}ci.prototype.clear=Xg,ci.prototype.delete=Zg,ci.prototype.get=Qg,ci.prototype.has=e0,ci.prototype.set=t0;function ui(r){var n=-1,a=r==null?0:r.length;for(this.clear();++n<a;){var h=r[n];this.set(h[0],h[1])}}function r0(){this.size=0,this.__data__={hash:new Ki,map:new(Hn||ci),string:new Ki}}function i0(r){var n=bo(this,r).delete(r);return this.size-=n?1:0,n}function n0(r){return bo(this,r).get(r)}function s0(r){return bo(this,r).has(r)}function o0(r,n){var a=bo(this,r),h=a.size;return a.set(r,n),this.size+=a.size==h?0:1,this}ui.prototype.clear=r0,ui.prototype.delete=i0,ui.prototype.get=n0,ui.prototype.has=s0,ui.prototype.set=o0;function Vi(r){var n=-1,a=r==null?0:r.length;for(this.__data__=new ui;++n<a;)this.add(r[n])}function a0(r){return this.__data__.set(r,y),this}function c0(r){return this.__data__.has(r)}Vi.prototype.add=Vi.prototype.push=a0,Vi.prototype.has=c0;function Hr(r){var n=this.__data__=new ci(r);this.size=n.size}function u0(){this.__data__=new ci,this.size=0}function h0(r){var n=this.__data__,a=n.delete(r);return this.size=n.size,a}function l0(r){return this.__data__.get(r)}function f0(r){return this.__data__.has(r)}function d0(r,n){var a=this.__data__;if(a instanceof ci){var h=a.__data__;if(!Hn||h.length<o-1)return h.push([r,n]),this.size=++a.size,this;a=this.__data__=new ui(h)}return a.set(r,n),this.size=a.size,this}Hr.prototype.clear=u0,Hr.prototype.delete=h0,Hr.prototype.get=l0,Hr.prototype.has=f0,Hr.prototype.set=d0;function vh(r,n){var a=Ne(r),h=!a&&Ji(r),g=!a&&!h&&Ci(r),m=!a&&!h&&!g&&On(r),A=a||h||g||m,R=A?$a(r.length,Dg):[],L=R.length;for(var Z in r)(n||nt.call(r,Z))&&!(A&&(Z=="length"||g&&(Z=="offset"||Z=="parent")||m&&(Z=="buffer"||Z=="byteLength"||Z=="byteOffset")||di(Z,L)))&&R.push(Z);return R}function _h(r){var n=r.length;return n?r[Xa(0,n-1)]:t}function p0(r,n){return wo(dr(r),ki(n,0,r.length))}function g0(r){return wo(dr(r))}function za(r,n,a){(a!==t&&!Kr(r[n],a)||a===t&&!(n in r))&&hi(r,n,a)}function Gn(r,n,a){var h=r[n];(!(nt.call(r,n)&&Kr(h,a))||a===t&&!(n in r))&&hi(r,n,a)}function ao(r,n){for(var a=r.length;a--;)if(Kr(r[a][0],n))return a;return-1}function y0(r,n,a,h){return xi(r,function(g,m,A){n(h,g,a(g),A)}),h}function mh(r,n){return r&&Qr(n,kt(n),r)}function v0(r,n){return r&&Qr(n,gr(n),r)}function hi(r,n,a){n=="__proto__"&&to?to(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}function qa(r,n){for(var a=-1,h=n.length,g=K(h),m=r==null;++a<h;)g[a]=m?t:Ec(r,n[a]);return g}function ki(r,n,a){return r===r&&(a!==t&&(r=r<=a?r:a),n!==t&&(r=r>=n?r:n)),r}function Nr(r,n,a,h,g,m){var A,R=n&S,L=n&D,Z=n&x;if(a&&(A=g?a(r,h,g,m):a(r)),A!==t)return A;if(!bt(r))return r;var Q=Ne(r);if(Q){if(A=sy(r),!R)return dr(r,A)}else{var ie=Qt(r),ue=ie==ae||ie==fe;if(Ci(r))return Hh(r,R);if(ie==je||ie==le||ue&&!g){if(A=L||ue?{}:cl(r),!R)return L?W0(r,v0(A,r)):G0(r,mh(A,r))}else{if(!st[ie])return g?r:{};A=oy(r,ie,R)}}m||(m=new Hr);var ye=m.get(r);if(ye)return ye;m.set(r,A),jl(r)?r.forEach(function(De){A.add(Nr(De,n,a,De,r,m))}):Fl(r)&&r.forEach(function(De,Ge){A.set(Ge,Nr(De,n,a,Ge,r,m))});var Ee=Z?L?cc:ac:L?gr:kt,ze=Q?t:Ee(r);return Ar(ze||r,function(De,Ge){ze&&(Ge=De,De=r[Ge]),Gn(A,Ge,Nr(De,n,a,Ge,r,m))}),A}function _0(r){var n=kt(r);return function(a){return bh(a,r,n)}}function bh(r,n,a){var h=a.length;if(r==null)return!h;for(r=ut(r);h--;){var g=a[h],m=n[g],A=r[g];if(A===t&&!(g in r)||!m(A))return!1}return!0}function wh(r,n,a){if(typeof r!="function")throw new Cr(l);return es(function(){r.apply(t,a)},n)}function Wn(r,n,a,h){var g=-1,m=Ks,A=!0,R=r.length,L=[],Z=n.length;if(!R)return L;a&&(n=_t(n,wr(a))),h?(m=Pa,A=!1):n.length>=o&&(m=zn,A=!1,n=new Vi(n));e:for(;++g<R;){var Q=r[g],ie=a==null?Q:a(Q);if(Q=h||Q!==0?Q:0,A&&ie===ie){for(var ue=Z;ue--;)if(n[ue]===ie)continue e;L.push(Q)}else m(n,ie,h)||L.push(Q)}return L}var xi=Wh(Zr),Eh=Wh(Ka,!0);function m0(r,n){var a=!0;return xi(r,function(h,g,m){return a=!!n(h,g,m),a}),a}function co(r,n,a){for(var h=-1,g=r.length;++h<g;){var m=r[h],A=n(m);if(A!=null&&(R===t?A===A&&!Dr(A):a(A,R)))var R=A,L=m}return L}function b0(r,n,a,h){var g=r.length;for(a=Me(a),a<0&&(a=-a>g?0:g+a),h=h===t||h>g?g:Me(h),h<0&&(h+=g),h=a>h?0:Ll(h);a<h;)r[a++]=n;return r}function Dh(r,n){var a=[];return xi(r,function(h,g,m){n(h,g,m)&&a.push(h)}),a}function Yt(r,n,a,h,g){var m=-1,A=r.length;for(a||(a=cy),g||(g=[]);++m<A;){var R=r[m];n>0&&a(R)?n>1?Yt(R,n-1,a,h,g):Di(g,R):h||(g[g.length]=R)}return g}var Ha=Yh(),Sh=Yh(!0);function Zr(r,n){return r&&Ha(r,n,kt)}function Ka(r,n){return r&&Sh(r,n,kt)}function uo(r,n){return Ei(n,function(a){return pi(r[a])})}function Gi(r,n){n=Pi(n,r);for(var a=0,h=n.length;r!=null&&a<h;)r=r[ei(n[a++])];return a&&a==h?r:t}function Ih(r,n,a){var h=n(r);return Ne(r)?h:Di(h,a(r))}function nr(r){return r==null?r===t?Be:Ve:Hi&&Hi in ut(r)?ry(r):gy(r)}function Va(r,n){return r>n}function w0(r,n){return r!=null&&nt.call(r,n)}function E0(r,n){return r!=null&&n in ut(r)}function D0(r,n,a){return r>=Zt(n,a)&&r<Kt(n,a)}function ka(r,n,a){for(var h=a?Pa:Ks,g=r[0].length,m=r.length,A=m,R=K(m),L=1/0,Z=[];A--;){var Q=r[A];A&&n&&(Q=_t(Q,wr(n))),L=Zt(Q.length,L),R[A]=!a&&(n||g>=120&&Q.length>=120)?new Vi(A&&Q):t}Q=r[0];var ie=-1,ue=R[0];e:for(;++ie<g&&Z.length<L;){var ye=Q[ie],Ee=n?n(ye):ye;if(ye=a||ye!==0?ye:0,!(ue?zn(ue,Ee):h(Z,Ee,a))){for(A=m;--A;){var ze=R[A];if(!(ze?zn(ze,Ee):h(r[A],Ee,a)))continue e}ue&&ue.push(Ee),Z.push(ye)}}return Z}function S0(r,n,a,h){return Zr(r,function(g,m,A){n(h,a(g),m,A)}),h}function Yn(r,n,a){n=Pi(n,r),r=fl(r,n);var h=r==null?r:r[ei($r(n))];return h==null?t:Vt(h,r,a)}function xh(r){return Ot(r)&&nr(r)==le}function I0(r){return Ot(r)&&nr(r)==Se}function x0(r){return Ot(r)&&nr(r)==F}function Jn(r,n,a,h,g){return r===n?!0:r==null||n==null||!Ot(r)&&!Ot(n)?r!==r&&n!==n:O0(r,n,a,h,Jn,g)}function O0(r,n,a,h,g,m){var A=Ne(r),R=Ne(n),L=A?_e:Qt(r),Z=R?_e:Qt(n);L=L==le?je:L,Z=Z==le?je:Z;var Q=L==je,ie=Z==je,ue=L==Z;if(ue&&Ci(r)){if(!Ci(n))return!1;A=!0,Q=!1}if(ue&&!Q)return m||(m=new Hr),A||On(r)?sl(r,n,a,h,g,m):ey(r,n,L,a,h,g,m);if(!(a&O)){var ye=Q&&nt.call(r,"__wrapped__"),Ee=ie&&nt.call(n,"__wrapped__");if(ye||Ee){var ze=ye?r.value():r,De=Ee?n.value():n;return m||(m=new Hr),g(ze,De,a,h,m)}}return ue?(m||(m=new Hr),ty(r,n,a,h,g,m)):!1}function P0(r){return Ot(r)&&Qt(r)==Ie}function Ga(r,n,a,h){var g=a.length,m=g,A=!h;if(r==null)return!m;for(r=ut(r);g--;){var R=a[g];if(A&&R[2]?R[1]!==r[R[0]]:!(R[0]in r))return!1}for(;++g<m;){R=a[g];var L=R[0],Z=r[L],Q=R[1];if(A&&R[2]){if(Z===t&&!(L in r))return!1}else{var ie=new Hr;if(h)var ue=h(Z,Q,L,r,n,ie);if(!(ue===t?Jn(Q,Z,O|z,h,ie):ue))return!1}}return!0}function Oh(r){if(!bt(r)||hy(r))return!1;var n=pi(r)?Pg:fa;return n.test(Yi(r))}function A0(r){return Ot(r)&&nr(r)==Le}function C0(r){return Ot(r)&&Qt(r)==xe}function T0(r){return Ot(r)&&Oo(r.length)&&!!ot[nr(r)]}function Ph(r){return typeof r=="function"?r:r==null?yr:typeof r=="object"?Ne(r)?Th(r[0],r[1]):Ch(r):Jl(r)}function Wa(r){if(!Qn(r))return $g(r);var n=[];for(var a in ut(r))nt.call(r,a)&&a!="constructor"&&n.push(a);return n}function N0(r){if(!bt(r))return py(r);var n=Qn(r),a=[];for(var h in r)h=="constructor"&&(n||!nt.call(r,h))||a.push(h);return a}function Ya(r,n){return r<n}function Ah(r,n){var a=-1,h=pr(r)?K(r.length):[];return xi(r,function(g,m,A){h[++a]=n(g,m,A)}),h}function Ch(r){var n=hc(r);return n.length==1&&n[0][2]?hl(n[0][0],n[0][1]):function(a){return a===r||Ga(a,r,n)}}function Th(r,n){return fc(r)&&ul(n)?hl(ei(r),n):function(a){var h=Ec(a,r);return h===t&&h===n?Dc(a,r):Jn(n,h,O|z)}}function ho(r,n,a,h,g){r!==n&&Ha(n,function(m,A){if(g||(g=new Hr),bt(m))R0(r,n,A,a,ho,h,g);else{var R=h?h(pc(r,A),m,A+"",r,n,g):t;R===t&&(R=m),za(r,A,R)}},gr)}function R0(r,n,a,h,g,m,A){var R=pc(r,a),L=pc(n,a),Z=A.get(L);if(Z){za(r,a,Z);return}var Q=m?m(R,L,a+"",r,n,A):t,ie=Q===t;if(ie){var ue=Ne(L),ye=!ue&&Ci(L),Ee=!ue&&!ye&&On(L);Q=L,ue||ye||Ee?Ne(R)?Q=R:Tt(R)?Q=dr(R):ye?(ie=!1,Q=Hh(L,!0)):Ee?(ie=!1,Q=Kh(L,!0)):Q=[]:ts(L)||Ji(L)?(Q=R,Ji(R)?Q=Bl(R):(!bt(R)||pi(R))&&(Q=cl(L))):ie=!1}ie&&(A.set(L,Q),g(Q,L,h,m,A),A.delete(L)),za(r,a,Q)}function Nh(r,n){var a=r.length;if(a)return n+=n<0?a:0,di(n,a)?r[n]:t}function Rh(r,n,a){n.length?n=_t(n,function(m){return Ne(m)?function(A){return Gi(A,m.length===1?m[0]:m)}:m}):n=[yr];var h=-1;n=_t(n,wr(me()));var g=Ah(r,function(m,A,R){var L=_t(n,function(Z){return Z(m)});return{criteria:L,index:++h,value:m}});return og(g,function(m,A){return k0(m,A,a)})}function $0(r,n){return $h(r,n,function(a,h){return Dc(r,h)})}function $h(r,n,a){for(var h=-1,g=n.length,m={};++h<g;){var A=n[h],R=Gi(r,A);a(R,A)&&Xn(m,Pi(A,r),R)}return m}function F0(r){return function(n){return Gi(n,r)}}function Ja(r,n,a,h){var g=h?sg:yn,m=-1,A=n.length,R=r;for(r===n&&(n=dr(n)),a&&(R=_t(r,wr(a)));++m<A;)for(var L=0,Z=n[m],Q=a?a(Z):Z;(L=g(R,Q,L,h))>-1;)R!==r&&eo.call(R,L,1),eo.call(r,L,1);return r}function Fh(r,n){for(var a=r?n.length:0,h=a-1;a--;){var g=n[a];if(a==h||g!==m){var m=g;di(g)?eo.call(r,g,1):ec(r,g)}}return r}function Xa(r,n){return r+io(gh()*(n-r+1))}function U0(r,n,a,h){for(var g=-1,m=Kt(ro((n-r)/(a||1)),0),A=K(m);m--;)A[h?m:++g]=r,r+=a;return A}function Za(r,n){var a="";if(!r||n<1||n>V)return a;do n%2&&(a+=r),n=io(n/2),n&&(r+=r);while(n);return a}function Ke(r,n){return gc(ll(r,n,yr),r+"")}function j0(r){return _h(Pn(r))}function M0(r,n){var a=Pn(r);return wo(a,ki(n,0,a.length))}function Xn(r,n,a,h){if(!bt(r))return r;n=Pi(n,r);for(var g=-1,m=n.length,A=m-1,R=r;R!=null&&++g<m;){var L=ei(n[g]),Z=a;if(L==="__proto__"||L==="constructor"||L==="prototype")return r;if(g!=A){var Q=R[L];Z=h?h(Q,L,R):t,Z===t&&(Z=bt(Q)?Q:di(n[g+1])?[]:{})}Gn(R,L,Z),R=R[L]}return r}var Uh=no?function(r,n){return no.set(r,n),r}:yr,L0=to?function(r,n){return to(r,"toString",{configurable:!0,enumerable:!1,value:Ic(n),writable:!0})}:yr;function B0(r){return wo(Pn(r))}function Rr(r,n,a){var h=-1,g=r.length;n<0&&(n=-n>g?0:g+n),a=a>g?g:a,a<0&&(a+=g),g=n>a?0:a-n>>>0,n>>>=0;for(var m=K(g);++h<g;)m[h]=r[h+n];return m}function z0(r,n){var a;return xi(r,function(h,g,m){return a=n(h,g,m),!a}),!!a}function lo(r,n,a){var h=0,g=r==null?h:r.length;if(typeof n=="number"&&n===n&&g<=oe){for(;h<g;){var m=h+g>>>1,A=r[m];A!==null&&!Dr(A)&&(a?A<=n:A<n)?h=m+1:g=m}return g}return Qa(r,n,yr,a)}function Qa(r,n,a,h){var g=0,m=r==null?0:r.length;if(m===0)return 0;n=a(n);for(var A=n!==n,R=n===null,L=Dr(n),Z=n===t;g<m;){var Q=io((g+m)/2),ie=a(r[Q]),ue=ie!==t,ye=ie===null,Ee=ie===ie,ze=Dr(ie);if(A)var De=h||Ee;else Z?De=Ee&&(h||ue):R?De=Ee&&ue&&(h||!ye):L?De=Ee&&ue&&!ye&&(h||!ze):ye||ze?De=!1:De=h?ie<=n:ie<n;De?g=Q+1:m=Q}return Zt(m,be)}function jh(r,n){for(var a=-1,h=r.length,g=0,m=[];++a<h;){var A=r[a],R=n?n(A):A;if(!a||!Kr(R,L)){var L=R;m[g++]=A===0?0:A}}return m}function Mh(r){return typeof r=="number"?r:Dr(r)?J:+r}function Er(r){if(typeof r=="string")return r;if(Ne(r))return _t(r,Er)+"";if(Dr(r))return yh?yh.call(r):"";var n=r+"";return n=="0"&&1/r==-X?"-0":n}function Oi(r,n,a){var h=-1,g=Ks,m=r.length,A=!0,R=[],L=R;if(a)A=!1,g=Pa;else if(m>=o){var Z=n?null:Z0(r);if(Z)return ks(Z);A=!1,g=zn,L=new Vi}else L=n?[]:R;e:for(;++h<m;){var Q=r[h],ie=n?n(Q):Q;if(Q=a||Q!==0?Q:0,A&&ie===ie){for(var ue=L.length;ue--;)if(L[ue]===ie)continue e;n&&L.push(ie),R.push(Q)}else g(L,ie,a)||(L!==R&&L.push(ie),R.push(Q))}return R}function ec(r,n){return n=Pi(n,r),r=fl(r,n),r==null||delete r[ei($r(n))]}function Lh(r,n,a,h){return Xn(r,n,a(Gi(r,n)),h)}function fo(r,n,a,h){for(var g=r.length,m=h?g:-1;(h?m--:++m<g)&&n(r[m],m,r););return a?Rr(r,h?0:m,h?m+1:g):Rr(r,h?m+1:0,h?g:m)}function Bh(r,n){var a=r;return a instanceof Ye&&(a=a.value()),Aa(n,function(h,g){return g.func.apply(g.thisArg,Di([h],g.args))},a)}function tc(r,n,a){var h=r.length;if(h<2)return h?Oi(r[0]):[];for(var g=-1,m=K(h);++g<h;)for(var A=r[g],R=-1;++R<h;)R!=g&&(m[g]=Wn(m[g]||A,r[R],n,a));return Oi(Yt(m,1),n,a)}function zh(r,n,a){for(var h=-1,g=r.length,m=n.length,A={};++h<g;){var R=h<m?n[h]:t;a(A,r[h],R)}return A}function rc(r){return Tt(r)?r:[]}function ic(r){return typeof r=="function"?r:yr}function Pi(r,n){return Ne(r)?r:fc(r,n)?[r]:yl(it(r))}var q0=Ke;function Ai(r,n,a){var h=r.length;return a=a===t?h:a,!n&&a>=h?r:Rr(r,n,a)}var qh=Ag||function(r){return Xe.clearTimeout(r)};function Hh(r,n){if(n)return r.slice();var a=r.length,h=hh?hh(a):new r.constructor(a);return r.copy(h),h}function nc(r){var n=new r.constructor(r.byteLength);return new Zs(n).set(new Zs(r)),n}function H0(r,n){var a=n?nc(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.byteLength)}function K0(r){var n=new r.constructor(r.source,Or.exec(r));return n.lastIndex=r.lastIndex,n}function V0(r){return kn?ut(kn.call(r)):{}}function Kh(r,n){var a=n?nc(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.length)}function Vh(r,n){if(r!==n){var a=r!==t,h=r===null,g=r===r,m=Dr(r),A=n!==t,R=n===null,L=n===n,Z=Dr(n);if(!R&&!Z&&!m&&r>n||m&&A&&L&&!R&&!Z||h&&A&&L||!a&&L||!g)return 1;if(!h&&!m&&!Z&&r<n||Z&&a&&g&&!h&&!m||R&&a&&g||!A&&g||!L)return-1}return 0}function k0(r,n,a){for(var h=-1,g=r.criteria,m=n.criteria,A=g.length,R=a.length;++h<A;){var L=Vh(g[h],m[h]);if(L){if(h>=R)return L;var Z=a[h];return L*(Z=="desc"?-1:1)}}return r.index-n.index}function kh(r,n,a,h){for(var g=-1,m=r.length,A=a.length,R=-1,L=n.length,Z=Kt(m-A,0),Q=K(L+Z),ie=!h;++R<L;)Q[R]=n[R];for(;++g<A;)(ie||g<m)&&(Q[a[g]]=r[g]);for(;Z--;)Q[R++]=r[g++];return Q}function Gh(r,n,a,h){for(var g=-1,m=r.length,A=-1,R=a.length,L=-1,Z=n.length,Q=Kt(m-R,0),ie=K(Q+Z),ue=!h;++g<Q;)ie[g]=r[g];for(var ye=g;++L<Z;)ie[ye+L]=n[L];for(;++A<R;)(ue||g<m)&&(ie[ye+a[A]]=r[g++]);return ie}function dr(r,n){var a=-1,h=r.length;for(n||(n=K(h));++a<h;)n[a]=r[a];return n}function Qr(r,n,a,h){var g=!a;a||(a={});for(var m=-1,A=n.length;++m<A;){var R=n[m],L=h?h(a[R],r[R],R,a,r):t;L===t&&(L=r[R]),g?hi(a,R,L):Gn(a,R,L)}return a}function G0(r,n){return Qr(r,lc(r),n)}function W0(r,n){return Qr(r,ol(r),n)}function po(r,n){return function(a,h){var g=Ne(a)?Qp:y0,m=n?n():{};return g(a,r,me(h,2),m)}}function Sn(r){return Ke(function(n,a){var h=-1,g=a.length,m=g>1?a[g-1]:t,A=g>2?a[2]:t;for(m=r.length>3&&typeof m=="function"?(g--,m):t,A&&sr(a[0],a[1],A)&&(m=g<3?t:m,g=1),n=ut(n);++h<g;){var R=a[h];R&&r(n,R,h,m)}return n})}function Wh(r,n){return function(a,h){if(a==null)return a;if(!pr(a))return r(a,h);for(var g=a.length,m=n?g:-1,A=ut(a);(n?m--:++m<g)&&h(A[m],m,A)!==!1;);return a}}function Yh(r){return function(n,a,h){for(var g=-1,m=ut(n),A=h(n),R=A.length;R--;){var L=A[r?R:++g];if(a(m[L],L,m)===!1)break}return n}}function Y0(r,n,a){var h=n&H,g=Zn(r);function m(){var A=this&&this!==Xe&&this instanceof m?g:r;return A.apply(h?a:this,arguments)}return m}function Jh(r){return function(n){n=it(n);var a=vn(n)?qr(n):t,h=a?a[0]:n.charAt(0),g=a?Ai(a,1).join(""):n.slice(1);return h[r]()+g}}function In(r){return function(n){return Aa(Wl(Gl(n).replace(Ln,"")),r,"")}}function Zn(r){return function(){var n=arguments;switch(n.length){case 0:return new r;case 1:return new r(n[0]);case 2:return new r(n[0],n[1]);case 3:return new r(n[0],n[1],n[2]);case 4:return new r(n[0],n[1],n[2],n[3]);case 5:return new r(n[0],n[1],n[2],n[3],n[4]);case 6:return new r(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new r(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var a=Dn(r.prototype),h=r.apply(a,n);return bt(h)?h:a}}function J0(r,n,a){var h=Zn(r);function g(){for(var m=arguments.length,A=K(m),R=m,L=xn(g);R--;)A[R]=arguments[R];var Z=m<3&&A[0]!==L&&A[m-1]!==L?[]:Si(A,L);if(m-=Z.length,m<a)return tl(r,n,go,g.placeholder,t,A,Z,t,t,a-m);var Q=this&&this!==Xe&&this instanceof g?h:r;return Vt(Q,this,A)}return g}function Xh(r){return function(n,a,h){var g=ut(n);if(!pr(n)){var m=me(a,3);n=kt(n),a=function(R){return m(g[R],R,g)}}var A=r(n,a,h);return A>-1?g[m?n[A]:A]:t}}function Zh(r){return fi(function(n){var a=n.length,h=a,g=Tr.prototype.thru;for(r&&n.reverse();h--;){var m=n[h];if(typeof m!="function")throw new Cr(l);if(g&&!A&&mo(m)=="wrapper")var A=new Tr([],!0)}for(h=A?h:a;++h<a;){m=n[h];var R=mo(m),L=R=="wrapper"?uc(m):t;L&&dc(L[0])&&L[1]==(u|U|N|b)&&!L[4].length&&L[9]==1?A=A[mo(L[0])].apply(A,L[3]):A=m.length==1&&dc(m)?A[R]():A.thru(m)}return function(){var Z=arguments,Q=Z[0];if(A&&Z.length==1&&Ne(Q))return A.plant(Q).value();for(var ie=0,ue=a?n[ie].apply(this,Z):Q;++ie<a;)ue=n[ie].call(this,ue);return ue}})}function go(r,n,a,h,g,m,A,R,L,Z){var Q=n&u,ie=n&H,ue=n&ne,ye=n&(U|P),Ee=n&G,ze=ue?t:Zn(r);function De(){for(var Ge=arguments.length,Ze=K(Ge),Sr=Ge;Sr--;)Ze[Sr]=arguments[Sr];if(ye)var or=xn(De),Ir=cg(Ze,or);if(h&&(Ze=kh(Ze,h,g,ye)),m&&(Ze=Gh(Ze,m,A,ye)),Ge-=Ir,ye&&Ge<Z){var Nt=Si(Ze,or);return tl(r,n,go,De.placeholder,a,Ze,Nt,R,L,Z-Ge)}var Vr=ie?a:this,yi=ue?Vr[r]:r;return Ge=Ze.length,R?Ze=yy(Ze,R):Ee&&Ge>1&&Ze.reverse(),Q&&L<Ge&&(Ze.length=L),this&&this!==Xe&&this instanceof De&&(yi=ze||Zn(yi)),yi.apply(Vr,Ze)}return De}function Qh(r,n){return function(a,h){return S0(a,r,n(h),{})}}function yo(r,n){return function(a,h){var g;if(a===t&&h===t)return n;if(a!==t&&(g=a),h!==t){if(g===t)return h;typeof a=="string"||typeof h=="string"?(a=Er(a),h=Er(h)):(a=Mh(a),h=Mh(h)),g=r(a,h)}return g}}function sc(r){return fi(function(n){return n=_t(n,wr(me())),Ke(function(a){var h=this;return r(n,function(g){return Vt(g,h,a)})})})}function vo(r,n){n=n===t?" ":Er(n);var a=n.length;if(a<2)return a?Za(n,r):n;var h=Za(n,ro(r/_n(n)));return vn(n)?Ai(qr(h),0,r).join(""):h.slice(0,r)}function X0(r,n,a,h){var g=n&H,m=Zn(r);function A(){for(var R=-1,L=arguments.length,Z=-1,Q=h.length,ie=K(Q+L),ue=this&&this!==Xe&&this instanceof A?m:r;++Z<Q;)ie[Z]=h[Z];for(;L--;)ie[Z++]=arguments[++R];return Vt(ue,g?a:this,ie)}return A}function el(r){return function(n,a,h){return h&&typeof h!="number"&&sr(n,a,h)&&(a=h=t),n=gi(n),a===t?(a=n,n=0):a=gi(a),h=h===t?n<a?1:-1:gi(h),U0(n,a,h,r)}}function _o(r){return function(n,a){return typeof n=="string"&&typeof a=="string"||(n=Fr(n),a=Fr(a)),r(n,a)}}function tl(r,n,a,h,g,m,A,R,L,Z){var Q=n&U,ie=Q?A:t,ue=Q?t:A,ye=Q?m:t,Ee=Q?t:m;n|=Q?N:E,n&=~(Q?E:N),n&$||(n&=~(H|ne));var ze=[r,n,g,ye,ie,Ee,ue,R,L,Z],De=a.apply(t,ze);return dc(r)&&dl(De,ze),De.placeholder=h,pl(De,r,n)}function oc(r){var n=Ht[r];return function(a,h){if(a=Fr(a),h=h==null?0:Zt(Me(h),292),h&&ph(a)){var g=(it(a)+"e").split("e"),m=n(g[0]+"e"+(+g[1]+h));return g=(it(m)+"e").split("e"),+(g[0]+"e"+(+g[1]-h))}return n(a)}}var Z0=wn&&1/ks(new wn([,-0]))[1]==X?function(r){return new wn(r)}:Pc;function rl(r){return function(n){var a=Qt(n);return a==Ie?Ua(n):a==xe?gg(n):ag(n,r(n))}}function li(r,n,a,h,g,m,A,R){var L=n&ne;if(!L&&typeof r!="function")throw new Cr(l);var Z=h?h.length:0;if(Z||(n&=~(N|E),h=g=t),A=A===t?A:Kt(Me(A),0),R=R===t?R:Me(R),Z-=g?g.length:0,n&E){var Q=h,ie=g;h=g=t}var ue=L?t:uc(r),ye=[r,n,a,h,g,Q,ie,m,A,R];if(ue&&dy(ye,ue),r=ye[0],n=ye[1],a=ye[2],h=ye[3],g=ye[4],R=ye[9]=ye[9]===t?L?0:r.length:Kt(ye[9]-Z,0),!R&&n&(U|P)&&(n&=~(U|P)),!n||n==H)var Ee=Y0(r,n,a);else n==U||n==P?Ee=J0(r,n,R):(n==N||n==(H|N))&&!g.length?Ee=X0(r,n,a,h):Ee=go.apply(t,ye);var ze=ue?Uh:dl;return pl(ze(Ee,ye),r,n)}function il(r,n,a,h){return r===t||Kr(r,bn[a])&&!nt.call(h,a)?n:r}function nl(r,n,a,h,g,m){return bt(r)&&bt(n)&&(m.set(n,r),ho(r,n,t,nl,m),m.delete(n)),r}function Q0(r){return ts(r)?t:r}function sl(r,n,a,h,g,m){var A=a&O,R=r.length,L=n.length;if(R!=L&&!(A&&L>R))return!1;var Z=m.get(r),Q=m.get(n);if(Z&&Q)return Z==n&&Q==r;var ie=-1,ue=!0,ye=a&z?new Vi:t;for(m.set(r,n),m.set(n,r);++ie<R;){var Ee=r[ie],ze=n[ie];if(h)var De=A?h(ze,Ee,ie,n,r,m):h(Ee,ze,ie,r,n,m);if(De!==t){if(De)continue;ue=!1;break}if(ye){if(!Ca(n,function(Ge,Ze){if(!zn(ye,Ze)&&(Ee===Ge||g(Ee,Ge,a,h,m)))return ye.push(Ze)})){ue=!1;break}}else if(!(Ee===ze||g(Ee,ze,a,h,m))){ue=!1;break}}return m.delete(r),m.delete(n),ue}function ey(r,n,a,h,g,m,A){switch(a){case Ae:if(r.byteLength!=n.byteLength||r.byteOffset!=n.byteOffset)return!1;r=r.buffer,n=n.buffer;case Se:return!(r.byteLength!=n.byteLength||!m(new Zs(r),new Zs(n)));case B:case F:case qe:return Kr(+r,+n);case T:return r.name==n.name&&r.message==n.message;case Le:case Re:return r==n+"";case Ie:var R=Ua;case xe:var L=h&O;if(R||(R=ks),r.size!=n.size&&!L)return!1;var Z=A.get(r);if(Z)return Z==n;h|=z,A.set(r,n);var Q=sl(R(r),R(n),h,g,m,A);return A.delete(r),Q;case $e:if(kn)return kn.call(r)==kn.call(n)}return!1}function ty(r,n,a,h,g,m){var A=a&O,R=ac(r),L=R.length,Z=ac(n),Q=Z.length;if(L!=Q&&!A)return!1;for(var ie=L;ie--;){var ue=R[ie];if(!(A?ue in n:nt.call(n,ue)))return!1}var ye=m.get(r),Ee=m.get(n);if(ye&&Ee)return ye==n&&Ee==r;var ze=!0;m.set(r,n),m.set(n,r);for(var De=A;++ie<L;){ue=R[ie];var Ge=r[ue],Ze=n[ue];if(h)var Sr=A?h(Ze,Ge,ue,n,r,m):h(Ge,Ze,ue,r,n,m);if(!(Sr===t?Ge===Ze||g(Ge,Ze,a,h,m):Sr)){ze=!1;break}De||(De=ue=="constructor")}if(ze&&!De){var or=r.constructor,Ir=n.constructor;or!=Ir&&"constructor"in r&&"constructor"in n&&!(typeof or=="function"&&or instanceof or&&typeof Ir=="function"&&Ir instanceof Ir)&&(ze=!1)}return m.delete(r),m.delete(n),ze}function fi(r){return gc(ll(r,t,bl),r+"")}function ac(r){return Ih(r,kt,lc)}function cc(r){return Ih(r,gr,ol)}var uc=no?function(r){return no.get(r)}:Pc;function mo(r){for(var n=r.name+"",a=En[n],h=nt.call(En,n)?a.length:0;h--;){var g=a[h],m=g.func;if(m==null||m==r)return g.name}return n}function xn(r){var n=nt.call(_,"placeholder")?_:r;return n.placeholder}function me(){var r=_.iteratee||xc;return r=r===xc?Ph:r,arguments.length?r(arguments[0],arguments[1]):r}function bo(r,n){var a=r.__data__;return uy(n)?a[typeof n=="string"?"string":"hash"]:a.map}function hc(r){for(var n=kt(r),a=n.length;a--;){var h=n[a],g=r[h];n[a]=[h,g,ul(g)]}return n}function Wi(r,n){var a=fg(r,n);return Oh(a)?a:t}function ry(r){var n=nt.call(r,Hi),a=r[Hi];try{r[Hi]=t;var h=!0}catch{}var g=Js.call(r);return h&&(n?r[Hi]=a:delete r[Hi]),g}var lc=Ma?function(r){return r==null?[]:(r=ut(r),Ei(Ma(r),function(n){return fh.call(r,n)}))}:Ac,ol=Ma?function(r){for(var n=[];r;)Di(n,lc(r)),r=Qs(r);return n}:Ac,Qt=nr;(La&&Qt(new La(new ArrayBuffer(1)))!=Ae||Hn&&Qt(new Hn)!=Ie||Ba&&Qt(Ba.resolve())!=pt||wn&&Qt(new wn)!=xe||Kn&&Qt(new Kn)!=Pe)&&(Qt=function(r){var n=nr(r),a=n==je?r.constructor:t,h=a?Yi(a):"";if(h)switch(h){case Mg:return Ae;case Lg:return Ie;case Bg:return pt;case zg:return xe;case qg:return Pe}return n});function iy(r,n,a){for(var h=-1,g=a.length;++h<g;){var m=a[h],A=m.size;switch(m.type){case"drop":r+=A;break;case"dropRight":n-=A;break;case"take":n=Zt(n,r+A);break;case"takeRight":r=Kt(r,n-A);break}}return{start:r,end:n}}function ny(r){var n=r.match(ht);return n?n[1].split(Mt):[]}function al(r,n,a){n=Pi(n,r);for(var h=-1,g=n.length,m=!1;++h<g;){var A=ei(n[h]);if(!(m=r!=null&&a(r,A)))break;r=r[A]}return m||++h!=g?m:(g=r==null?0:r.length,!!g&&Oo(g)&&di(A,g)&&(Ne(r)||Ji(r)))}function sy(r){var n=r.length,a=new r.constructor(n);return n&&typeof r[0]=="string"&&nt.call(r,"index")&&(a.index=r.index,a.input=r.input),a}function cl(r){return typeof r.constructor=="function"&&!Qn(r)?Dn(Qs(r)):{}}function oy(r,n,a){var h=r.constructor;switch(n){case Se:return nc(r);case B:case F:return new h(+r);case Ae:return H0(r,a);case He:case Oe:case ke:case We:case et:case tt:case Je:case tr:case lr:return Kh(r,a);case Ie:return new h;case qe:case Re:return new h(r);case Le:return K0(r);case xe:return new h;case $e:return V0(r)}}function ay(r,n){var a=n.length;if(!a)return r;var h=a-1;return n[h]=(a>1?"& ":"")+n[h],n=n.join(a>2?", ":" "),r.replace(xt,`{
/* [wrapped with `+n+`] */
`)}function cy(r){return Ne(r)||Ji(r)||!!(dh&&r&&r[dh])}function di(r,n){var a=typeof r;return n=n??V,!!n&&(a=="number"||a!="symbol"&&pa.test(r))&&r>-1&&r%1==0&&r<n}function sr(r,n,a){if(!bt(a))return!1;var h=typeof n;return(h=="number"?pr(a)&&di(n,a.length):h=="string"&&n in a)?Kr(a[n],r):!1}function fc(r,n){if(Ne(r))return!1;var a=typeof r;return a=="number"||a=="symbol"||a=="boolean"||r==null||Dr(r)?!0:Ft.test(r)||!vt.test(r)||n!=null&&r in ut(n)}function uy(r){var n=typeof r;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?r!=="__proto__":r===null}function dc(r){var n=mo(r),a=_[n];if(typeof a!="function"||!(n in Ye.prototype))return!1;if(r===a)return!0;var h=uc(a);return!!h&&r===h[0]}function hy(r){return!!uh&&uh in r}var ly=Ws?pi:Cc;function Qn(r){var n=r&&r.constructor,a=typeof n=="function"&&n.prototype||bn;return r===a}function ul(r){return r===r&&!bt(r)}function hl(r,n){return function(a){return a==null?!1:a[r]===n&&(n!==t||r in ut(a))}}function fy(r){var n=Io(r,function(h){return a.size===p&&a.clear(),h}),a=n.cache;return n}function dy(r,n){var a=r[1],h=n[1],g=a|h,m=g<(H|ne|u),A=h==u&&a==U||h==u&&a==b&&r[7].length<=n[8]||h==(u|b)&&n[7].length<=n[8]&&a==U;if(!(m||A))return r;h&H&&(r[2]=n[2],g|=a&H?0:$);var R=n[3];if(R){var L=r[3];r[3]=L?kh(L,R,n[4]):R,r[4]=L?Si(r[3],v):n[4]}return R=n[5],R&&(L=r[5],r[5]=L?Gh(L,R,n[6]):R,r[6]=L?Si(r[5],v):n[6]),R=n[7],R&&(r[7]=R),h&u&&(r[8]=r[8]==null?n[8]:Zt(r[8],n[8])),r[9]==null&&(r[9]=n[9]),r[0]=n[0],r[1]=g,r}function py(r){var n=[];if(r!=null)for(var a in ut(r))n.push(a);return n}function gy(r){return Js.call(r)}function ll(r,n,a){return n=Kt(n===t?r.length-1:n,0),function(){for(var h=arguments,g=-1,m=Kt(h.length-n,0),A=K(m);++g<m;)A[g]=h[n+g];g=-1;for(var R=K(n+1);++g<n;)R[g]=h[g];return R[n]=a(A),Vt(r,this,R)}}function fl(r,n){return n.length<2?r:Gi(r,Rr(n,0,-1))}function yy(r,n){for(var a=r.length,h=Zt(n.length,a),g=dr(r);h--;){var m=n[h];r[h]=di(m,a)?g[m]:t}return r}function pc(r,n){if(!(n==="constructor"&&typeof r[n]=="function")&&n!="__proto__")return r[n]}var dl=gl(Uh),es=Tg||function(r,n){return Xe.setTimeout(r,n)},gc=gl(L0);function pl(r,n,a){var h=n+"";return gc(r,ay(h,vy(ny(h),a)))}function gl(r){var n=0,a=0;return function(){var h=Fg(),g=de-(h-a);if(a=h,g>0){if(++n>=ce)return arguments[0]}else n=0;return r.apply(t,arguments)}}function wo(r,n){var a=-1,h=r.length,g=h-1;for(n=n===t?h:n;++a<n;){var m=Xa(a,g),A=r[m];r[m]=r[a],r[a]=A}return r.length=n,r}var yl=fy(function(r){var n=[];return r.charCodeAt(0)===46&&n.push(""),r.replace(Ut,function(a,h,g,m){n.push(g?m.replace(ca,"$1"):h||a)}),n});function ei(r){if(typeof r=="string"||Dr(r))return r;var n=r+"";return n=="0"&&1/r==-X?"-0":n}function Yi(r){if(r!=null){try{return Ys.call(r)}catch{}try{return r+""}catch{}}return""}function vy(r,n){return Ar(we,function(a){var h="_."+a[0];n&a[1]&&!Ks(r,h)&&r.push(h)}),r.sort()}function vl(r){if(r instanceof Ye)return r.clone();var n=new Tr(r.__wrapped__,r.__chain__);return n.__actions__=dr(r.__actions__),n.__index__=r.__index__,n.__values__=r.__values__,n}function _y(r,n,a){(a?sr(r,n,a):n===t)?n=1:n=Kt(Me(n),0);var h=r==null?0:r.length;if(!h||n<1)return[];for(var g=0,m=0,A=K(ro(h/n));g<h;)A[m++]=Rr(r,g,g+=n);return A}function my(r){for(var n=-1,a=r==null?0:r.length,h=0,g=[];++n<a;){var m=r[n];m&&(g[h++]=m)}return g}function by(){var r=arguments.length;if(!r)return[];for(var n=K(r-1),a=arguments[0],h=r;h--;)n[h-1]=arguments[h];return Di(Ne(a)?dr(a):[a],Yt(n,1))}var wy=Ke(function(r,n){return Tt(r)?Wn(r,Yt(n,1,Tt,!0)):[]}),Ey=Ke(function(r,n){var a=$r(n);return Tt(a)&&(a=t),Tt(r)?Wn(r,Yt(n,1,Tt,!0),me(a,2)):[]}),Dy=Ke(function(r,n){var a=$r(n);return Tt(a)&&(a=t),Tt(r)?Wn(r,Yt(n,1,Tt,!0),t,a):[]});function Sy(r,n,a){var h=r==null?0:r.length;return h?(n=a||n===t?1:Me(n),Rr(r,n<0?0:n,h)):[]}function Iy(r,n,a){var h=r==null?0:r.length;return h?(n=a||n===t?1:Me(n),n=h-n,Rr(r,0,n<0?0:n)):[]}function xy(r,n){return r&&r.length?fo(r,me(n,3),!0,!0):[]}function Oy(r,n){return r&&r.length?fo(r,me(n,3),!0):[]}function Py(r,n,a,h){var g=r==null?0:r.length;return g?(a&&typeof a!="number"&&sr(r,n,a)&&(a=0,h=g),b0(r,n,a,h)):[]}function _l(r,n,a){var h=r==null?0:r.length;if(!h)return-1;var g=a==null?0:Me(a);return g<0&&(g=Kt(h+g,0)),Vs(r,me(n,3),g)}function ml(r,n,a){var h=r==null?0:r.length;if(!h)return-1;var g=h-1;return a!==t&&(g=Me(a),g=a<0?Kt(h+g,0):Zt(g,h-1)),Vs(r,me(n,3),g,!0)}function bl(r){var n=r==null?0:r.length;return n?Yt(r,1):[]}function Ay(r){var n=r==null?0:r.length;return n?Yt(r,X):[]}function Cy(r,n){var a=r==null?0:r.length;return a?(n=n===t?1:Me(n),Yt(r,n)):[]}function Ty(r){for(var n=-1,a=r==null?0:r.length,h={};++n<a;){var g=r[n];h[g[0]]=g[1]}return h}function wl(r){return r&&r.length?r[0]:t}function Ny(r,n,a){var h=r==null?0:r.length;if(!h)return-1;var g=a==null?0:Me(a);return g<0&&(g=Kt(h+g,0)),yn(r,n,g)}function Ry(r){var n=r==null?0:r.length;return n?Rr(r,0,-1):[]}var $y=Ke(function(r){var n=_t(r,rc);return n.length&&n[0]===r[0]?ka(n):[]}),Fy=Ke(function(r){var n=$r(r),a=_t(r,rc);return n===$r(a)?n=t:a.pop(),a.length&&a[0]===r[0]?ka(a,me(n,2)):[]}),Uy=Ke(function(r){var n=$r(r),a=_t(r,rc);return n=typeof n=="function"?n:t,n&&a.pop(),a.length&&a[0]===r[0]?ka(a,t,n):[]});function jy(r,n){return r==null?"":Rg.call(r,n)}function $r(r){var n=r==null?0:r.length;return n?r[n-1]:t}function My(r,n,a){var h=r==null?0:r.length;if(!h)return-1;var g=h;return a!==t&&(g=Me(a),g=g<0?Kt(h+g,0):Zt(g,h-1)),n===n?vg(r,n,g):Vs(r,th,g,!0)}function Ly(r,n){return r&&r.length?Nh(r,Me(n)):t}var By=Ke(El);function El(r,n){return r&&r.length&&n&&n.length?Ja(r,n):r}function zy(r,n,a){return r&&r.length&&n&&n.length?Ja(r,n,me(a,2)):r}function qy(r,n,a){return r&&r.length&&n&&n.length?Ja(r,n,t,a):r}var Hy=fi(function(r,n){var a=r==null?0:r.length,h=qa(r,n);return Fh(r,_t(n,function(g){return di(g,a)?+g:g}).sort(Vh)),h});function Ky(r,n){var a=[];if(!(r&&r.length))return a;var h=-1,g=[],m=r.length;for(n=me(n,3);++h<m;){var A=r[h];n(A,h,r)&&(a.push(A),g.push(h))}return Fh(r,g),a}function yc(r){return r==null?r:jg.call(r)}function Vy(r,n,a){var h=r==null?0:r.length;return h?(a&&typeof a!="number"&&sr(r,n,a)?(n=0,a=h):(n=n==null?0:Me(n),a=a===t?h:Me(a)),Rr(r,n,a)):[]}function ky(r,n){return lo(r,n)}function Gy(r,n,a){return Qa(r,n,me(a,2))}function Wy(r,n){var a=r==null?0:r.length;if(a){var h=lo(r,n);if(h<a&&Kr(r[h],n))return h}return-1}function Yy(r,n){return lo(r,n,!0)}function Jy(r,n,a){return Qa(r,n,me(a,2),!0)}function Xy(r,n){var a=r==null?0:r.length;if(a){var h=lo(r,n,!0)-1;if(Kr(r[h],n))return h}return-1}function Zy(r){return r&&r.length?jh(r):[]}function Qy(r,n){return r&&r.length?jh(r,me(n,2)):[]}function e1(r){var n=r==null?0:r.length;return n?Rr(r,1,n):[]}function t1(r,n,a){return r&&r.length?(n=a||n===t?1:Me(n),Rr(r,0,n<0?0:n)):[]}function r1(r,n,a){var h=r==null?0:r.length;return h?(n=a||n===t?1:Me(n),n=h-n,Rr(r,n<0?0:n,h)):[]}function i1(r,n){return r&&r.length?fo(r,me(n,3),!1,!0):[]}function n1(r,n){return r&&r.length?fo(r,me(n,3)):[]}var s1=Ke(function(r){return Oi(Yt(r,1,Tt,!0))}),o1=Ke(function(r){var n=$r(r);return Tt(n)&&(n=t),Oi(Yt(r,1,Tt,!0),me(n,2))}),a1=Ke(function(r){var n=$r(r);return n=typeof n=="function"?n:t,Oi(Yt(r,1,Tt,!0),t,n)});function c1(r){return r&&r.length?Oi(r):[]}function u1(r,n){return r&&r.length?Oi(r,me(n,2)):[]}function h1(r,n){return n=typeof n=="function"?n:t,r&&r.length?Oi(r,t,n):[]}function vc(r){if(!(r&&r.length))return[];var n=0;return r=Ei(r,function(a){if(Tt(a))return n=Kt(a.length,n),!0}),$a(n,function(a){return _t(r,Ta(a))})}function Dl(r,n){if(!(r&&r.length))return[];var a=vc(r);return n==null?a:_t(a,function(h){return Vt(n,t,h)})}var l1=Ke(function(r,n){return Tt(r)?Wn(r,n):[]}),f1=Ke(function(r){return tc(Ei(r,Tt))}),d1=Ke(function(r){var n=$r(r);return Tt(n)&&(n=t),tc(Ei(r,Tt),me(n,2))}),p1=Ke(function(r){var n=$r(r);return n=typeof n=="function"?n:t,tc(Ei(r,Tt),t,n)}),g1=Ke(vc);function y1(r,n){return zh(r||[],n||[],Gn)}function v1(r,n){return zh(r||[],n||[],Xn)}var _1=Ke(function(r){var n=r.length,a=n>1?r[n-1]:t;return a=typeof a=="function"?(r.pop(),a):t,Dl(r,a)});function Sl(r){var n=_(r);return n.__chain__=!0,n}function m1(r,n){return n(r),r}function Eo(r,n){return n(r)}var b1=fi(function(r){var n=r.length,a=n?r[0]:0,h=this.__wrapped__,g=function(m){return qa(m,r)};return n>1||this.__actions__.length||!(h instanceof Ye)||!di(a)?this.thru(g):(h=h.slice(a,+a+(n?1:0)),h.__actions__.push({func:Eo,args:[g],thisArg:t}),new Tr(h,this.__chain__).thru(function(m){return n&&!m.length&&m.push(t),m}))});function w1(){return Sl(this)}function E1(){return new Tr(this.value(),this.__chain__)}function D1(){this.__values__===t&&(this.__values__=Ml(this.value()));var r=this.__index__>=this.__values__.length,n=r?t:this.__values__[this.__index__++];return{done:r,value:n}}function S1(){return this}function I1(r){for(var n,a=this;a instanceof oo;){var h=vl(a);h.__index__=0,h.__values__=t,n?g.__wrapped__=h:n=h;var g=h;a=a.__wrapped__}return g.__wrapped__=r,n}function x1(){var r=this.__wrapped__;if(r instanceof Ye){var n=r;return this.__actions__.length&&(n=new Ye(this)),n=n.reverse(),n.__actions__.push({func:Eo,args:[yc],thisArg:t}),new Tr(n,this.__chain__)}return this.thru(yc)}function O1(){return Bh(this.__wrapped__,this.__actions__)}var P1=po(function(r,n,a){nt.call(r,a)?++r[a]:hi(r,a,1)});function A1(r,n,a){var h=Ne(r)?Qu:m0;return a&&sr(r,n,a)&&(n=t),h(r,me(n,3))}function C1(r,n){var a=Ne(r)?Ei:Dh;return a(r,me(n,3))}var T1=Xh(_l),N1=Xh(ml);function R1(r,n){return Yt(Do(r,n),1)}function $1(r,n){return Yt(Do(r,n),X)}function F1(r,n,a){return a=a===t?1:Me(a),Yt(Do(r,n),a)}function Il(r,n){var a=Ne(r)?Ar:xi;return a(r,me(n,3))}function xl(r,n){var a=Ne(r)?eg:Eh;return a(r,me(n,3))}var U1=po(function(r,n,a){nt.call(r,a)?r[a].push(n):hi(r,a,[n])});function j1(r,n,a,h){r=pr(r)?r:Pn(r),a=a&&!h?Me(a):0;var g=r.length;return a<0&&(a=Kt(g+a,0)),Po(r)?a<=g&&r.indexOf(n,a)>-1:!!g&&yn(r,n,a)>-1}var M1=Ke(function(r,n,a){var h=-1,g=typeof n=="function",m=pr(r)?K(r.length):[];return xi(r,function(A){m[++h]=g?Vt(n,A,a):Yn(A,n,a)}),m}),L1=po(function(r,n,a){hi(r,a,n)});function Do(r,n){var a=Ne(r)?_t:Ah;return a(r,me(n,3))}function B1(r,n,a,h){return r==null?[]:(Ne(n)||(n=n==null?[]:[n]),a=h?t:a,Ne(a)||(a=a==null?[]:[a]),Rh(r,n,a))}var z1=po(function(r,n,a){r[a?0:1].push(n)},function(){return[[],[]]});function q1(r,n,a){var h=Ne(r)?Aa:ih,g=arguments.length<3;return h(r,me(n,4),a,g,xi)}function H1(r,n,a){var h=Ne(r)?tg:ih,g=arguments.length<3;return h(r,me(n,4),a,g,Eh)}function K1(r,n){var a=Ne(r)?Ei:Dh;return a(r,xo(me(n,3)))}function V1(r){var n=Ne(r)?_h:j0;return n(r)}function k1(r,n,a){(a?sr(r,n,a):n===t)?n=1:n=Me(n);var h=Ne(r)?p0:M0;return h(r,n)}function G1(r){var n=Ne(r)?g0:B0;return n(r)}function W1(r){if(r==null)return 0;if(pr(r))return Po(r)?_n(r):r.length;var n=Qt(r);return n==Ie||n==xe?r.size:Wa(r).length}function Y1(r,n,a){var h=Ne(r)?Ca:z0;return a&&sr(r,n,a)&&(n=t),h(r,me(n,3))}var J1=Ke(function(r,n){if(r==null)return[];var a=n.length;return a>1&&sr(r,n[0],n[1])?n=[]:a>2&&sr(n[0],n[1],n[2])&&(n=[n[0]]),Rh(r,Yt(n,1),[])}),So=Cg||function(){return Xe.Date.now()};function X1(r,n){if(typeof n!="function")throw new Cr(l);return r=Me(r),function(){if(--r<1)return n.apply(this,arguments)}}function Ol(r,n,a){return n=a?t:n,n=r&&n==null?r.length:n,li(r,u,t,t,t,t,n)}function Pl(r,n){var a;if(typeof n!="function")throw new Cr(l);return r=Me(r),function(){return--r>0&&(a=n.apply(this,arguments)),r<=1&&(n=t),a}}var _c=Ke(function(r,n,a){var h=H;if(a.length){var g=Si(a,xn(_c));h|=N}return li(r,h,n,a,g)}),Al=Ke(function(r,n,a){var h=H|ne;if(a.length){var g=Si(a,xn(Al));h|=N}return li(n,h,r,a,g)});function Cl(r,n,a){n=a?t:n;var h=li(r,U,t,t,t,t,t,n);return h.placeholder=Cl.placeholder,h}function Tl(r,n,a){n=a?t:n;var h=li(r,P,t,t,t,t,t,n);return h.placeholder=Tl.placeholder,h}function Nl(r,n,a){var h,g,m,A,R,L,Z=0,Q=!1,ie=!1,ue=!0;if(typeof r!="function")throw new Cr(l);n=Fr(n)||0,bt(a)&&(Q=!!a.leading,ie="maxWait"in a,m=ie?Kt(Fr(a.maxWait)||0,n):m,ue="trailing"in a?!!a.trailing:ue);function ye(Nt){var Vr=h,yi=g;return h=g=t,Z=Nt,A=r.apply(yi,Vr),A}function Ee(Nt){return Z=Nt,R=es(Ge,n),Q?ye(Nt):A}function ze(Nt){var Vr=Nt-L,yi=Nt-Z,Xl=n-Vr;return ie?Zt(Xl,m-yi):Xl}function De(Nt){var Vr=Nt-L,yi=Nt-Z;return L===t||Vr>=n||Vr<0||ie&&yi>=m}function Ge(){var Nt=So();if(De(Nt))return Ze(Nt);R=es(Ge,ze(Nt))}function Ze(Nt){return R=t,ue&&h?ye(Nt):(h=g=t,A)}function Sr(){R!==t&&qh(R),Z=0,h=L=g=R=t}function or(){return R===t?A:Ze(So())}function Ir(){var Nt=So(),Vr=De(Nt);if(h=arguments,g=this,L=Nt,Vr){if(R===t)return Ee(L);if(ie)return qh(R),R=es(Ge,n),ye(L)}return R===t&&(R=es(Ge,n)),A}return Ir.cancel=Sr,Ir.flush=or,Ir}var Z1=Ke(function(r,n){return wh(r,1,n)}),Q1=Ke(function(r,n,a){return wh(r,Fr(n)||0,a)});function ev(r){return li(r,G)}function Io(r,n){if(typeof r!="function"||n!=null&&typeof n!="function")throw new Cr(l);var a=function(){var h=arguments,g=n?n.apply(this,h):h[0],m=a.cache;if(m.has(g))return m.get(g);var A=r.apply(this,h);return a.cache=m.set(g,A)||m,A};return a.cache=new(Io.Cache||ui),a}Io.Cache=ui;function xo(r){if(typeof r!="function")throw new Cr(l);return function(){var n=arguments;switch(n.length){case 0:return!r.call(this);case 1:return!r.call(this,n[0]);case 2:return!r.call(this,n[0],n[1]);case 3:return!r.call(this,n[0],n[1],n[2])}return!r.apply(this,n)}}function tv(r){return Pl(2,r)}var rv=q0(function(r,n){n=n.length==1&&Ne(n[0])?_t(n[0],wr(me())):_t(Yt(n,1),wr(me()));var a=n.length;return Ke(function(h){for(var g=-1,m=Zt(h.length,a);++g<m;)h[g]=n[g].call(this,h[g]);return Vt(r,this,h)})}),mc=Ke(function(r,n){var a=Si(n,xn(mc));return li(r,N,t,n,a)}),Rl=Ke(function(r,n){var a=Si(n,xn(Rl));return li(r,E,t,n,a)}),iv=fi(function(r,n){return li(r,b,t,t,t,n)});function nv(r,n){if(typeof r!="function")throw new Cr(l);return n=n===t?n:Me(n),Ke(r,n)}function sv(r,n){if(typeof r!="function")throw new Cr(l);return n=n==null?0:Kt(Me(n),0),Ke(function(a){var h=a[n],g=Ai(a,0,n);return h&&Di(g,h),Vt(r,this,g)})}function ov(r,n,a){var h=!0,g=!0;if(typeof r!="function")throw new Cr(l);return bt(a)&&(h="leading"in a?!!a.leading:h,g="trailing"in a?!!a.trailing:g),Nl(r,n,{leading:h,maxWait:n,trailing:g})}function av(r){return Ol(r,1)}function cv(r,n){return mc(ic(n),r)}function uv(){if(!arguments.length)return[];var r=arguments[0];return Ne(r)?r:[r]}function hv(r){return Nr(r,x)}function lv(r,n){return n=typeof n=="function"?n:t,Nr(r,x,n)}function fv(r){return Nr(r,S|x)}function dv(r,n){return n=typeof n=="function"?n:t,Nr(r,S|x,n)}function pv(r,n){return n==null||bh(r,n,kt(n))}function Kr(r,n){return r===n||r!==r&&n!==n}var gv=_o(Va),yv=_o(function(r,n){return r>=n}),Ji=xh(function(){return arguments}())?xh:function(r){return Ot(r)&&nt.call(r,"callee")&&!fh.call(r,"callee")},Ne=K.isArray,vv=ir?wr(ir):I0;function pr(r){return r!=null&&Oo(r.length)&&!pi(r)}function Tt(r){return Ot(r)&&pr(r)}function _v(r){return r===!0||r===!1||Ot(r)&&nr(r)==B}var Ci=Ng||Cc,mv=zr?wr(zr):x0;function bv(r){return Ot(r)&&r.nodeType===1&&!ts(r)}function wv(r){if(r==null)return!0;if(pr(r)&&(Ne(r)||typeof r=="string"||typeof r.splice=="function"||Ci(r)||On(r)||Ji(r)))return!r.length;var n=Qt(r);if(n==Ie||n==xe)return!r.size;if(Qn(r))return!Wa(r).length;for(var a in r)if(nt.call(r,a))return!1;return!0}function Ev(r,n){return Jn(r,n)}function Dv(r,n,a){a=typeof a=="function"?a:t;var h=a?a(r,n):t;return h===t?Jn(r,n,t,a):!!h}function bc(r){if(!Ot(r))return!1;var n=nr(r);return n==T||n==d||typeof r.message=="string"&&typeof r.name=="string"&&!ts(r)}function Sv(r){return typeof r=="number"&&ph(r)}function pi(r){if(!bt(r))return!1;var n=nr(r);return n==ae||n==fe||n==q||n==gt}function $l(r){return typeof r=="number"&&r==Me(r)}function Oo(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=V}function bt(r){var n=typeof r;return r!=null&&(n=="object"||n=="function")}function Ot(r){return r!=null&&typeof r=="object"}var Fl=Pr?wr(Pr):P0;function Iv(r,n){return r===n||Ga(r,n,hc(n))}function xv(r,n,a){return a=typeof a=="function"?a:t,Ga(r,n,hc(n),a)}function Ov(r){return Ul(r)&&r!=+r}function Pv(r){if(ly(r))throw new Ce(c);return Oh(r)}function Av(r){return r===null}function Cv(r){return r==null}function Ul(r){return typeof r=="number"||Ot(r)&&nr(r)==qe}function ts(r){if(!Ot(r)||nr(r)!=je)return!1;var n=Qs(r);if(n===null)return!0;var a=nt.call(n,"constructor")&&n.constructor;return typeof a=="function"&&a instanceof a&&Ys.call(a)==xg}var wc=Xr?wr(Xr):A0;function Tv(r){return $l(r)&&r>=-V&&r<=V}var jl=Bn?wr(Bn):C0;function Po(r){return typeof r=="string"||!Ne(r)&&Ot(r)&&nr(r)==Re}function Dr(r){return typeof r=="symbol"||Ot(r)&&nr(r)==$e}var On=qi?wr(qi):T0;function Nv(r){return r===t}function Rv(r){return Ot(r)&&Qt(r)==Pe}function $v(r){return Ot(r)&&nr(r)==Fe}var Fv=_o(Ya),Uv=_o(function(r,n){return r<=n});function Ml(r){if(!r)return[];if(pr(r))return Po(r)?qr(r):dr(r);if(qn&&r[qn])return pg(r[qn]());var n=Qt(r),a=n==Ie?Ua:n==xe?ks:Pn;return a(r)}function gi(r){if(!r)return r===0?r:0;if(r=Fr(r),r===X||r===-X){var n=r<0?-1:1;return n*k}return r===r?r:0}function Me(r){var n=gi(r),a=n%1;return n===n?a?n-a:n:0}function Ll(r){return r?ki(Me(r),0,re):0}function Fr(r){if(typeof r=="number")return r;if(Dr(r))return J;if(bt(r)){var n=typeof r.valueOf=="function"?r.valueOf():r;r=bt(n)?n+"":n}if(typeof r!="string")return r===0?r:+r;r=nh(r);var a=la.test(r);return a||da.test(r)?Te(r.slice(2),a?2:8):ha.test(r)?J:+r}function Bl(r){return Qr(r,gr(r))}function jv(r){return r?ki(Me(r),-V,V):r===0?r:0}function it(r){return r==null?"":Er(r)}var Mv=Sn(function(r,n){if(Qn(n)||pr(n)){Qr(n,kt(n),r);return}for(var a in n)nt.call(n,a)&&Gn(r,a,n[a])}),zl=Sn(function(r,n){Qr(n,gr(n),r)}),Ao=Sn(function(r,n,a,h){Qr(n,gr(n),r,h)}),Lv=Sn(function(r,n,a,h){Qr(n,kt(n),r,h)}),Bv=fi(qa);function zv(r,n){var a=Dn(r);return n==null?a:mh(a,n)}var qv=Ke(function(r,n){r=ut(r);var a=-1,h=n.length,g=h>2?n[2]:t;for(g&&sr(n[0],n[1],g)&&(h=1);++a<h;)for(var m=n[a],A=gr(m),R=-1,L=A.length;++R<L;){var Z=A[R],Q=r[Z];(Q===t||Kr(Q,bn[Z])&&!nt.call(r,Z))&&(r[Z]=m[Z])}return r}),Hv=Ke(function(r){return r.push(t,nl),Vt(ql,t,r)});function Kv(r,n){return eh(r,me(n,3),Zr)}function Vv(r,n){return eh(r,me(n,3),Ka)}function kv(r,n){return r==null?r:Ha(r,me(n,3),gr)}function Gv(r,n){return r==null?r:Sh(r,me(n,3),gr)}function Wv(r,n){return r&&Zr(r,me(n,3))}function Yv(r,n){return r&&Ka(r,me(n,3))}function Jv(r){return r==null?[]:uo(r,kt(r))}function Xv(r){return r==null?[]:uo(r,gr(r))}function Ec(r,n,a){var h=r==null?t:Gi(r,n);return h===t?a:h}function Zv(r,n){return r!=null&&al(r,n,w0)}function Dc(r,n){return r!=null&&al(r,n,E0)}var Qv=Qh(function(r,n,a){n!=null&&typeof n.toString!="function"&&(n=Js.call(n)),r[n]=a},Ic(yr)),e_=Qh(function(r,n,a){n!=null&&typeof n.toString!="function"&&(n=Js.call(n)),nt.call(r,n)?r[n].push(a):r[n]=[a]},me),t_=Ke(Yn);function kt(r){return pr(r)?vh(r):Wa(r)}function gr(r){return pr(r)?vh(r,!0):N0(r)}function r_(r,n){var a={};return n=me(n,3),Zr(r,function(h,g,m){hi(a,n(h,g,m),h)}),a}function i_(r,n){var a={};return n=me(n,3),Zr(r,function(h,g,m){hi(a,g,n(h,g,m))}),a}var n_=Sn(function(r,n,a){ho(r,n,a)}),ql=Sn(function(r,n,a,h){ho(r,n,a,h)}),s_=fi(function(r,n){var a={};if(r==null)return a;var h=!1;n=_t(n,function(m){return m=Pi(m,r),h||(h=m.length>1),m}),Qr(r,cc(r),a),h&&(a=Nr(a,S|D|x,Q0));for(var g=n.length;g--;)ec(a,n[g]);return a});function o_(r,n){return Hl(r,xo(me(n)))}var a_=fi(function(r,n){return r==null?{}:$0(r,n)});function Hl(r,n){if(r==null)return{};var a=_t(cc(r),function(h){return[h]});return n=me(n),$h(r,a,function(h,g){return n(h,g[0])})}function c_(r,n,a){n=Pi(n,r);var h=-1,g=n.length;for(g||(g=1,r=t);++h<g;){var m=r==null?t:r[ei(n[h])];m===t&&(h=g,m=a),r=pi(m)?m.call(r):m}return r}function u_(r,n,a){return r==null?r:Xn(r,n,a)}function h_(r,n,a,h){return h=typeof h=="function"?h:t,r==null?r:Xn(r,n,a,h)}var Kl=rl(kt),Vl=rl(gr);function l_(r,n,a){var h=Ne(r),g=h||Ci(r)||On(r);if(n=me(n,4),a==null){var m=r&&r.constructor;g?a=h?new m:[]:bt(r)?a=pi(m)?Dn(Qs(r)):{}:a={}}return(g?Ar:Zr)(r,function(A,R,L){return n(a,A,R,L)}),a}function f_(r,n){return r==null?!0:ec(r,n)}function d_(r,n,a){return r==null?r:Lh(r,n,ic(a))}function p_(r,n,a,h){return h=typeof h=="function"?h:t,r==null?r:Lh(r,n,ic(a),h)}function Pn(r){return r==null?[]:Fa(r,kt(r))}function g_(r){return r==null?[]:Fa(r,gr(r))}function y_(r,n,a){return a===t&&(a=n,n=t),a!==t&&(a=Fr(a),a=a===a?a:0),n!==t&&(n=Fr(n),n=n===n?n:0),ki(Fr(r),n,a)}function v_(r,n,a){return n=gi(n),a===t?(a=n,n=0):a=gi(a),r=Fr(r),D0(r,n,a)}function __(r,n,a){if(a&&typeof a!="boolean"&&sr(r,n,a)&&(n=a=t),a===t&&(typeof n=="boolean"?(a=n,n=t):typeof r=="boolean"&&(a=r,r=t)),r===t&&n===t?(r=0,n=1):(r=gi(r),n===t?(n=r,r=0):n=gi(n)),r>n){var h=r;r=n,n=h}if(a||r%1||n%1){var g=gh();return Zt(r+g*(n-r+at("1e-"+((g+"").length-1))),n)}return Xa(r,n)}var m_=In(function(r,n,a){return n=n.toLowerCase(),r+(a?kl(n):n)});function kl(r){return Sc(it(r).toLowerCase())}function Gl(r){return r=it(r),r&&r.replace(oi,ug).replace(xa,"")}function b_(r,n,a){r=it(r),n=Er(n);var h=r.length;a=a===t?h:ki(Me(a),0,h);var g=a;return a-=n.length,a>=0&&r.slice(a,g)==n}function w_(r){return r=it(r),r&&yt.test(r)?r.replace(ji,hg):r}function E_(r){return r=it(r),r&&jt.test(r)?r.replace(St,"\\$&"):r}var D_=In(function(r,n,a){return r+(a?"-":"")+n.toLowerCase()}),S_=In(function(r,n,a){return r+(a?" ":"")+n.toLowerCase()}),I_=Jh("toLowerCase");function x_(r,n,a){r=it(r),n=Me(n);var h=n?_n(r):0;if(!n||h>=n)return r;var g=(n-h)/2;return vo(io(g),a)+r+vo(ro(g),a)}function O_(r,n,a){r=it(r),n=Me(n);var h=n?_n(r):0;return n&&h<n?r+vo(n-h,a):r}function P_(r,n,a){r=it(r),n=Me(n);var h=n?_n(r):0;return n&&h<n?vo(n-h,a)+r:r}function A_(r,n,a){return a||n==null?n=0:n&&(n=+n),Ug(it(r).replace(It,""),n||0)}function C_(r,n,a){return(a?sr(r,n,a):n===t)?n=1:n=Me(n),Za(it(r),n)}function T_(){var r=arguments,n=it(r[0]);return r.length<3?n:n.replace(r[1],r[2])}var N_=In(function(r,n,a){return r+(a?"_":"")+n.toLowerCase()});function R_(r,n,a){return a&&typeof a!="number"&&sr(r,n,a)&&(n=a=t),a=a===t?re:a>>>0,a?(r=it(r),r&&(typeof n=="string"||n!=null&&!wc(n))&&(n=Er(n),!n&&vn(r))?Ai(qr(r),0,a):r.split(n,a)):[]}var $_=In(function(r,n,a){return r+(a?" ":"")+Sc(n)});function F_(r,n,a){return r=it(r),a=a==null?0:ki(Me(a),0,r.length),n=Er(n),r.slice(a,a+n.length)==n}function U_(r,n,a){var h=_.templateSettings;a&&sr(r,n,a)&&(n=t),r=it(r),n=Ao({},n,h,il);var g=Ao({},n.imports,h.imports,il),m=kt(g),A=Fa(g,m),R,L,Z=0,Q=n.interpolate||un,ie="__p += '",ue=ja((n.escape||un).source+"|"+Q.source+"|"+(Q===mt?ua:un).source+"|"+(n.evaluate||un).source+"|$","g"),ye="//# sourceURL="+(nt.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Oa+"]")+`
`;r.replace(ue,function(De,Ge,Ze,Sr,or,Ir){return Ze||(Ze=Sr),ie+=r.slice(Z,Ir).replace(ga,lg),Ge&&(R=!0,ie+=`' +
__e(`+Ge+`) +
'`),or&&(L=!0,ie+=`';
`+or+`;
__p += '`),Ze&&(ie+=`' +
((__t = (`+Ze+`)) == null ? '' : __t) +
'`),Z=Ir+De.length,De}),ie+=`';
`;var Ee=nt.call(n,"variable")&&n.variable;if(!Ee)ie=`with (obj) {
`+ie+`
}
`;else if(aa.test(Ee))throw new Ce(f);ie=(L?ie.replace(Yr,""):ie).replace(rr,"$1").replace(si,"$1;"),ie="function("+(Ee||"obj")+`) {
`+(Ee?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(R?", __e = _.escape":"")+(L?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ie+`return __p
}`;var ze=Yl(function(){return rt(m,ye+"return "+ie).apply(t,A)});if(ze.source=ie,bc(ze))throw ze;return ze}function j_(r){return it(r).toLowerCase()}function M_(r){return it(r).toUpperCase()}function L_(r,n,a){if(r=it(r),r&&(a||n===t))return nh(r);if(!r||!(n=Er(n)))return r;var h=qr(r),g=qr(n),m=sh(h,g),A=oh(h,g)+1;return Ai(h,m,A).join("")}function B_(r,n,a){if(r=it(r),r&&(a||n===t))return r.slice(0,ch(r)+1);if(!r||!(n=Er(n)))return r;var h=qr(r),g=oh(h,qr(n))+1;return Ai(h,0,g).join("")}function z_(r,n,a){if(r=it(r),r&&(a||n===t))return r.replace(It,"");if(!r||!(n=Er(n)))return r;var h=qr(r),g=sh(h,qr(n));return Ai(h,g).join("")}function q_(r,n){var a=W,h=se;if(bt(n)){var g="separator"in n?n.separator:g;a="length"in n?Me(n.length):a,h="omission"in n?Er(n.omission):h}r=it(r);var m=r.length;if(vn(r)){var A=qr(r);m=A.length}if(a>=m)return r;var R=a-_n(h);if(R<1)return h;var L=A?Ai(A,0,R).join(""):r.slice(0,R);if(g===t)return L+h;if(A&&(R+=L.length-R),wc(g)){if(r.slice(R).search(g)){var Z,Q=L;for(g.global||(g=ja(g.source,it(Or.exec(g))+"g")),g.lastIndex=0;Z=g.exec(Q);)var ie=Z.index;L=L.slice(0,ie===t?R:ie)}}else if(r.indexOf(Er(g),R)!=R){var ue=L.lastIndexOf(g);ue>-1&&(L=L.slice(0,ue))}return L+h}function H_(r){return r=it(r),r&&wt.test(r)?r.replace(bi,_g):r}var K_=In(function(r,n,a){return r+(a?" ":"")+n.toUpperCase()}),Sc=Jh("toUpperCase");function Wl(r,n,a){return r=it(r),n=a?t:n,n===t?dg(r)?wg(r):ng(r):r.match(n)||[]}var Yl=Ke(function(r,n){try{return Vt(r,t,n)}catch(a){return bc(a)?a:new Ce(a)}}),V_=fi(function(r,n){return Ar(n,function(a){a=ei(a),hi(r,a,_c(r[a],r))}),r});function k_(r){var n=r==null?0:r.length,a=me();return r=n?_t(r,function(h){if(typeof h[1]!="function")throw new Cr(l);return[a(h[0]),h[1]]}):[],Ke(function(h){for(var g=-1;++g<n;){var m=r[g];if(Vt(m[0],this,h))return Vt(m[1],this,h)}})}function G_(r){return _0(Nr(r,S))}function Ic(r){return function(){return r}}function W_(r,n){return r==null||r!==r?n:r}var Y_=Zh(),J_=Zh(!0);function yr(r){return r}function xc(r){return Ph(typeof r=="function"?r:Nr(r,S))}function X_(r){return Ch(Nr(r,S))}function Z_(r,n){return Th(r,Nr(n,S))}var Q_=Ke(function(r,n){return function(a){return Yn(a,r,n)}}),em=Ke(function(r,n){return function(a){return Yn(r,a,n)}});function Oc(r,n,a){var h=kt(n),g=uo(n,h);a==null&&!(bt(n)&&(g.length||!h.length))&&(a=n,n=r,r=this,g=uo(n,kt(n)));var m=!(bt(a)&&"chain"in a)||!!a.chain,A=pi(r);return Ar(g,function(R){var L=n[R];r[R]=L,A&&(r.prototype[R]=function(){var Z=this.__chain__;if(m||Z){var Q=r(this.__wrapped__),ie=Q.__actions__=dr(this.__actions__);return ie.push({func:L,args:arguments,thisArg:r}),Q.__chain__=Z,Q}return L.apply(r,Di([this.value()],arguments))})}),r}function tm(){return Xe._===this&&(Xe._=Og),this}function Pc(){}function rm(r){return r=Me(r),Ke(function(n){return Nh(n,r)})}var im=sc(_t),nm=sc(Qu),sm=sc(Ca);function Jl(r){return fc(r)?Ta(ei(r)):F0(r)}function om(r){return function(n){return r==null?t:Gi(r,n)}}var am=el(),cm=el(!0);function Ac(){return[]}function Cc(){return!1}function um(){return{}}function hm(){return""}function lm(){return!0}function fm(r,n){if(r=Me(r),r<1||r>V)return[];var a=re,h=Zt(r,re);n=me(n),r-=re;for(var g=$a(h,n);++a<r;)n(a);return g}function dm(r){return Ne(r)?_t(r,ei):Dr(r)?[r]:dr(yl(it(r)))}function pm(r){var n=++Ig;return it(r)+n}var gm=yo(function(r,n){return r+n},0),ym=oc("ceil"),vm=yo(function(r,n){return r/n},1),_m=oc("floor");function mm(r){return r&&r.length?co(r,yr,Va):t}function bm(r,n){return r&&r.length?co(r,me(n,2),Va):t}function wm(r){return rh(r,yr)}function Em(r,n){return rh(r,me(n,2))}function Dm(r){return r&&r.length?co(r,yr,Ya):t}function Sm(r,n){return r&&r.length?co(r,me(n,2),Ya):t}var Im=yo(function(r,n){return r*n},1),xm=oc("round"),Om=yo(function(r,n){return r-n},0);function Pm(r){return r&&r.length?Ra(r,yr):0}function Am(r,n){return r&&r.length?Ra(r,me(n,2)):0}return _.after=X1,_.ary=Ol,_.assign=Mv,_.assignIn=zl,_.assignInWith=Ao,_.assignWith=Lv,_.at=Bv,_.before=Pl,_.bind=_c,_.bindAll=V_,_.bindKey=Al,_.castArray=uv,_.chain=Sl,_.chunk=_y,_.compact=my,_.concat=by,_.cond=k_,_.conforms=G_,_.constant=Ic,_.countBy=P1,_.create=zv,_.curry=Cl,_.curryRight=Tl,_.debounce=Nl,_.defaults=qv,_.defaultsDeep=Hv,_.defer=Z1,_.delay=Q1,_.difference=wy,_.differenceBy=Ey,_.differenceWith=Dy,_.drop=Sy,_.dropRight=Iy,_.dropRightWhile=xy,_.dropWhile=Oy,_.fill=Py,_.filter=C1,_.flatMap=R1,_.flatMapDeep=$1,_.flatMapDepth=F1,_.flatten=bl,_.flattenDeep=Ay,_.flattenDepth=Cy,_.flip=ev,_.flow=Y_,_.flowRight=J_,_.fromPairs=Ty,_.functions=Jv,_.functionsIn=Xv,_.groupBy=U1,_.initial=Ry,_.intersection=$y,_.intersectionBy=Fy,_.intersectionWith=Uy,_.invert=Qv,_.invertBy=e_,_.invokeMap=M1,_.iteratee=xc,_.keyBy=L1,_.keys=kt,_.keysIn=gr,_.map=Do,_.mapKeys=r_,_.mapValues=i_,_.matches=X_,_.matchesProperty=Z_,_.memoize=Io,_.merge=n_,_.mergeWith=ql,_.method=Q_,_.methodOf=em,_.mixin=Oc,_.negate=xo,_.nthArg=rm,_.omit=s_,_.omitBy=o_,_.once=tv,_.orderBy=B1,_.over=im,_.overArgs=rv,_.overEvery=nm,_.overSome=sm,_.partial=mc,_.partialRight=Rl,_.partition=z1,_.pick=a_,_.pickBy=Hl,_.property=Jl,_.propertyOf=om,_.pull=By,_.pullAll=El,_.pullAllBy=zy,_.pullAllWith=qy,_.pullAt=Hy,_.range=am,_.rangeRight=cm,_.rearg=iv,_.reject=K1,_.remove=Ky,_.rest=nv,_.reverse=yc,_.sampleSize=k1,_.set=u_,_.setWith=h_,_.shuffle=G1,_.slice=Vy,_.sortBy=J1,_.sortedUniq=Zy,_.sortedUniqBy=Qy,_.split=R_,_.spread=sv,_.tail=e1,_.take=t1,_.takeRight=r1,_.takeRightWhile=i1,_.takeWhile=n1,_.tap=m1,_.throttle=ov,_.thru=Eo,_.toArray=Ml,_.toPairs=Kl,_.toPairsIn=Vl,_.toPath=dm,_.toPlainObject=Bl,_.transform=l_,_.unary=av,_.union=s1,_.unionBy=o1,_.unionWith=a1,_.uniq=c1,_.uniqBy=u1,_.uniqWith=h1,_.unset=f_,_.unzip=vc,_.unzipWith=Dl,_.update=d_,_.updateWith=p_,_.values=Pn,_.valuesIn=g_,_.without=l1,_.words=Wl,_.wrap=cv,_.xor=f1,_.xorBy=d1,_.xorWith=p1,_.zip=g1,_.zipObject=y1,_.zipObjectDeep=v1,_.zipWith=_1,_.entries=Kl,_.entriesIn=Vl,_.extend=zl,_.extendWith=Ao,Oc(_,_),_.add=gm,_.attempt=Yl,_.camelCase=m_,_.capitalize=kl,_.ceil=ym,_.clamp=y_,_.clone=hv,_.cloneDeep=fv,_.cloneDeepWith=dv,_.cloneWith=lv,_.conformsTo=pv,_.deburr=Gl,_.defaultTo=W_,_.divide=vm,_.endsWith=b_,_.eq=Kr,_.escape=w_,_.escapeRegExp=E_,_.every=A1,_.find=T1,_.findIndex=_l,_.findKey=Kv,_.findLast=N1,_.findLastIndex=ml,_.findLastKey=Vv,_.floor=_m,_.forEach=Il,_.forEachRight=xl,_.forIn=kv,_.forInRight=Gv,_.forOwn=Wv,_.forOwnRight=Yv,_.get=Ec,_.gt=gv,_.gte=yv,_.has=Zv,_.hasIn=Dc,_.head=wl,_.identity=yr,_.includes=j1,_.indexOf=Ny,_.inRange=v_,_.invoke=t_,_.isArguments=Ji,_.isArray=Ne,_.isArrayBuffer=vv,_.isArrayLike=pr,_.isArrayLikeObject=Tt,_.isBoolean=_v,_.isBuffer=Ci,_.isDate=mv,_.isElement=bv,_.isEmpty=wv,_.isEqual=Ev,_.isEqualWith=Dv,_.isError=bc,_.isFinite=Sv,_.isFunction=pi,_.isInteger=$l,_.isLength=Oo,_.isMap=Fl,_.isMatch=Iv,_.isMatchWith=xv,_.isNaN=Ov,_.isNative=Pv,_.isNil=Cv,_.isNull=Av,_.isNumber=Ul,_.isObject=bt,_.isObjectLike=Ot,_.isPlainObject=ts,_.isRegExp=wc,_.isSafeInteger=Tv,_.isSet=jl,_.isString=Po,_.isSymbol=Dr,_.isTypedArray=On,_.isUndefined=Nv,_.isWeakMap=Rv,_.isWeakSet=$v,_.join=jy,_.kebabCase=D_,_.last=$r,_.lastIndexOf=My,_.lowerCase=S_,_.lowerFirst=I_,_.lt=Fv,_.lte=Uv,_.max=mm,_.maxBy=bm,_.mean=wm,_.meanBy=Em,_.min=Dm,_.minBy=Sm,_.stubArray=Ac,_.stubFalse=Cc,_.stubObject=um,_.stubString=hm,_.stubTrue=lm,_.multiply=Im,_.nth=Ly,_.noConflict=tm,_.noop=Pc,_.now=So,_.pad=x_,_.padEnd=O_,_.padStart=P_,_.parseInt=A_,_.random=__,_.reduce=q1,_.reduceRight=H1,_.repeat=C_,_.replace=T_,_.result=c_,_.round=xm,_.runInContext=M,_.sample=V1,_.size=W1,_.snakeCase=N_,_.some=Y1,_.sortedIndex=ky,_.sortedIndexBy=Gy,_.sortedIndexOf=Wy,_.sortedLastIndex=Yy,_.sortedLastIndexBy=Jy,_.sortedLastIndexOf=Xy,_.startCase=$_,_.startsWith=F_,_.subtract=Om,_.sum=Pm,_.sumBy=Am,_.template=U_,_.times=fm,_.toFinite=gi,_.toInteger=Me,_.toLength=Ll,_.toLower=j_,_.toNumber=Fr,_.toSafeInteger=jv,_.toString=it,_.toUpper=M_,_.trim=L_,_.trimEnd=B_,_.trimStart=z_,_.truncate=q_,_.unescape=H_,_.uniqueId=pm,_.upperCase=K_,_.upperFirst=Sc,_.each=Il,_.eachRight=xl,_.first=wl,Oc(_,function(){var r={};return Zr(_,function(n,a){nt.call(_.prototype,a)||(r[a]=n)}),r}(),{chain:!1}),_.VERSION=s,Ar(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){_[r].placeholder=_}),Ar(["drop","take"],function(r,n){Ye.prototype[r]=function(a){a=a===t?1:Kt(Me(a),0);var h=this.__filtered__&&!n?new Ye(this):this.clone();return h.__filtered__?h.__takeCount__=Zt(a,h.__takeCount__):h.__views__.push({size:Zt(a,re),type:r+(h.__dir__<0?"Right":"")}),h},Ye.prototype[r+"Right"]=function(a){return this.reverse()[r](a).reverse()}}),Ar(["filter","map","takeWhile"],function(r,n){var a=n+1,h=a==w||a==ee;Ye.prototype[r]=function(g){var m=this.clone();return m.__iteratees__.push({iteratee:me(g,3),type:a}),m.__filtered__=m.__filtered__||h,m}}),Ar(["head","last"],function(r,n){var a="take"+(n?"Right":"");Ye.prototype[r]=function(){return this[a](1).value()[0]}}),Ar(["initial","tail"],function(r,n){var a="drop"+(n?"":"Right");Ye.prototype[r]=function(){return this.__filtered__?new Ye(this):this[a](1)}}),Ye.prototype.compact=function(){return this.filter(yr)},Ye.prototype.find=function(r){return this.filter(r).head()},Ye.prototype.findLast=function(r){return this.reverse().find(r)},Ye.prototype.invokeMap=Ke(function(r,n){return typeof r=="function"?new Ye(this):this.map(function(a){return Yn(a,r,n)})}),Ye.prototype.reject=function(r){return this.filter(xo(me(r)))},Ye.prototype.slice=function(r,n){r=Me(r);var a=this;return a.__filtered__&&(r>0||n<0)?new Ye(a):(r<0?a=a.takeRight(-r):r&&(a=a.drop(r)),n!==t&&(n=Me(n),a=n<0?a.dropRight(-n):a.take(n-r)),a)},Ye.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},Ye.prototype.toArray=function(){return this.take(re)},Zr(Ye.prototype,function(r,n){var a=/^(?:filter|find|map|reject)|While$/.test(n),h=/^(?:head|last)$/.test(n),g=_[h?"take"+(n=="last"?"Right":""):n],m=h||/^find/.test(n);g&&(_.prototype[n]=function(){var A=this.__wrapped__,R=h?[1]:arguments,L=A instanceof Ye,Z=R[0],Q=L||Ne(A),ie=function(Ge){var Ze=g.apply(_,Di([Ge],R));return h&&ue?Ze[0]:Ze};Q&&a&&typeof Z=="function"&&Z.length!=1&&(L=Q=!1);var ue=this.__chain__,ye=!!this.__actions__.length,Ee=m&&!ue,ze=L&&!ye;if(!m&&Q){A=ze?A:new Ye(this);var De=r.apply(A,R);return De.__actions__.push({func:Eo,args:[ie],thisArg:t}),new Tr(De,ue)}return Ee&&ze?r.apply(this,R):(De=this.thru(ie),Ee?h?De.value()[0]:De.value():De)})}),Ar(["pop","push","shift","sort","splice","unshift"],function(r){var n=Gs[r],a=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",h=/^(?:pop|shift)$/.test(r);_.prototype[r]=function(){var g=arguments;if(h&&!this.__chain__){var m=this.value();return n.apply(Ne(m)?m:[],g)}return this[a](function(A){return n.apply(Ne(A)?A:[],g)})}}),Zr(Ye.prototype,function(r,n){var a=_[n];if(a){var h=a.name+"";nt.call(En,h)||(En[h]=[]),En[h].push({name:n,func:a})}}),En[go(t,ne).name]=[{name:"wrapper",func:t}],Ye.prototype.clone=Hg,Ye.prototype.reverse=Kg,Ye.prototype.value=Vg,_.prototype.at=b1,_.prototype.chain=w1,_.prototype.commit=E1,_.prototype.next=D1,_.prototype.plant=I1,_.prototype.reverse=x1,_.prototype.toJSON=_.prototype.valueOf=_.prototype.value=O1,_.prototype.first=_.prototype.head,qn&&(_.prototype[qn]=S1),_},mn=Eg();Ct?((Ct.exports=mn)._=mn,ct._=mn):Xe._=mn}).call(hs)})(Iu,Iu.exports);var l5=Object.defineProperty,f5=Object.defineProperties,d5=Object.getOwnPropertyDescriptors,Id=Object.getOwnPropertySymbols,p5=Object.prototype.hasOwnProperty,g5=Object.prototype.propertyIsEnumerable,xd=(i,e,t)=>e in i?l5(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Ro=(i,e)=>{for(var t in e||(e={}))p5.call(e,t)&&xd(i,t,e[t]);if(Id)for(var t of Id(e))g5.call(e,t)&&xd(i,t,e[t]);return i},y5=(i,e)=>f5(i,d5(e));function Mr(i,e,t){let s;const o=xu(i);return e.rpcMap&&(s=e.rpcMap[o]),s||(s=`${h5}?chainId=eip155:${o}&projectId=${t}`),s}function xu(i){return i.includes("eip155")?Number(i.split(":")[1]):Number(i)}function Xp(i){return i.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function v5(i,e){const t=Object.keys(e.namespaces).filter(o=>o.includes(i));if(!t.length)return[];const s=[];return t.forEach(o=>{const c=e.namespaces[o].accounts;s.push(...c)}),s}function _5(i={},e={}){const t=Od(i),s=Od(e);return Iu.exports.merge(t,s)}function Od(i){var e,t,s,o;const c={};if(!Nn(i))return c;for(const[l,f]of Object.entries(i)){const y=zu(l)?[l]:f.chains,p=f.methods||[],v=f.events||[],S=f.rpcMap||{},D=Uo(l);c[D]=y5(Ro(Ro({},c[D]),f),{chains:Uc(y,(e=c[D])==null?void 0:e.chains),methods:Uc(p,(t=c[D])==null?void 0:t.methods),events:Uc(v,(s=c[D])==null?void 0:s.events),rpcMap:Ro(Ro({},S),(o=c[D])==null?void 0:o.rpcMap)})}return c}function m5(i){return i.includes(":")?i.split(":")[2]:i}function b5(i){const e={};for(const[t,s]of Object.entries(i)){const o=s.methods||[],c=s.events||[],l=s.accounts||[],f=zu(t)?[t]:s.chains?s.chains:Xp(s.accounts);e[t]={chains:f,methods:o,events:c,accounts:l}}return e}const Zp={},$t=i=>Zp[i],Yc=(i,e)=>{Zp[i]=e};class w5{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=$t("events"),this.client=$t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||Mr(`${this.name}:${e}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||Mr(e,this.namespace);return typeof s>"u"?void 0:new Fi(new cn(s,$t("disableProviderPing")))}}class E5{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=$t("events"),this.client=$t("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){const s=xu(e);if(!this.httpProviders[s]){const o=t||Mr(`${this.name}:${s}`,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${s}`);this.setHttpProvider(s,o)}this.chainId=s,this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const s=t||Mr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Fi(new cn(s,$t("disableProviderPing")))}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;const o=xu(t);e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,s;let o=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";o=o.startsWith("0x")?o:`0x${o}`;const c=parseInt(o,16);if(this.isChainApproved(c))this.setDefaultChain(`${c}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:o}]},chainId:(s=this.namespace.chains)==null?void 0:s[0]}),this.setDefaultChain(`${c}`);else throw new Error(`Failed to switch to chain 'eip155:${c}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}}class D5{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=$t("events"),this.client=$t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const s=t||Mr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||Mr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Fi(new cn(s,$t("disableProviderPing")))}}class S5{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=$t("events"),this.client=$t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||Mr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||Mr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Fi(new cn(s,$t("disableProviderPing")))}}class I5{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=$t("events"),this.client=$t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||this.getCardanoRPCUrl(e);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const s=this.getCardanoRPCUrl(t);e[t]=this.createHttpProvider(t,s)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||this.getCardanoRPCUrl(e);return typeof s>"u"?void 0:new Fi(new cn(s,$t("disableProviderPing")))}}class x5{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=$t("events"),this.client=$t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const s=t||Mr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||Mr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Fi(new cn(s,$t("disableProviderPing")))}}class O5{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=$t("events"),this.client=$t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const s=t||Mr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||Mr(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Fi(new cn(s,$t("disableProviderPing")))}}var P5=Object.defineProperty,A5=Object.defineProperties,C5=Object.getOwnPropertyDescriptors,Pd=Object.getOwnPropertySymbols,T5=Object.prototype.hasOwnProperty,N5=Object.prototype.propertyIsEnumerable,Ad=(i,e,t)=>e in i?P5(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,$o=(i,e)=>{for(var t in e||(e={}))T5.call(e,t)&&Ad(i,t,e[t]);if(Pd)for(var t of Pd(e))N5.call(e,t)&&Ad(i,t,e[t]);return i},Jc=(i,e)=>A5(i,C5(e));class Xu{constructor(e){this.events=new Au,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Qe.pino(Qe.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Dd})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const t=new Xu(e);return await t.initialize(),t}async request(e,t){const[s,o]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:$o({},e),chainId:`${s}:${o}`,topic:this.session.topic})}sendAsync(e,t,s){this.request(e,s).then(o=>t(null,o)).catch(o=>t(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Rt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let t=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(t>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:s,approval:o}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});s&&(this.uri=s,this.events.emit("display_uri",s)),await o().then(c=>{this.session=c,this.namespaces||(this.namespaces=b5(c.namespaces),this.persist("namespaces",this.namespaces))}).catch(c=>{if(c.message!==Yp)throw c;t++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[s,o]=this.validateChain(e);this.getProvider(s).setDefaultChain(o,t)}catch(s){if(!/Please call connect/.test(s.message))throw s}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(ni(t)){for(const s of t)e.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await i5.init({logger:this.providerOpts.logger||Dd,relayUrl:this.providerOpts.relayUrl||a5,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>Uo(t)))];Yc("client",this.client),Yc("events",this.events),Yc("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const s=v5(t,this.session),o=Xp(s),c=_5(this.namespaces,this.optionalNamespaces),l=Jc($o({},c[t]),{accounts:s,chains:o});switch(t){case"eip155":this.rpcProviders[t]=new E5({namespace:l});break;case"solana":this.rpcProviders[t]=new D5({namespace:l});break;case"cosmos":this.rpcProviders[t]=new S5({namespace:l});break;case"polkadot":this.rpcProviders[t]=new w5({namespace:l});break;case"cip34":this.rpcProviders[t]=new I5({namespace:l});break;case"elrond":this.rpcProviders[t]=new x5({namespace:l});break;case"multiversx":this.rpcProviders[t]=new O5({namespace:l});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:t}=e,{event:s}=t;if(s.name==="accountsChanged"){const o=s.data;o&&ni(o)&&this.events.emit("accountsChanged",o.map(m5))}else s.name==="chainChanged"?this.onChainChanged(t.chainId):this.events.emit(s.name,s.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var s;const{namespaces:o}=t,c=(s=this.client)==null?void 0:s.session.get(e);this.session=Jc($o({},c),{namespaces:o}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Jc($o({},Rt("USER_DISCONNECTED")),{data:e.topic}))}),this.on(Ui.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t,optionalNamespaces:s,sessionProperties:o}=e;t&&Object.keys(t).length&&(this.namespaces=t),s&&Object.keys(s).length&&(this.optionalNamespaces=s),this.sessionProperties=o,this.persist("namespaces",t),this.persist("optionalNamespaces",s)}validateChain(e){const[t,s]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,s];if(t&&!Object.keys(this.namespaces||{}).map(l=>Uo(l)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&s)return[t,s];const o=Uo(Object.keys(this.namespaces)[0]),c=this.rpcProviders[o].getDefaultChain();return[o,c]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,t=!1){var s;if(!this.namespaces)return;const[o,c]=this.validateChain(e);t||this.getProvider(o).setDefaultChain(c),((s=this.namespaces[o])!=null?s:this.namespaces[`${o}:${c}`]).defaultChain=c,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",c)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,t){this.client.core.storage.setItem(`${Sd}/${e}`,t)}async getFromStore(e){return await this.client.core.storage.getItem(`${Sd}/${e}`)}}const R5=Xu,$5="wc",F5="ethereum_provider",U5=`${$5}@2:${F5}:`,j5="https://rpc.walletconnect.com/v1/",Ou=["eth_sendTransaction","personal_sign"],M5=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],Pu=["chainChanged","accountsChanged"],L5=["message","disconnect","connect"];var B5=Object.defineProperty,z5=Object.defineProperties,q5=Object.getOwnPropertyDescriptors,Cd=Object.getOwnPropertySymbols,H5=Object.prototype.hasOwnProperty,K5=Object.prototype.propertyIsEnumerable,Td=(i,e,t)=>e in i?B5(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,ls=(i,e)=>{for(var t in e||(e={}))H5.call(e,t)&&Td(i,t,e[t]);if(Cd)for(var t of Cd(e))K5.call(e,t)&&Td(i,t,e[t]);return i},Nd=(i,e)=>z5(i,q5(e));function Go(i){return Number(i[0].split(":")[1])}function Xc(i){return`0x${i.toString(16)}`}function V5(i){const{chains:e,optionalChains:t,methods:s,optionalMethods:o,events:c,optionalEvents:l,rpcMap:f}=i;if(!ni(e))throw new Error("Invalid chains");const y={chains:e,methods:s||Ou,events:c||Pu,rpcMap:ls({},e.length?{[Go(e)]:f[Go(e)]}:{})},p=c==null?void 0:c.filter(x=>!Pu.includes(x)),v=s==null?void 0:s.filter(x=>!Ou.includes(x));if(!t&&!l&&!o&&!(p!=null&&p.length)&&!(v!=null&&v.length))return{required:e.length?y:void 0};const S=(p==null?void 0:p.length)&&(v==null?void 0:v.length)||!t,D={chains:[...new Set(S?y.chains.concat(t||[]):t)],methods:[...new Set(y.methods.concat(o!=null&&o.length?o:M5))],events:[...new Set(y.events.concat(l||L5))],rpcMap:f};return{required:e.length?y:void 0,optional:t.length?D:void 0}}class Zu{constructor(){this.events=new Lr.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=U5,this.on=(e,t)=>(this.events.on(e,t),this),this.once=(e,t)=>(this.events.once(e,t),this),this.removeListener=(e,t)=>(this.events.removeListener(e,t),this),this.off=(e,t)=>(this.events.off(e,t),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){const t=new Zu;return await t.initialize(e),t}async request(e){return await this.signer.request(e,this.formatChainId(this.chainId))}sendAsync(e,t){this.signer.sendAsync(e,t,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:t,optional:s}=V5(this.rpc);try{const o=await new Promise(async(l,f)=>{var y;this.rpc.showQrModal&&((y=this.modal)==null||y.subscribeModal(p=>{!p.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),f(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(Nd(ls({namespaces:ls({},t&&{[this.namespace]:t})},s&&{optionalNamespaces:{[this.namespace]:s}}),{pairingTopic:e==null?void 0:e.pairingTopic})).then(p=>{l(p)}).catch(p=>{f(new Error(p.message))})});if(!o)return;this.setChainIds(this.rpc.chains);const c=bE(o.namespaces,[this.namespace]);this.setAccounts(c),this.events.emit("connect",{chainId:Xc(this.chainId)})}catch(o){throw this.signer.logger.error(o),o}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:t}=e,{event:s}=t;s.name==="accountsChanged"?(this.accounts=this.parseAccounts(s.data),this.events.emit("accountsChanged",this.accounts)):s.name==="chainChanged"?this.setChainId(this.formatChainId(s.data)):this.events.emit(s.name,s.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",Xc(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",Nd(ls({},Rt("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var t,s;this.rpc.showQrModal&&((t=this.modal)==null||t.closeModal(),(s=this.modal)==null||s.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const t=e.filter(s=>this.isCompatibleChainId(s)).map(s=>this.parseChainId(s));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",Xc(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const t=this.parseChainId(e);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(e){const[t,s,o]=e.split(":");return{chainId:`${t}:${s}`,address:o}}setAccounts(e){this.accounts=e.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,s;const o=(t=e==null?void 0:e.chains)!=null?t:[],c=(s=e==null?void 0:e.optionalChains)!=null?s:[],l=o.concat(c);if(!l.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const f=o.length?(e==null?void 0:e.methods)||Ou:[],y=o.length?(e==null?void 0:e.events)||Pu:[],p=(e==null?void 0:e.optionalMethods)||[],v=(e==null?void 0:e.optionalEvents)||[],S=(e==null?void 0:e.rpcMap)||this.buildRpcMap(l,e.projectId),D=(e==null?void 0:e.qrModalOptions)||void 0;return{chains:o==null?void 0:o.map(x=>this.formatChainId(x)),optionalChains:c.map(x=>this.formatChainId(x)),methods:f,events:y,optionalMethods:p,optionalEvents:v,rpcMap:S,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:D,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){const s={};return e.forEach(o=>{s[o]=this.getRpcUrl(o,t)}),s}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?Go(this.rpc.chains):Go(this.rpc.optionalChains),this.signer=await R5.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let t;try{const{WalletConnectModal:s}=await Nm(()=>import("./index-80b76fc3.js").then(o=>o.i),["assets/index-80b76fc3.js","assets/index-44f668b5.js","assets/index-20b0d5b7.css"]);t=s}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(t)try{this.modal=new t(ls({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(s){throw this.signer.logger.error(s),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:t,optionalChains:s,rpcMap:o}=e;t&&ni(t)&&(this.rpc.chains=t.map(c=>this.formatChainId(c)),t.forEach(c=>{this.rpc.rpcMap[c]=(o==null?void 0:o[c])||this.getRpcUrl(c)})),s&&ni(s)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=s==null?void 0:s.map(c=>this.formatChainId(c)),s.forEach(c=>{this.rpc.rpcMap[c]=(o==null?void 0:o[c])||this.getRpcUrl(c)}))}getRpcUrl(e,t){var s;return((s=this.rpc.rpcMap)==null?void 0:s[e])||`${j5}?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:t==null?void 0:t.accounts),this.setAccounts(t==null?void 0:t.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(t=>this.parseAccount(t))}}const sx=Zu;export{sx as EthereumProvider,L5 as OPTIONAL_EVENTS,M5 as OPTIONAL_METHODS,Pu as REQUIRED_EVENTS,Ou as REQUIRED_METHODS,Zu as default};
